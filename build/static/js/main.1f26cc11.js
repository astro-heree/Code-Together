/*! For license information please see main.1f26cc11.js.LICENSE.txt */
(()=>{var e={78:(e,t,n)=>{"use strict";var i=n(8366);e.exports=i([].slice)},307:(e,t,n)=>{"use strict";var i=n(5749),r=n(9607),o=n(1363),s=n(4482),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return r(t)&&o(t.prototype,a(e))}},375:(e,t,n)=>{"use strict";var i=n(7886),r=Function.prototype,o=r.apply,s=r.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?s.bind(o):function(){return s.apply(o,arguments)})},473:(e,t,n)=>{"use strict";var i=n(4606),r=n(607).f,o=n(9825),s=n(4071),a=n(6337),c=n(4205)("toStringTag");e.exports=function(e,t,n,l){var u=n?e:e&&e.prototype;u&&(s(u,c)||r(u,c,{configurable:!0,value:t}),l&&!i&&o(u,"toString",a))}},504:(e,t,n)=>{"use strict";var i=n(9637);e.exports=i},511:(e,t,n)=>{"use strict";var i=n(8366),r=n(1416),o=n(8777),s=n(7519),a=n(4300),c=i(s),l=i("".slice),u=Math.ceil,d=function(e){return function(t,n,i){var s,d,h=o(a(t)),p=r(n),f=h.length,m=void 0===i?" ":o(i);return p<=f||""===m?h:((d=c(m,u((s=p-f)/m.length))).length>s&&(d=l(d,0,s)),e?h+d:d+h)}};e.exports={start:d(!1),end:d(!0)}},579:(e,t,n)=>{"use strict";e.exports=n(1153)},607:(e,t,n)=>{"use strict";var i=n(3570),r=n(8331),o=n(1964),s=n(6929),a=n(5099),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=i?o?function(e,t,n){if(s(e),t=a(t),s(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var i=u(e,t);i&&i[p]&&(e[t]=n.value,n={configurable:h in n?n[h]:i[h],enumerable:d in n?n[d]:i[d],writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(s(e),t=a(t),s(n),r)try{return l(e,t,n)}catch(i){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},683:(e,t,n)=>{"use strict";var i=n(7800),r=n(5749),o=n(375),s=n(1312),a=n(3266),c=n(6929),l=n(5900),u=n(4662),d=n(8445),h=r("Reflect","construct"),p=Object.prototype,f=[].push,m=d((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),g=!d((function(){h((function(){}))})),v=m||g;i({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(e,t){a(e),c(t);var n=arguments.length<3?e:a(arguments[2]);if(g&&!m)return h(e,t,n);if(e===n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return o(f,i,t),new(o(s,e,i))}var r=n.prototype,d=u(l(r)?r:p),v=o(e,d,t);return l(v)?v:d}})},705:(e,t,n)=>{"use strict";var i=n(5534);e.exports=i},819:e=>{"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var i=+e;return(i>0?n:t)(i)}},844:(e,t,n)=>{"use strict";var i=n(8445);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){return 1},1)}))}},1099:(e,t,n)=>{"use strict";var i=n(4702),r=Object.defineProperty;e.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},1153:(e,t,n)=>{"use strict";var i=n(5043),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var i,o={},l=null,u=null;for(i in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,i)&&!c.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:l,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},1187:(e,t,n)=>{"use strict";var i=n(8366),r=n(8445),o=n(9607),s=n(8061),a=n(5749),c=n(9880),l=function(){},u=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,h=i(d.exec),p=!d.test(l),f=function(e){if(!o(e))return!1;try{return u(l,[],e),!0}catch(t){return!1}},m=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!h(d,c(e))}catch(t){return!0}};m.sham=!0,e.exports=!u||r((function(){var e;return f(f.call)||!f(Object)||!f((function(){e=!0}))||e}))?m:f},1312:(e,t,n)=>{"use strict";var i=n(8366),r=n(4508),o=n(5900),s=n(4071),a=n(78),c=n(7886),l=Function,u=i([].concat),d=i([].join),h={};e.exports=c?l.bind:function(e){var t=r(this),n=t.prototype,i=a(arguments,1),c=function(){var n=u(i,a(arguments));return this instanceof c?function(e,t,n){if(!s(h,t)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";h[t]=l("C,a","return new C("+d(i,",")+")")}return h[t](e,n)}(t,n.length,n):t.apply(e,n)};return o(n)&&(c.prototype=n),c}},1323:(e,t,n)=>{"use strict";var i=n(7800),r=n(8851);i({target:"Object",stat:!0,arity:2,forced:Object.assign!==r},{assign:r})},1338:(e,t,n)=>{"use strict";var i=n(1363),r=n(5510),o=Array.prototype;e.exports=function(e){var t=e.slice;return e===o||i(o,e)&&t===o.slice?r:t}},1348:e=>{"use strict";var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},1363:(e,t,n)=>{"use strict";var i=n(8366);e.exports=i({}.isPrototypeOf)},1416:(e,t,n)=>{"use strict";var i=n(4721),r=Math.min;e.exports=function(e){var t=i(e);return t>0?r(t,9007199254740991):0}},1426:(e,t,n)=>{"use strict";var i=n(7800),r=n(4071),o=n(307),s=n(6381),a=n(9203),c=n(2398),l=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!o(e))throw new TypeError(s(e)+" is not a symbol");if(r(l,e))return l[e]}})},1497:(e,t,n)=>{"use strict";var i=n(3218);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},1543:(e,t,n)=>{"use strict";var i,r,o,s=n(3816),a=n(4702),c=n(5900),l=n(9825),u=n(4071),d=n(8531),h=n(6045),p=n(6663),f="Object already initialized",m=a.TypeError,g=a.WeakMap;if(s||d.state){var v=d.state||(d.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,i=function(e,t){if(v.has(e))throw new m(f);return t.facade=e,v.set(e,t),t},r=function(e){return v.get(e)||{}},o=function(e){return v.has(e)}}else{var y=h("state");p[y]=!0,i=function(e,t){if(u(e,y))throw new m(f);return t.facade=e,l(e,y,t),t},r=function(e){return u(e,y)?e[y]:{}},o=function(e){return u(e,y)}}e.exports={set:i,get:r,has:o,enforce:function(e){return o(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=r(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return n}}}},1566:(e,t,n)=>{"use strict";var i=n(4774),r=n(4508),o=n(7886),s=i(i.bind);e.exports=function(e,t){return r(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},1731:(e,t,n)=>{"use strict";var i=n(3570),r=n(1964),o=n(607),s=n(6929),a=n(7555),c=n(3734);t.f=i&&!r?Object.defineProperties:function(e,t){s(e);for(var n,i=a(t),r=c(t),l=r.length,u=0;l>u;)o.f(e,n=r[u++],i[n]);return e}},1760:(e,t,n)=>{"use strict";n(6162);var i=n(8118);e.exports=i("Array","filter")},1786:(e,t,n)=>{"use strict";n(6756);var i=n(8118);e.exports=i("Array","concat")},1821:(e,t,n)=>{"use strict";n(683);var i=n(5313);e.exports=i.Reflect.construct},1846:(e,t,n)=>{"use strict";n(6684);var i=n(8118);e.exports=i("Array","map")},1903:(e,t,n)=>{"use strict";var i=n(8445),r=n(4205),o=n(5145),s=r("species");e.exports=function(e){return o>=51||!i((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},1925:(e,t,n)=>{"use strict";var i=n(4702),r=n(5900),o=i.document,s=r(o)&&r(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},1964:(e,t,n)=>{"use strict";var i=n(3570),r=n(8445);e.exports=i&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},2202:(e,t,n)=>{"use strict";var i=n(8366),r=i({}.toString),o=i("".slice);e.exports=function(e){return o(r(e),8,-1)}},2203:(e,t,n)=>{"use strict";var i=n(7886),r=Function.prototype.call;e.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},2208:(e,t,n)=>{"use strict";var i=n(2635);e.exports=i},2224:(e,t,n)=>{"use strict";var i=n(7800),r=n(5749),o=n(4071),s=n(8777),a=n(9203),c=n(2398),l=a("string-to-symbol-registry"),u=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=s(e);if(o(l,t))return l[t];var n=r("Symbol")(t);return l[t]=n,u[n]=t,n}})},2301:(e,t,n)=>{!function(e){var t={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},n=e.Pos;function i(e,n){return"pairs"==n&&"string"==typeof e?e:"object"==typeof e&&null!=e[n]?e[n]:t[n]}e.defineOption("autoCloseBrackets",!1,(function(t,n,s){s&&s!=e.Init&&(t.removeKeyMap(r),t.state.closeBrackets=null),n&&(o(i(n,"pairs")),t.state.closeBrackets=n,t.addKeyMap(r))}));var r={Backspace:c,Enter:l};function o(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),i="'"+n+"'";r[i]||(r[i]=s(n))}}function s(e){return function(t){return h(t,e)}}function a(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function c(t){var r=a(t);if(!r||t.getOption("disableInput"))return e.Pass;for(var o=i(r,"pairs"),s=t.listSelections(),c=0;c<s.length;c++){if(!s[c].empty())return e.Pass;var l=p(t,s[c].head);if(!l||o.indexOf(l)%2!=0)return e.Pass}for(c=s.length-1;c>=0;c--){var u=s[c].head;t.replaceRange("",n(u.line,u.ch-1),n(u.line,u.ch+1),"+delete")}}function l(t){var n=a(t),r=n&&i(n,"explode");if(!r||t.getOption("disableInput"))return e.Pass;for(var o=t.listSelections(),s=0;s<o.length;s++){if(!o[s].empty())return e.Pass;var c=p(t,o[s].head);if(!c||r.indexOf(c)%2!=0)return e.Pass}t.operation((function(){var e=t.lineSeparator()||"\n";t.replaceSelection(e+e,null),u(t,-1),o=t.listSelections();for(var n=0;n<o.length;n++){var i=o[n].head.line;t.indentLine(i,null,!0),t.indentLine(i+1,null,!0)}}))}function u(e,t){for(var n=[],i=e.listSelections(),r=0,o=0;o<i.length;o++){var s=i[o];s.head==e.getCursor()&&(r=o);var a=s.head.ch||t>0?{line:s.head.line,ch:s.head.ch+t}:{line:s.head.line-1};n.push({anchor:a,head:a})}e.setSelections(n,r)}function d(t){var i=e.cmpPos(t.anchor,t.head)>0;return{anchor:new n(t.anchor.line,t.anchor.ch+(i?-1:1)),head:new n(t.head.line,t.head.ch+(i?1:-1))}}function h(t,r){var o=a(t);if(!o||t.getOption("disableInput"))return e.Pass;var s=i(o,"pairs"),c=s.indexOf(r);if(-1==c)return e.Pass;for(var l,h=i(o,"closeBefore"),p=i(o,"triples"),m=s.charAt(c+1)==r,g=t.listSelections(),v=c%2==0,y=0;y<g.length;y++){var b,k=g[y],w=k.head,S=t.getRange(w,n(w.line,w.ch+1));if(v&&!k.empty())b="surround";else if(!m&&v||S!=r)if(m&&w.ch>1&&p.indexOf(r)>=0&&t.getRange(n(w.line,w.ch-2),w)==r+r){if(w.ch>2&&/\bstring/.test(t.getTokenTypeAt(n(w.line,w.ch-2))))return e.Pass;b="addFour"}else if(m){var C=0==w.ch?" ":t.getRange(n(w.line,w.ch-1),w);if(e.isWordChar(S)||C==r||e.isWordChar(C))return e.Pass;b="both"}else{if(!v||!(0===S.length||/\s/.test(S)||h.indexOf(S)>-1))return e.Pass;b="both"}else b=m&&f(t,w)?"both":p.indexOf(r)>=0&&t.getRange(w,n(w.line,w.ch+3))==r+r+r?"skipThree":"skip";if(l){if(l!=b)return e.Pass}else l=b}var T=c%2?s.charAt(c-1):r,x=c%2?r:s.charAt(c+1);t.operation((function(){if("skip"==l)u(t,1);else if("skipThree"==l)u(t,3);else if("surround"==l){for(var e=t.getSelections(),n=0;n<e.length;n++)e[n]=T+e[n]+x;for(t.replaceSelections(e,"around"),e=t.listSelections().slice(),n=0;n<e.length;n++)e[n]=d(e[n]);t.setSelections(e)}else"both"==l?(t.replaceSelection(T+x,null),t.triggerElectric(T+x),u(t,-1)):"addFour"==l&&(t.replaceSelection(T+T+T+T,"before"),u(t,1))}))}function p(e,t){var i=e.getRange(n(t.line,t.ch-1),n(t.line,t.ch+1));return 2==i.length?i:null}function f(e,t){var i=e.getTokenAt(n(t.line,t.ch+1));return/\bstring/.test(i.type)&&i.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}o(t.pairs+"`")}(n(6246))},2398:(e,t,n)=>{"use strict";var i=n(6521);e.exports=i&&!!Symbol.for&&!!Symbol.keyFor},2400:(e,t,n)=>{"use strict";var i=n(7800),r=n(3570),o=n(9085),s=n(7555),a=n(7965),c=n(4794);i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){for(var t,n,i=s(e),r=a.f,l=o(i),u={},d=0;l.length>d;)void 0!==(n=r(i,t=l[d++]))&&c(u,t,n);return u}})},2411:(e,t,n)=>{"use strict";var i=n(4956);e.exports=i},2545:e=>{"use strict";e.exports=!0},2546:(e,t,n)=>{"use strict";var i=n(1363),r=n(1846),o=Array.prototype;e.exports=function(e){var t=e.map;return e===o||i(o,e)&&t===o.map?r:t}},2582:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2587:(e,t,n)=>{"use strict";n(5243);var i=n(5313).Object,r=e.exports=function(e,t){return i.defineProperties(e,t)};i.defineProperties.sham&&(r.sham=!0)},2635:(e,t,n)=>{"use strict";n(1323);var i=n(5313);e.exports=i.Object.assign},2721:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2730:(e,t,n)=>{"use strict";var i=n(5043),r=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),P=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var D,j=Object.assign;function U(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var i=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){i=l}e.call(t.prototype)}else{try{throw Error()}catch(l){i=l}e()}}catch(l){if(l&&i&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var c="\n"+r[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case S:return"Portal";case x:return"Profiler";case T:return"StrictMode";case R:return"Suspense";case _:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=H(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),i=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Te=null;function xe(e){if(e=br(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=wr(t),Se(e.stateNode,e.type,t))}}function Ee(e){Ce?Te?Te.push(e):Te=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Te;if(Te=Ce=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Oe(e,t){return e(t)}function Re(){}var _e=!1;function Ne(e,t,n){if(_e)return e(t,n);_e=!0;try{return Oe(e,t,n)}finally{_e=!1,(null!==Ce||null!==Te)&&(Re(),Pe())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Le=!1;if(u)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ue){Le=!1}function Me(e,t,n,i,r,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var De=!1,je=null,Ue=!1,Fe=null,Be={onError:function(e){De=!0,je=e}};function ze(e,t,n,i,r,o,s,a,c){De=!1,je=null,Me.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(o(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return He(r),e;if(s===i)return He(r),t;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,c=r.child;c;){if(c===n){a=!0,n=r,i=s;break}if(c===i){a=!0,i=r,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,i=r;break}if(c===i){a=!0,i=s,n=r;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Je=r.unstable_cancelCallback,$e=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Ye=r.unstable_now,Xe=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=dt(a):0!==(o&=s)&&(i=dt(o))}else 0!==(s=n&~r)?i=dt(s):0!==o&&(i=dt(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-st(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-st(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var bt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,Ct,Tt,xt,Et=!1,Pt=[],Ot=null,Rt=null,_t=null,Nt=new Map,It=new Map,Lt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":_t=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Dt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&St(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function jt(e){var t=yr(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void xt(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&St(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);ke=i,n.target.dispatchEvent(i),ke=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Bt(){Et=!1,null!==Ot&&Ut(Ot)&&(Ot=null),null!==Rt&&Ut(Rt)&&(Rt=null),null!==_t&&Ut(_t)&&(_t=null),Nt.forEach(Ft),It.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return zt(t,e)}if(0<Pt.length){zt(Pt[0],e);for(var n=1;n<Pt.length;n++){var i=Pt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Ot&&zt(Ot,e),null!==Rt&&zt(Rt,e),null!==_t&&zt(_t,e),Nt.forEach(t),It.forEach(t),n=0;n<Lt.length;n++)(i=Lt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)jt(n),null===n.blockedOn&&Lt.shift()}var Wt=k.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,i){var r=bt,o=Wt.transition;Wt.transition=null;try{bt=1,Kt(e,t,n,i)}finally{bt=r,Wt.transition=o}}function Gt(e,t,n,i){var r=bt,o=Wt.transition;Wt.transition=null;try{bt=4,Kt(e,t,n,i)}finally{bt=r,Wt.transition=o}}function Kt(e,t,n,i){if(Ht){var r=$t(e,t,n,i);if(null===r)Hi(e,t,i,Jt,n),Mt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Ot=Dt(Ot,e,t,n,i,r),!0;case"dragenter":return Rt=Dt(Rt,e,t,n,i,r),!0;case"mouseover":return _t=Dt(_t,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Nt.set(o,Dt(Nt.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,It.set(o,Dt(It.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Mt(e,i),4&t&&-1<At.indexOf(e)){for(;null!==r;){var o=br(r);if(null!==o&&wt(o),null===(o=$t(e,t,n,i))&&Hi(e,t,i,Jt,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Hi(e,t,i,null,n)}}var Jt=null;function $t(e,t,n,i){if(Jt=null,null!==(e=yr(e=we(i))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,i=n.length,r="value"in Yt?Yt.value:Yt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,i,r,o){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(ln),dn=j({},ln,{view:0,detail:0}),hn=on(dn),pn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(j({},pn,{dataTransfer:0})),gn=on(j({},dn,{relatedTarget:0})),vn=on(j({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),kn=on(j({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function xn(){return Tn}var En=j({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=on(En),On=on(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),_n=on(j({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=on(Nn),Ln=[9,13,27,32],An=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Dn=u&&"TextEvent"in window&&!Mn,jn=u&&(!An||Mn&&8<Mn&&11>=Mn),Un=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,i){Ee(i),0<(t=Gi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Jn(e){Ui(e,0)}function $n(e){if(K(kr(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function ti(){Gn&&(Gn.detachEvent("onpropertychange",ni),Kn=Gn=null)}function ni(e){if("value"===e.propertyName&&$n(Kn)){var t=[];qn(t,Kn,e,we(e)),Ne(Jn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Kn=n,(Gn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Kn)}function oi(e,t){if("click"===e)return $n(t)}function si(e,t){if("input"===e||"change"===e)return $n(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ci(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function li(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=li(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=li(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=ui(n,o);var s=ui(n,i);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,yi=null,bi=!1;function ki(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==gi||gi!==J(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&ci(yi,i)||(yi=i,0<(i=Gi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Si={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Ci={},Ti={};function xi(e){if(Ci[e])return Ci[e];if(!Si[e])return e;var t,n=Si[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ti)return Ci[e]=n[t];return e}u&&(Ti=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);var Ei=xi("animationend"),Pi=xi("animationiteration"),Oi=xi("animationstart"),Ri=xi("transitionend"),_i=new Map,Ni="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(e,t){_i.set(e,t),c(t,[e])}for(var Li=0;Li<Ni.length;Li++){var Ai=Ni[Li];Ii(Ai.toLowerCase(),"on"+(Ai[0].toUpperCase()+Ai.slice(1)))}Ii(Ei,"onAnimationEnd"),Ii(Pi,"onAnimationIteration"),Ii(Oi,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Ri,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Di=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mi));function ji(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,s,a,c,l){if(ze.apply(this,arguments),De){if(!De)throw Error(o(198));var u=je;De=!1,je=null,Ue||(Ue=!0,Fe=u)}}(i,t,void 0,e),e.currentTarget=null}function Ui(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==o&&r.isPropagationStopped())break e;ji(r,a,l),o=c}else for(s=0;s<i.length;s++){if(c=(a=i[s]).instance,l=a.currentTarget,a=a.listener,c!==o&&r.isPropagationStopped())break e;ji(r,a,l),o=c}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Wi(t,e,2,!1),n.add(i))}function Bi(e,t,n){var i=0;t&&(i|=4),Wi(n,e,i,t)}var zi="_reactListening"+Math.random().toString(36).slice(2);function Vi(e){if(!e[zi]){e[zi]=!0,s.forEach((function(t){"selectionchange"!==t&&(Di.has(t)||Bi(t,!1,e),Bi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zi]||(t[zi]=!0,Bi("selectionchange",!1,t))}}function Wi(e,t,n,i){switch(Qt(t)){case 1:var r=qt;break;case 4:r=Gt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hi(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===r||8===c.nodeType&&c.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=yr(a)))return;if(5===(c=s.tag)||6===c){i=o=s;continue e}a=a.parentNode}}i=i.return}Ne((function(){var i=o,r=we(n),s=[];e:{var a=_i.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Pn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Rn;break;case Ei:case Pi:case Oi:c=vn;break;case Ri:c=_n;break;case"scroll":c=hn;break;case"wheel":c=In;break;case"copy":case"cut":case"paste":c=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=On}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Ie(f,h))&&u.push(qi(f,m,p)))),d)break;f=f.return}0<u.length&&(a=new c(a,l,null,n,r),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===ke||!(l=n.relatedTarget||n.fromElement)||!yr(l)&&!l[fr])&&(c||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=i,null!==(l=(l=n.relatedTarget||n.toElement)?yr(l):null)&&(l!==(d=Ve(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=i),c!==l)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=On,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==c?a:kr(c),p=null==l?a:kr(l),(a=new u(m,f+"leave",c,n,r)).target=d,a.relatedTarget=p,m=null,yr(r)===i&&((u=new u(h,f+"enter",l,n,r)).target=p,u.relatedTarget=d,m=u),d=m,c&&l)e:{for(h=l,f=0,p=u=c;p;p=Ki(p))f++;for(p=0,m=h;m;m=Ki(m))p++;for(;0<f-p;)u=Ki(u),f--;for(;0<p-f;)h=Ki(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Ki(u),h=Ki(h)}u=null}else u=null;null!==c&&Ji(s,a,c,u,!1),null!==l&&null!==d&&Ji(s,d,l,u,!0)}if("select"===(c=(a=i?kr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Qn;else if(Hn(a))if(Yn)g=si;else{g=ri;var v=ii}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=oi);switch(g&&(g=g(e,i))?qn(s,g,n,r):(v&&v(e,a,i),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=i?kr(i):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,yi=null);break;case"focusout":yi=vi=gi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,ki(s,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":ki(s,n,r)}var y;if(An)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Xt="value"in(Yt=r)?Yt.value:Yt.textContent,Vn=!0)),0<(v=Gi(i,b)).length&&(b=new kn(b,e,null,n,r),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!An&&Bn(e,t)?(e=en(),Zt=Xt=Yt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Gi(i,"onBeforeInput")).length&&(r=new kn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=y))}Ui(s,t)}))}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Ie(e,n))&&i.unshift(qi(e,o,r)),null!=(o=Ie(e,t))&&i.push(qi(e,o,r))),e=e.return}return i}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ji(e,t,n,i,r){for(var o=t._reactName,s=[];null!==n&&n!==i;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===i)break;5===a.tag&&null!==l&&(a=l,r?null!=(c=Ie(n,o))&&s.unshift(qi(n,c,a)):r||null!=(c=Ie(n,o))&&s.push(qi(n,c,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var $i=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Yi(e){return("string"===typeof e?e:""+e).replace($i,"\n").replace(Qi,"")}function Xi(e,t,n){if(t=Yi(t),Yi(e)!==t&&n)throw Error(o(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function cr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Vt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Vt(t)}function lr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,pr="__reactProps$"+dr,fr="__reactContainer$"+dr,mr="__reactEvents$"+dr,gr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function yr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function kr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wr(e){return e[pr]||null}var Sr=[],Cr=-1;function Tr(e){return{current:e}}function xr(e){0>Cr||(e.current=Sr[Cr],Sr[Cr]=null,Cr--)}function Er(e,t){Cr++,Sr[Cr]=e.current,e.current=t}var Pr={},Or=Tr(Pr),Rr=Tr(!1),_r=Pr;function Nr(e,t){var n=e.type.contextTypes;if(!n)return Pr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ir(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Lr(){xr(Rr),xr(Or)}function Ar(e,t,n){if(Or.current!==Pr)throw Error(o(168));Er(Or,t),Er(Rr,n)}function Mr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,W(e)||"Unknown",r));return j({},n,i)}function Dr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pr,_r=Or.current,Er(Or,e),Er(Rr,Rr.current),!0}function jr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Mr(e,t,_r),i.__reactInternalMemoizedMergedChildContext=e,xr(Rr),xr(Or),Er(Or,e)):xr(Rr),Er(Rr,n)}var Ur=null,Fr=!1,Br=!1;function zr(e){null===Ur?Ur=[e]:Ur.push(e)}function Vr(){if(!Br&&null!==Ur){Br=!0;var e=0,t=bt;try{var n=Ur;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Ur=null,Fr=!1}catch(r){throw null!==Ur&&(Ur=Ur.slice(e+1)),Ke(Ze,Vr),r}finally{bt=t,Br=!1}}return null}var Wr=[],Hr=0,qr=null,Gr=0,Kr=[],Jr=0,$r=null,Qr=1,Yr="";function Xr(e,t){Wr[Hr++]=Gr,Wr[Hr++]=qr,qr=e,Gr=t}function Zr(e,t,n){Kr[Jr++]=Qr,Kr[Jr++]=Yr,Kr[Jr++]=$r,$r=e;var i=Qr;e=Yr;var r=32-st(i)-1;i&=~(1<<r),n+=1;var o=32-st(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Qr=1<<32-st(t)+r|n<<r|i,Yr=o+e}else Qr=1<<o|n<<r|i,Yr=e}function eo(e){null!==e.return&&(Xr(e,1),Zr(e,1,0))}function to(e){for(;e===qr;)qr=Wr[--Hr],Wr[Hr]=null,Gr=Wr[--Hr],Wr[Hr]=null;for(;e===$r;)$r=Kr[--Jr],Kr[Jr]=null,Yr=Kr[--Jr],Kr[Jr]=null,Qr=Kr[--Jr],Kr[Jr]=null}var no=null,io=null,ro=!1,oo=null;function so(e,t){var n=Nl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=lr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$r?{id:Qr,overflow:Yr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(ro){var t=io;if(t){var n=t;if(!ao(e,t)){if(co(e))throw Error(o(418));t=lr(n.nextSibling);var i=no;t&&ao(e,t)?so(i,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=io)){if(co(e))throw po(),Error(o(418));for(;t;)so(e,t),t=lr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=lr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?lr(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=lr(e.nextSibling)}function fo(){io=no=null,ro=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=k.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function ko(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Ll(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,i){return null===t||6!==t.tag?((t=jl(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,i){var o=n.type;return o===C?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===I&&bo(o)===t.type)?((i=r(t,n.props)).ref=vo(e,t,n),i.return=e,i):((i=Al(n.type,n.key,n.props,null,e.mode,i)).ref=vo(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,o){return null===t||7!==t.tag?((t=Ml(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Al(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case S:return(t=Ul(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Ml(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:c(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?l(e,t,n,i):null;case S:return n.key===r?u(e,t,n,i):null;case I:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||M(n))return null!==r?null:d(e,t,n,i,null);yo(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return c(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return l(t,e=e.get(null===i.key?n:i.key)||null,i,r);case S:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case I:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||M(i))return d(t,e=e.get(n)||null,i,r,null);yo(t,i)}return null}function m(r,o,a,c){for(var l=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(r,d,a[m],c);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(r,d),o=s(v,o,m),null===u?l=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(r,d),ro&&Xr(r,m),l;if(null===d){for(;m<a.length;m++)null!==(d=h(r,a[m],c))&&(o=s(d,o,m),null===u?l=d:u.sibling=d,u=d);return ro&&Xr(r,m),l}for(d=i(r,d);m<a.length;m++)null!==(g=f(d,r,m,a[m],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?l=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(r,e)})),ro&&Xr(r,m),l}function g(r,a,c,l){var u=M(c);if("function"!==typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(r,m,y.value,l);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(r,m),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(r,m),ro&&Xr(r,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=h(r,y.value,l))&&(a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return ro&&Xr(r,g),u}for(m=i(r,m);!y.done;g++,y=c.next())null!==(y=f(m,r,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(r,e)})),ro&&Xr(r,g),u}return function e(i,o,s,c){if("object"===typeof s&&null!==s&&s.type===C&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var l=s.key,u=o;null!==u;){if(u.key===l){if((l=s.type)===C){if(7===u.tag){n(i,u.sibling),(o=r(u,s.props.children)).return=i,i=o;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===I&&bo(l)===u.type){n(i,u.sibling),(o=r(u,s.props)).ref=vo(i,u,s),o.return=i,i=o;break e}n(i,u);break}t(i,u),u=u.sibling}s.type===C?((o=Ml(s.props.children,i.mode,c,s.key)).return=i,i=o):((c=Al(s.type,s.key,s.props,null,i.mode,c)).ref=vo(i,o,s),c.return=i,i=c)}return a(i);case S:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(i,o.sibling),(o=r(o,s.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=Ul(s,i.mode,c)).return=i,i=o}return a(i);case I:return e(i,o,(u=s._init)(s._payload),c)}if(te(s))return m(i,o,s,c);if(M(s))return g(i,o,s,c);yo(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,s)).return=i,i=o):(n(i,o),(o=jl(s,i.mode,c)).return=i,i=o),a(i)):n(i,o)}}var wo=ko(!0),So=ko(!1),Co=Tr(null),To=null,xo=null,Eo=null;function Po(){Eo=xo=To=null}function Oo(e){var t=Co.current;xr(Co),e._currentValue=t}function Ro(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function _o(e,t){To=e,Eo=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function No(e){var t=e._currentValue;if(Eo!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===To)throw Error(o(308));xo=e,To.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var Io=null;function Lo(e){null===Io?Io=[e]:Io.push(e)}function Ao(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Lo(t)):(n.next=r.next,r.next=n),t.interleaved=n,Mo(e,i)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Do=!1;function jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Oc)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Mo(e,n)}return null===(r=i.interleaved)?(t.next=t,Lo(i)):(t.next=r.next,r.next=t),i.interleaved=t,Mo(e,n)}function zo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,i){var r=e.updateQueue;Do=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var c=a,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==o){var d=r.baseState;for(s=0,u=l=c=null,a=o;;){var h=a.lane,p=a.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=j({},d,h);break e;case 2:Do=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=p,c=d):u=u.next=p,s|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(c=d),r.baseState=c,r.firstBaseUpdate=l,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Dc|=s,e.lanes=s,e.memoizedState=d}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var qo={},Go=Tr(qo),Ko=Tr(qo),Jo=Tr(qo);function $o(e){if(e===qo)throw Error(o(174));return e}function Qo(e,t){switch(Er(Jo,t),Er(Ko,e),Er(Go,qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xr(Go),Er(Go,t)}function Yo(){xr(Go),xr(Ko),xr(Jo)}function Xo(e){$o(Jo.current);var t=$o(Go.current),n=ce(t,e.type);t!==n&&(Er(Ko,e),Er(Go,n))}function Zo(e){Ko.current===e&&(xr(Go),xr(Ko))}var es=Tr(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function is(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var rs=k.ReactCurrentDispatcher,os=k.ReactCurrentBatchConfig,ss=0,as=null,cs=null,ls=null,us=!1,ds=!1,hs=0,ps=0;function fs(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function gs(e,t,n,i,r,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Zs:ea,e=n(i,r),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(o(301));s+=1,ls=cs=null,t.updateQueue=null,rs.current=ta,e=n(i,r)}while(ds)}if(rs.current=Xs,t=null!==cs&&null!==cs.next,ss=0,ls=cs=as=null,us=!1,t)throw Error(o(300));return e}function vs(){var e=0!==hs;return hs=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?as.memoizedState=ls=e:ls=ls.next=e,ls}function bs(){if(null===cs){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=cs.next;var t=null===ls?as.memoizedState:ls.next;if(null!==t)ls=t,cs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(cs=e).memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},null===ls?as.memoizedState=ls=e:ls=ls.next=e}return ls}function ks(e,t){return"function"===typeof t?t(e):t}function ws(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=cs,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var c=a=null,l=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=h,a=i):l=l.next=h,as.lanes|=d,Dc|=d}u=u.next}while(null!==u&&u!==s);null===l?a=i:l.next=c,ai(i,t.memoizedState)||(ba=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,as.lanes|=s,Dc|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ss(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);ai(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Cs(){}function Ts(e,t){var n=as,i=bs(),r=t(),s=!ai(i.memoizedState,r);if(s&&(i.memoizedState=r,ba=!0),i=i.queue,Ds(Ps.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Ns(9,Es.bind(null,n,i,r,t),void 0,null),null===Rc)throw Error(o(349));0!==(30&ss)||xs(n,t,r)}return r}function xs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Es(e,t,n,i){t.value=n,t.getSnapshot=i,Os(t)&&Rs(e)}function Ps(e,t,n){return n((function(){Os(t)&&Rs(e)}))}function Os(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Rs(e){var t=Mo(e,1);null!==t&&nl(t,e,1,-1)}function _s(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:e},t.queue=e,e=e.dispatch=Js.bind(null,as,e),[t.memoizedState,e]}function Ns(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Is(){return bs().memoizedState}function Ls(e,t,n,i){var r=ys();as.flags|=e,r.memoizedState=Ns(1|t,n,void 0,void 0===i?null:i)}function As(e,t,n,i){var r=bs();i=void 0===i?null:i;var o=void 0;if(null!==cs){var s=cs.memoizedState;if(o=s.destroy,null!==i&&ms(i,s.deps))return void(r.memoizedState=Ns(t,n,o,i))}as.flags|=e,r.memoizedState=Ns(1|t,n,o,i)}function Ms(e,t){return Ls(8390656,8,e,t)}function Ds(e,t){return As(2048,8,e,t)}function js(e,t){return As(4,2,e,t)}function Us(e,t){return As(4,4,e,t)}function Fs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,As(4,4,Fs.bind(null,t,e),n)}function zs(){}function Vs(e,t){var n=bs();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ms(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ws(e,t){var n=bs();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ms(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Hs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ai(n,t)||(n=mt(),as.lanes|=n,Dc|=n,e.baseState=!0),t)}function qs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=os.transition;os.transition={};try{e(!1),t()}finally{bt=n,os.transition=i}}function Gs(){return bs().memoizedState}function Ks(e,t,n){var i=tl(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},$s(e))Qs(t,n);else if(null!==(n=Ao(e,t,n,i))){nl(n,e,i,el()),Ys(n,t,i)}}function Js(e,t,n){var i=tl(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if($s(e))Qs(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,s)){var c=t.interleaved;return null===c?(r.next=r,Lo(t)):(r.next=c.next,c.next=r),void(t.interleaved=r)}}catch(l){}null!==(n=Ao(e,t,r,i))&&(nl(n,e,i,r=el()),Ys(n,t,i))}}function $s(e){var t=e.alternate;return e===as||null!==t&&t===as}function Qs(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ys(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xs={readContext:No,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Zs={readContext:No,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:No,useEffect:Ms,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ls(4194308,4,Fs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ls(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ys();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ks.bind(null,as,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:_s,useDebugValue:zs,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=_s(!1),t=e[0];return e=qs.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=as,r=ys();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Rc)throw Error(o(349));0!==(30&ss)||xs(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Ms(Ps.bind(null,i,s,e),[e]),i.flags|=2048,Ns(9,Es.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=Rc.identifierPrefix;if(ro){var n=Yr;t=":"+t+"R"+(n=(Qr&~(1<<32-st(Qr)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:No,useCallback:Vs,useContext:No,useEffect:Ds,useImperativeHandle:Bs,useInsertionEffect:js,useLayoutEffect:Us,useMemo:Ws,useReducer:ws,useRef:Is,useState:function(){return ws(ks)},useDebugValue:zs,useDeferredValue:function(e){return Hs(bs(),cs.memoizedState,e)},useTransition:function(){return[ws(ks)[0],bs().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Ts,useId:Gs,unstable_isNewReconciler:!1},ta={readContext:No,useCallback:Vs,useContext:No,useEffect:Ds,useImperativeHandle:Bs,useInsertionEffect:js,useLayoutEffect:Us,useMemo:Ws,useReducer:Ss,useRef:Is,useState:function(){return Ss(ks)},useDebugValue:zs,useDeferredValue:function(e){var t=bs();return null===cs?t.memoizedState=e:Hs(t,cs.memoizedState,e)},useTransition:function(){return[Ss(ks)[0],bs().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Ts,useId:Gs,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ra={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=el(),r=tl(e),o=Fo(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,r))&&(nl(t,e,r,i),zo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=el(),r=tl(e),o=Fo(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,r))&&(nl(t,e,r,i),zo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),i=tl(e),r=Fo(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Bo(e,r,i))&&(nl(t,e,i,n),zo(t,e,i))}};function oa(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!ci(n,i)||!ci(r,o))}function sa(e,t,n){var i=!1,r=Pr,o=t.contextType;return"object"===typeof o&&null!==o?o=No(o):(r=Ir(t)?_r:Or.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?Nr(e,r):Pr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},jo(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=No(o):(o=Ir(t)?_r:Or.current,r.context=Nr(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ia(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ra.enqueueReplaceState(r,r.state,null),Wo(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function la(e,t){try{var n="",i=t;do{n+=z(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Fo(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Hc||(Hc=!0,qc=i),da(0,t)},n}function fa(e,t,n){(n=Fo(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof i&&(null===Gc?Gc=new Set([this]):Gc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ha;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=xl.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fo(-1,1)).tag=2,Bo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ya=k.ReactCurrentOwner,ba=!1;function ka(e,t,n,i){t.child=null===e?So(t,null,n,i):wo(t,e.child,n,i)}function wa(e,t,n,i,r){n=n.render;var o=t.ref;return _o(t,r),i=gs(e,t,n,i,o,r),n=vs(),null===e||ba?(ro&&n&&eo(t),t.flags|=1,ka(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function Sa(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||Il(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Al(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ca(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:ci)(s,i)&&e.ref===t.ref)return Ha(e,t,r)}return t.flags|=1,(e=Ll(o,i)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(ci(o,i)&&e.ref===t.ref){if(ba=!1,t.pendingProps=i=o,0===(e.lanes&r))return t.lanes=e.lanes,Ha(e,t,r);0!==(131072&e.flags)&&(ba=!0)}}return Ea(e,t,n,i,r)}function Ta(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Lc,Ic),Ic|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(Lc,Ic),Ic|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Er(Lc,Ic),Ic|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,Er(Lc,Ic),Ic|=i;return ka(e,t,r,n),t.child}function xa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ea(e,t,n,i,r){var o=Ir(n)?_r:Or.current;return o=Nr(t,o),_o(t,r),n=gs(e,t,n,i,o,r),i=vs(),null===e||ba?(ro&&i&&eo(t),t.flags|=1,ka(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function Pa(e,t,n,i,r){if(Ir(n)){var o=!0;Dr(t)}else o=!1;if(_o(t,r),null===t.stateNode)Wa(e,t),sa(t,n,i),ca(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,l=n.contextType;"object"===typeof l&&null!==l?l=No(l):l=Nr(t,l=Ir(n)?_r:Or.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||c!==l)&&aa(t,s,i,l),Do=!1;var h=t.memoizedState;s.state=h,Wo(t,i,s,r),c=t.memoizedState,a!==i||h!==c||Rr.current||Do?("function"===typeof u&&(ia(t,n,u,i),c=t.memoizedState),(a=Do||oa(t,n,a,i,h,c,l))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=l,i=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Uo(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:na(t.type,a),s.props=l,d=t.pendingProps,h=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=No(c):c=Nr(t,c=Ir(n)?_r:Or.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==c)&&aa(t,s,i,c),Do=!1,h=t.memoizedState,s.state=h,Wo(t,i,s,r);var f=t.memoizedState;a!==d||h!==f||Rr.current||Do?("function"===typeof p&&(ia(t,n,p,i),f=t.memoizedState),(l=Do||oa(t,n,l,i,h,f,c)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=c,i=l):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Oa(e,t,n,i,o,r)}function Oa(e,t,n,i,r,o){xa(e,t);var s=0!==(128&t.flags);if(!i&&!s)return r&&jr(t,n,!1),Ha(e,t,o);i=t.stateNode,ya.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,a,o)):ka(e,t,a,o),t.memoizedState=i.state,r&&jr(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Ar(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ar(0,t.context,!1),Qo(e,t.containerInfo)}function _a(e,t,n,i,r){return fo(),mo(r),t.flags|=256,ka(e,t,n,i),t.child}var Na,Ia,La,Aa,Ma={dehydrated:null,treeContext:null,retryLane:0};function Da(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var i,r=t.pendingProps,s=es.current,a=!1,c=0!==(128&t.flags);if((i=c)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Er(es,1&s),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=r.children,e=r.fallback,a?(r=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Dl(c,r,0,null),e=Ml(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Da(n),t.memoizedState=Ma,e):Ua(t,c));if(null!==(s=e.memoizedState)&&null!==(i=s.dehydrated))return function(e,t,n,i,r,s,a){if(n)return 256&t.flags?(t.flags&=-257,Fa(e,t,a,i=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=Dl({mode:"visible",children:i.children},r,0,null),(s=Ml(s,r,a,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&wo(t,e.child,null,a),t.child.memoizedState=Da(a),t.memoizedState=Ma,s);if(0===(1&t.mode))return Fa(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var c=i.dgst;return i=c,Fa(e,t,a,i=ua(s=Error(o(419)),i,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(i=Rc)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Mo(e,r),nl(i,e,r,-1))}return ml(),Fa(e,t,a,i=ua(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Pl.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,io=lr(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(Kr[Jr++]=Qr,Kr[Jr++]=Yr,Kr[Jr++]=$r,Qr=e.id,Yr=e.overflow,$r=t),t=Ua(t,i.children),t.flags|=4096,t)}(e,t,c,r,i,s,n);if(a){a=r.fallback,c=t.mode,i=(s=e.child).sibling;var l={mode:"hidden",children:r.children};return 0===(1&c)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ll(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==i?a=Ll(i,a):(a=Ml(a,c,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,c=null===(c=e.child.memoizedState)?Da(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,r}return e=(a=e.child).sibling,r=Ll(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ua(e,t){return(t=Dl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fa(e,t,n,i){return null!==i&&mo(i),wo(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ro(e.return,t,n)}function za(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Va(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(ka(e,t,i.children,n),0!==(2&(i=es.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Er(es,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),za(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ts(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}za(t,!0,n,null,o);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ll(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ll(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ka(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Ir(t.type)&&Lr(),Ga(t),null;case 3:return i=t.stateNode,Yo(),xr(Rr),xr(Or),is(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sl(oo),oo=null))),Ia(e,t),Ga(t),null;case 5:Zo(t);var r=$o(Jo.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return Ga(t),null}if(e=$o(Go.current),ho(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[hr]=t,i[pr]=s,e=0!==(1&t.mode),n){case"dialog":Fi("cancel",i),Fi("close",i);break;case"iframe":case"object":case"embed":Fi("load",i);break;case"video":case"audio":for(r=0;r<Mi.length;r++)Fi(Mi[r],i);break;case"source":Fi("error",i);break;case"img":case"image":case"link":Fi("error",i),Fi("load",i);break;case"details":Fi("toggle",i);break;case"input":Q(i,s),Fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Fi("invalid",i);break;case"textarea":re(i,s),Fi("invalid",i)}for(var c in ye(n,s),r=null,s)if(s.hasOwnProperty(c)){var l=s[c];"children"===c?"string"===typeof l?i.textContent!==l&&(!0!==s.suppressHydrationWarning&&Xi(i.textContent,l,e),r=["children",l]):"number"===typeof l&&i.textContent!==""+l&&(!0!==s.suppressHydrationWarning&&Xi(i.textContent,l,e),r=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Fi("scroll",i)}switch(n){case"input":G(i),Z(i,s,!0);break;case"textarea":G(i),se(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{c=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=c.createElement(n,{is:i.is}):(e=c.createElement(n),"select"===n&&(c=e,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):e=c.createElementNS(e,n),e[hr]=t,e[pr]=i,Na(e,t,!1,!1),t.stateNode=e;e:{switch(c=be(n,i),n){case"dialog":Fi("cancel",e),Fi("close",e),r=i;break;case"iframe":case"object":case"embed":Fi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Mi.length;r++)Fi(Mi[r],e);r=i;break;case"source":Fi("error",e),r=i;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),r=i;break;case"details":Fi("toggle",e),r=i;break;case"input":Q(e,i),r=$(e,i),Fi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=j({},i,{value:void 0}),Fi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Fi("invalid",e)}for(s in ye(n,r),l=r)if(l.hasOwnProperty(s)){var u=l[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Fi("scroll",e):null!=u&&b(e,s,u,c))}switch(n){case"input":G(e),Z(e,i,!1);break;case"textarea":G(e),se(e);break;case"option":null!=i.value&&e.setAttribute("value",""+H(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?ne(e,!!i.multiple,s,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Aa(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(n=$o(Jo.current),$o(Go.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(s=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xi(i.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return Ga(t),null;case 13:if(xr(es),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),s=!1}else null!==oo&&(sl(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Ac&&(Ac=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return Yo(),Ia(e,t),null===e&&Vi(t.stateNode.containerInfo),Ga(t),null;case 10:return Oo(t.type._context),Ga(t),null;case 19:if(xr(es),null===(s=t.memoizedState))return Ga(t),null;if(i=0!==(128&t.flags),null===(c=s.rendering))if(i)qa(s,!1);else{if(0!==Ac||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ts(e))){for(t.flags|=128,qa(s,!1),null!==(i=c.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=14680066,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Er(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>Vc&&(t.flags|=128,i=!0,qa(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ts(c))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!ro)return Ga(t),null}else 2*Ye()-s.renderingStartTime>Vc&&1073741824!==n&&(t.flags|=128,i=!0,qa(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=s.last)?n.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,n=es.current,Er(es,i?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dl(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ic)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ja(e,t){switch(to(t),t.tag){case 1:return Ir(t.type)&&Lr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yo(),xr(Rr),xr(Or),is(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(xr(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xr(es),null;case 4:return Yo(),null;case 10:return Oo(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Na=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ia=function(){},La=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,$o(Go.current);var o,s=null;switch(n){case"input":r=$(e,r),i=$(e,i),s=[];break;case"select":r=j({},r,{value:void 0}),i=j({},i,{value:void 0}),s=[];break;case"textarea":r=ie(e,r),i=ie(e,i),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var c=r[u];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(c=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Fi("scroll",e),s||c===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Aa=function(e,t,n,i){n!==i&&(t.flags|=4)};var $a=!1,Qa=!1,Ya="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Tl(e,t,i)}else n.current=null}function ec(e,t,n){try{n()}catch(i){Tl(e,t,i)}}var tc=!1;function nc(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&ec(t,n,o)}r=r.next}while(r!==i)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[mr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var uc=null,dc=!1;function hc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:Qa||Za(n,t);case 6:var i=uc,r=dc;uc=null,hc(e,t,n),dc=r,null!==(uc=i)&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?cr(e.parentNode,n):1===e.nodeType&&cr(e,n),Vt(e)):cr(uc,n.stateNode));break;case 4:i=uc,r=dc,uc=n.stateNode.containerInfo,dc=!0,hc(e,t,n),uc=i,dc=r;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&ec(n,t,s),r=r.next}while(r!==i)}hc(e,t,n);break;case 1:if(!Qa&&(Za(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Tl(n,t,a)}hc(e,t,n);break;case 21:hc(e,t,n);break;case 22:1&n.mode?(Qa=(i=Qa)||null!==n.memoizedState,hc(e,t,n),Qa=i):hc(e,t,n);break;default:hc(e,t,n)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ya),t.forEach((function(t){var i=Ol.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,dc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===uc)throw Error(o(160));pc(s,a,r),uc=null,dc=!1;var l=r.alternate;null!==l&&(l.return=null),r.return=null}catch(u){Tl(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),vc(e),4&i){try{nc(3,e,e.return),ic(3,e)}catch(g){Tl(e,e.return,g)}try{nc(5,e,e.return)}catch(g){Tl(e,e.return,g)}}break;case 1:mc(t,e),vc(e),512&i&&null!==n&&Za(n,n.return);break;case 5:if(mc(t,e),vc(e),512&i&&null!==n&&Za(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Tl(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===s.type&&null!=s.name&&Y(r,s),be(c,a);var u=be(c,s);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];"style"===d?ge(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):b(r,d,h,u)}switch(c){case"input":X(r,s);break;case"textarea":oe(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(r,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(r,!!s.multiple,s.defaultValue,!0):ne(r,!!s.multiple,s.multiple?[]:"",!1))}r[pr]=s}catch(g){Tl(e,e.return,g)}}break;case 6:if(mc(t,e),vc(e),4&i){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(g){Tl(e,e.return,g)}}break;case 3:if(mc(t,e),vc(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Tl(e,e.return,g)}break;case 4:default:mc(t,e),vc(e);break;case 13:mc(t,e),vc(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(zc=Ye())),4&i&&fc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qa=(u=Qa)||d,mc(t,e),Qa=u):mc(t,e),vc(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(f=(p=Xa).child,p.tag){case 0:case 11:case 14:case 15:nc(4,p,p.return);break;case 1:Za(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tl(i,n,g)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){wc(h);continue}}null!==f?(f.return=p,Xa=f):wc(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(c=h.stateNode,a=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Tl(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Tl(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mc(t,e),vc(e),4&i&&fc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),lc(e,ac(e),r);break;case 3:case 4:var s=i.stateNode.containerInfo;cc(e,ac(e),s);break;default:throw Error(o(161))}}catch(a){Tl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){Xa=e,bc(e,t,n)}function bc(e,t,n){for(var i=0!==(1&e.mode);null!==Xa;){var r=Xa,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||$a;if(!s){var a=r.alternate,c=null!==a&&null!==a.memoizedState||Qa;a=$a;var l=Qa;if($a=s,(Qa=c)&&!l)for(Xa=r;null!==Xa;)c=(s=Xa).child,22===s.tag&&null!==s.memoizedState?Sc(r):null!==c?(c.return=s,Xa=c):Sc(r);for(;null!==o;)Xa=o,bc(o,t,n),o=o.sibling;Xa=r,$a=a,Qa=l}kc(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Xa=o):kc(e)}}function kc(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||ic(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qa)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ho(t,s,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(o(163))}Qa||512&t.flags&&rc(t)}catch(p){Tl(t,t.return,p)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function wc(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Sc(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Tl(t,n,c)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(c){Tl(t,r,c)}}var o=t.return;try{rc(t)}catch(c){Tl(t,o,c)}break;case 5:var s=t.return;try{rc(t)}catch(c){Tl(t,s,c)}}}catch(c){Tl(t,t.return,c)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Cc,Tc=Math.ceil,xc=k.ReactCurrentDispatcher,Ec=k.ReactCurrentOwner,Pc=k.ReactCurrentBatchConfig,Oc=0,Rc=null,_c=null,Nc=0,Ic=0,Lc=Tr(0),Ac=0,Mc=null,Dc=0,jc=0,Uc=0,Fc=null,Bc=null,zc=0,Vc=1/0,Wc=null,Hc=!1,qc=null,Gc=null,Kc=!1,Jc=null,$c=0,Qc=0,Yc=null,Xc=-1,Zc=0;function el(){return 0!==(6&Oc)?Ye():-1!==Xc?Xc:Xc=Ye()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Oc)&&0!==Nc?Nc&-Nc:null!==go.transition?(0===Zc&&(Zc=mt()),Zc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nl(e,t,n,i){if(50<Qc)throw Qc=0,Yc=null,Error(o(185));vt(e,n,i),0!==(2&Oc)&&e===Rc||(e===Rc&&(0===(2&Oc)&&(jc|=n),4===Ac&&al(e,Nc)),il(e,i),1===n&&0===Oc&&0===(1&t.mode)&&(Vc=Ye()+500,Fr&&Vr()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,c=r[s];-1===c?0!==(a&n)&&0===(a&i)||(r[s]=pt(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var i=ht(e,e===Rc?Nc:0);if(0===i)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){Fr=!0,zr(e)}(cl.bind(null,e)):zr(cl.bind(null,e)),sr((function(){0===(6&Oc)&&Vr()})),n=null;else{switch(kt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Rl(n,rl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rl(e,t){if(Xc=-1,Zc=0,0!==(6&Oc))throw Error(o(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var i=ht(e,e===Rc?Nc:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gl(e,i);else{t=i;var r=Oc;Oc|=2;var s=fl();for(Rc===e&&Nc===t||(Wc=null,Vc=Ye()+500,hl(e,t));;)try{yl();break}catch(c){pl(e,c)}Po(),xc.current=s,Oc=r,null!==_c?t=0:(Rc=null,Nc=0,t=Ac)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=ol(e,r))),1===t)throw n=Mc,hl(e,0),al(e,i),il(e,Ye()),n;if(6===t)al(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gl(e,i))&&(0!==(s=ft(e))&&(i=s,t=ol(e,s))),1===t))throw n=Mc,hl(e,0),al(e,i),il(e,Ye()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:wl(e,Bc,Wc);break;case 3:if(al(e,i),(130023424&i)===i&&10<(t=zc+500-Ye())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){el(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(wl.bind(null,e,Bc,Wc),t);break}wl(e,Bc,Wc);break;case 4:if(al(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-st(i);s=1<<a,(a=t[a])>r&&(r=a),i&=~s}if(i=r,10<(i=(120>(i=Ye()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Tc(i/1960))-i)){e.timeoutHandle=ir(wl.bind(null,e,Bc,Wc),i);break}wl(e,Bc,Wc);break;default:throw Error(o(329))}}}return il(e,Ye()),e.callbackNode===n?rl.bind(null,e):null}function ol(e,t){var n=Fc;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=Bc,Bc=n,null!==t&&sl(t)),e}function sl(e){null===Bc?Bc=e:Bc.push.apply(Bc,e)}function al(e,t){for(t&=~Uc,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),i=1<<n;e[n]=-1,t&=~i}}function cl(e){if(0!==(6&Oc))throw Error(o(327));Sl();var t=ht(e,0);if(0===(1&t))return il(e,Ye()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=ol(e,i))}if(1===n)throw n=Mc,hl(e,0),al(e,t),il(e,Ye()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,Bc,Wc),il(e,Ye()),null}function ll(e,t){var n=Oc;Oc|=1;try{return e(t)}finally{0===(Oc=n)&&(Vc=Ye()+500,Fr&&Vr())}}function ul(e){null!==Jc&&0===Jc.tag&&0===(6&Oc)&&Sl();var t=Oc;Oc|=1;var n=Pc.transition,i=bt;try{if(Pc.transition=null,bt=1,e)return e()}finally{bt=i,Pc.transition=n,0===(6&(Oc=t))&&Vr()}}function dl(){Ic=Lc.current,xr(Lc)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==_c)for(n=_c.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Lr();break;case 3:Yo(),xr(Rr),xr(Or),is();break;case 5:Zo(i);break;case 4:Yo();break;case 13:case 19:xr(es);break;case 10:Oo(i.type._context);break;case 22:case 23:dl()}n=n.return}if(Rc=e,_c=e=Ll(e.current,null),Nc=Ic=t,Ac=0,Mc=null,Uc=jc=Dc=0,Bc=Fc=null,null!==Io){for(t=0;t<Io.length;t++)if(null!==(i=(n=Io[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}Io=null}return e}function pl(e,t){for(;;){var n=_c;try{if(Po(),rs.current=Xs,us){for(var i=as.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}us=!1}if(ss=0,ls=cs=as=null,ds=!1,hs=0,Ec.current=null,null===n||null===n.return){Ac=1,Mc=t,_c=null;break}e:{var s=e,a=n.return,c=n,l=t;if(t=Nc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,d=c,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,va(f,a,c,0,t),1&f.mode&&ma(s,u,t),l=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ma(s,u,t),ml();break e}l=Error(o(426))}else if(ro&&1&c.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,c,0,t),mo(la(l,c));break e}}s=l=la(l,c),4!==Ac&&(Ac=2),null===Fc?Fc=[s]:Fc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Vo(s,pa(0,l,t));break e;case 1:c=l;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gc||!Gc.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Vo(s,fa(s,c,t));break e}}s=s.return}while(null!==s)}kl(n)}catch(k){t=k,_c===n&&null!==n&&(_c=n=n.return);continue}break}}function fl(){var e=xc.current;return xc.current=Xs,null===e?Xs:e}function ml(){0!==Ac&&3!==Ac&&2!==Ac||(Ac=4),null===Rc||0===(268435455&Dc)&&0===(268435455&jc)||al(Rc,Nc)}function gl(e,t){var n=Oc;Oc|=2;var i=fl();for(Rc===e&&Nc===t||(Wc=null,hl(e,t));;)try{vl();break}catch(r){pl(e,r)}if(Po(),Oc=n,xc.current=i,null!==_c)throw Error(o(261));return Rc=null,Nc=0,Ac}function vl(){for(;null!==_c;)bl(_c)}function yl(){for(;null!==_c&&!$e();)bl(_c)}function bl(e){var t=Cc(e.alternate,e,Ic);e.memoizedProps=e.pendingProps,null===t?kl(e):_c=t,Ec.current=null}function kl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Ic)))return void(_c=n)}else{if(null!==(n=Ja(n,t)))return n.flags&=32767,void(_c=n);if(null===e)return Ac=6,void(_c=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(_c=t);_c=t=e}while(null!==t);0===Ac&&(Ac=5)}function wl(e,t,n){var i=bt,r=Pc.transition;try{Pc.transition=null,bt=1,function(e,t,n,i){do{Sl()}while(null!==Jc);if(0!==(6&Oc))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-st(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,s),e===Rc&&(_c=Rc=null,Nc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kc||(Kc=!0,Rl(tt,(function(){return Sl(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Pc.transition,Pc.transition=null;var a=bt;bt=1;var c=Oc;Oc|=4,Ec.current=null,function(e,t){if(er=Ht,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var a=0,c=-1,l=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(c=a+r),h!==s||0!==i&&3!==h.nodeType||(l=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===r&&(c=a),p===s&&++d===i&&(l=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(o(163))}}catch(w){Tl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tc,tc=!1}(e,n),gc(n,e),fi(tr),Ht=!!er,tr=er=null,e.current=n,yc(n,e,r),Qe(),Oc=c,bt=a,Pc.transition=s}else e.current=n;if(Kc&&(Kc=!1,Jc=e,$c=r),s=e.pendingLanes,0===s&&(Gc=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Ye()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Hc)throw Hc=!1,e=qc,qc=null,e;0!==(1&$c)&&0!==e.tag&&Sl(),s=e.pendingLanes,0!==(1&s)?e===Yc?Qc++:(Qc=0,Yc=e):Qc=0,Vr()}(e,t,n,i)}finally{Pc.transition=r,bt=i}return null}function Sl(){if(null!==Jc){var e=kt($c),t=Pc.transition,n=bt;try{if(Pc.transition=null,bt=16>e?16:e,null===Jc)var i=!1;else{if(e=Jc,Jc=null,$c=0,0!==(6&Oc))throw Error(o(331));var r=Oc;for(Oc|=4,Xa=e.current;null!==Xa;){var s=Xa,a=s.child;if(0!==(16&Xa.flags)){var c=s.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Xa=u;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:nc(8,d,s)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var p=(d=Xa).sibling,f=d.return;if(oc(d),d===u){Xa=null;break}if(null!==p){p.return=f,Xa=p;break}Xa=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(s=Xa).flags))switch(s.tag){case 0:case 11:case 15:nc(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Xa=y;break e}Xa=s.return}}var b=e.current;for(Xa=b;null!==Xa;){var k=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==k)k.return=a,Xa=k;else e:for(a=b;null!==Xa;){if(0!==(2048&(c=Xa).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(S){Tl(c,c.return,S)}if(c===a){Xa=null;break e}var w=c.sibling;if(null!==w){w.return=c.return,Xa=w;break e}Xa=c.return}}if(Oc=r,Vr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(S){}i=!0}return i}finally{bt=n,Pc.transition=t}}return!1}function Cl(e,t,n){e=Bo(e,t=pa(0,t=la(n,t),1),1),t=el(),null!==e&&(vt(e,1,t),il(e,t))}function Tl(e,t,n){if(3===e.tag)Cl(e,e,n);else for(;null!==t;){if(3===t.tag){Cl(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Gc||!Gc.has(i))){t=Bo(t,e=fa(t,e=la(n,e),1),1),e=el(),null!==t&&(vt(t,1,e),il(t,e));break}}t=t.return}}function xl(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Rc===e&&(Nc&n)===n&&(4===Ac||3===Ac&&(130023424&Nc)===Nc&&500>Ye()-zc?hl(e,0):Uc|=n),il(e,t)}function El(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=el();null!==(e=Mo(e,t))&&(vt(e,t,n),il(e,n))}function Pl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),El(e,n)}function Ol(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),El(e,n)}function Rl(e,t){return Ke(e,t)}function _l(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nl(e,t,n,i){return new _l(e,t,n,i)}function Il(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ll(e,t){var n=e.alternate;return null===n?((n=Nl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Al(e,t,n,i,r,s){var a=2;if(i=e,"function"===typeof e)Il(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case C:return Ml(n.children,r,s,t);case T:a=8,r|=8;break;case x:return(e=Nl(12,n,t,2|r)).elementType=x,e.lanes=s,e;case R:return(e=Nl(13,n,t,r)).elementType=R,e.lanes=s,e;case _:return(e=Nl(19,n,t,r)).elementType=_,e.lanes=s,e;case L:return Dl(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case P:a=9;break e;case O:a=11;break e;case N:a=14;break e;case I:a=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Nl(a,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Ml(e,t,n,i){return(e=Nl(7,e,i,t)).lanes=n,e}function Dl(e,t,n,i){return(e=Nl(22,e,i,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function jl(e,t,n){return(e=Nl(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=Nl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fl(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bl(e,t,n,i,r,o,s,a,c){return e=new Fl(e,t,n,a,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Nl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jo(o),e}function zl(e){if(!e)return Pr;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ir(n))return Mr(e,n,t)}return t}function Vl(e,t,n,i,r,o,s,a,c){return(e=Bl(n,i,!0,e,0,o,0,a,c)).context=zl(null),n=e.current,(o=Fo(i=el(),r=tl(n))).callback=void 0!==t&&null!==t?t:null,Bo(n,o,r),e.current.lanes=r,vt(e,r,i),il(e,i),e}function Wl(e,t,n,i){var r=t.current,o=el(),s=tl(r);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fo(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Bo(r,t,s))&&(nl(e,r,s,o),zo(e,r,s)),s}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gl(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}Cc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Rr.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),fo();break;case 5:Xo(t);break;case 1:Ir(t.type)&&Dr(t);break;case 4:Qo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Er(Co,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Er(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(Er(es,1&es.current),null!==(e=Ha(e,t,n))?e.sibling:null);Er(es,1&es.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Va(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(es,es.current),i)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,ro&&0!==(1048576&t.flags)&&Zr(t,Gr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wa(e,t),e=t.pendingProps;var r=Nr(t,Or.current);_o(t,n),r=gs(null,t,i,e,r,n);var s=vs();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ir(i)?(s=!0,Dr(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,jo(t),r.updater=ra,t.stateNode=r,r._reactInternals=t,ca(t,i,e,n),t=Oa(null,t,i,!0,s,n)):(t.tag=0,ro&&s&&eo(t),ka(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Il(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===O)return 11;if(e===N)return 14}return 2}(i),e=na(i,e),r){case 0:t=Ea(null,t,i,e,n);break e;case 1:t=Pa(null,t,i,e,n);break e;case 11:t=wa(null,t,i,e,n);break e;case 14:t=Sa(null,t,i,na(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ea(e,t,i,r=t.elementType===i?r:na(i,r),n);case 1:return i=t.type,r=t.pendingProps,Pa(e,t,i,r=t.elementType===i?r:na(i,r),n);case 3:e:{if(Ra(t),null===e)throw Error(o(387));i=t.pendingProps,r=(s=t.memoizedState).element,Uo(e,t),Wo(t,i,null,n);var a=t.memoizedState;if(i=a.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=_a(e,t,i,n,r=la(Error(o(423)),t));break e}if(i!==r){t=_a(e,t,i,n,r=la(Error(o(424)),t));break e}for(io=lr(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=So(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),i===r){t=Ha(e,t,n);break e}ka(e,t,i,n)}t=t.child}return t;case 5:return Xo(t),null===e&&lo(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==s&&nr(i,s)&&(t.flags|=32),xa(e,t),ka(e,t,a,n),t.child;case 6:return null===e&&lo(t),null;case 13:return ja(e,t,n);case 4:return Qo(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=wo(t,null,i,n):ka(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,wa(e,t,i,r=t.elementType===i?r:na(i,r),n);case 7:return ka(e,t,t.pendingProps,n),t.child;case 8:case 12:return ka(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,Er(Co,i._currentValue),i._currentValue=a,null!==s)if(ai(s.value,a)){if(s.children===r.children&&!Rr.current){t=Ha(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){a=s.child;for(var l=c.firstContext;null!==l;){if(l.context===i){if(1===s.tag){(l=Fo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ro(s.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ro(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}ka(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,_o(t,n),i=i(r=No(r)),t.flags|=1,ka(e,t,i,n),t.child;case 14:return r=na(i=t.type,t.pendingProps),Sa(e,t,i,r=na(i.type,r),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:na(i,r),Wa(e,t),t.tag=1,Ir(i)?(e=!0,Dr(t)):e=!1,_o(t,n),sa(t,i,r),ca(t,i,r,n),Oa(null,t,i,!0,e,n);case 19:return Va(e,t,n);case 22:return Ta(e,t,n)}throw Error(o(156,t.tag))};var Kl="function"===typeof reportError?reportError:function(e){console.error(e)};function Jl(e){this._internalRoot=e}function $l(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xl(){}function Zl(e,t,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof r){var a=r;r=function(){var e=Hl(s);a.call(e)}}Wl(t,s,e,r)}else s=function(e,t,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var e=Hl(s);o.call(e)}}var s=Vl(t,i,e,0,null,!1,0,"",Xl);return e._reactRootContainer=s,e[fr]=s.current,Vi(8===e.nodeType?e.parentNode:e),ul(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Hl(c);a.call(e)}}var c=Bl(e,0,!1,null,0,!1,0,"",Xl);return e._reactRootContainer=c,e[fr]=c.current,Vi(8===e.nodeType?e.parentNode:e),ul((function(){Wl(t,c,n,i)})),c}(n,t,e,r,i);return Hl(s)}$l.prototype.render=Jl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wl(e,t,null,null)},$l.prototype.unmount=Jl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){Wl(null,e,null,null)})),t[fr]=null}},$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),il(t,Ye()),0===(6&Oc)&&(Vc=Ye()+500,Vr()))}break;case 13:ul((function(){var t=Mo(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Gl(e,1)}},St=function(e){if(13===e.tag){var t=Mo(e,134217728);if(null!==t)nl(t,e,134217728,el());Gl(e,134217728)}},Ct=function(e){if(13===e.tag){var t=tl(e),n=Mo(e,t);if(null!==n)nl(n,e,t,el());Gl(e,t)}},Tt=function(){return bt},xt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=wr(i);if(!r)throw Error(o(90));K(i),X(i,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Oe=ll,Re=ul;var eu={usingClientEntryPoint:!1,Events:[br,kr,wr,Ee,Pe,ll]},tu={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(o(299));var n=!1,i="",r=Kl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Bl(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Vi(8===e.nodeType?e.parentNode:e),new Jl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!Yl(t))throw Error(o(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",a=Kl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Vl(t,null,e,1,null!=n?n:null,r,0,s,a),e[fr]=t.current,Vi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new $l(t)},t.render=function(e,t,n){if(!Yl(t))throw Error(o(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yl(e))throw Error(o(40));return!!e._reactRootContainer&&(ul((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Yl(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zl(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},2828:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},3001:(e,t,n)=>{"use strict";var i=n(7800),r=n(2203),o=n(5231),s=n(5703),a=n(9162),c=n(2202);i({target:"Date",proto:!0,forced:n(8445)((function(){return null!==new Date(NaN).toJSON()||1!==r(Date.prototype.toJSON,{toISOString:function(){return 1}})}))},{toJSON:function(e){var t=o(this),n=s(t,"number");return"number"!=typeof n||isFinite(n)?"toISOString"in t||"Date"!==c(t)?t.toISOString():r(a,t):null}})},3005:(e,t,n)=>{"use strict";var i=n(5313),r=n(4071),o=n(6249),s=n(607).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});r(t,e)||s(t,e,{value:o.f(e)})}},3212:(e,t,n)=>{"use strict";var i=n(4607);e.exports=i},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3220:(e,t,n)=>{"use strict";var i=n(607);e.exports=function(e,t,n){return i.f(e,t,n)}},3239:(e,t,n)=>{"use strict";var i=n(1566),r=n(8366),o=n(8365),s=n(5231),a=n(5612),c=n(7403),l=r([].push),u=function(e){var t=1===e,n=2===e,r=3===e,u=4===e,d=6===e,h=7===e,p=5===e||d;return function(f,m,g,v){for(var y,b,k=s(f),w=o(k),S=a(w),C=i(m,g),T=0,x=v||c,E=t?x(f,S):n||h?x(f,0):void 0;S>T;T++)if((p||T in w)&&(b=C(y=w[T],T,k),e))if(t)E[T]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return T;case 2:l(E,y)}else switch(e){case 4:return!1;case 7:l(E,y)}return d?-1:r||u?u:E}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},3254:(e,t,n)=>{"use strict";var i=n(4702),r=n(8445),o=n(8366),s=n(8777),a=n(7108).trim,c=n(6962),l=o("".charAt),u=i.parseFloat,d=i.Symbol,h=d&&d.iterator,p=1/u(c+"-0")!==-1/0||h&&!r((function(){u(Object(h))}));e.exports=p?function(e){var t=a(s(e)),n=u(t);return 0===n&&"-"===l(t,0)?-0:n}:u},3266:(e,t,n)=>{"use strict";var i=n(1187),r=n(6381),o=TypeError;e.exports=function(e){if(i(e))return e;throw new o(r(e)+" is not a constructor")}},3273:(e,t,n)=>{"use strict";var i=n(4702).navigator,r=i&&i.userAgent;e.exports=r?String(r):""},3559:(e,t,n)=>{"use strict";var i=n(7800),r=n(3570),o=n(607).f;i({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!r},{defineProperty:o})},3570:(e,t,n)=>{"use strict";var i=n(8445);e.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},3595:(e,t,n)=>{"use strict";var i=n(5334),r=n(1187),o=n(5900),s=n(4205)("species"),a=Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,(r(t)&&(t===a||i(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?a:t}},3684:(e,t,n)=>{"use strict";var i=n(2203),r=n(5749),o=n(4205),s=n(5718);e.exports=function(){var e=r("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,a=o("toPrimitive");t&&!t[a]&&s(t,a,(function(e){return i(n,this)}),{arity:1})}},3719:(e,t,n)=>{"use strict";n(3559);var i=n(5313).Object,r=e.exports=function(e,t,n){return i.defineProperty(e,t,n)};i.defineProperty.sham&&(r.sham=!0)},3734:(e,t,n)=>{"use strict";var i=n(9482),r=n(2721);e.exports=Object.keys||function(e){return i(e,r)}},3816:(e,t,n)=>{"use strict";var i=n(4702),r=n(9607),o=i.WeakMap;e.exports=r(o)&&/native code/.test(String(o))},4044:(e,t,n)=>{!function(e){"use strict";var t=e.Pos;function n(e,t){return e.line-t.line||e.ch-t.ch}var i="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=new RegExp("<(/?)(["+i+"]["+i+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function o(e,t,n,i){this.line=t,this.ch=n,this.cm=e,this.text=e.getLine(t),this.min=i?Math.max(i.from,e.firstLine()):e.firstLine(),this.max=i?Math.min(i.to-1,e.lastLine()):e.lastLine()}function s(e,n){var i=e.cm.getTokenTypeAt(t(e.line,n));return i&&/\btag\b/.test(i)}function a(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function c(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function l(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(a(e))continue;return}if(s(e,t+1)){var n=e.text.lastIndexOf("/",t),i=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,i?"selfClose":"regular"}e.ch=t+1}}function u(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(c(e))continue;return}if(s(e,t+1)){r.lastIndex=t,e.ch=t;var n=r.exec(e.text);if(n&&n.index==t)return n}else e.ch=t}}function d(e){for(;;){r.lastIndex=e.ch;var t=r.exec(e.text);if(!t){if(a(e))continue;return}if(s(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}function h(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(c(e))continue;return}if(s(e,t+1)){var n=e.text.lastIndexOf("/",t),i=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,i?"selfClose":"regular"}e.ch=t}}function p(e,n){for(var i=[];;){var r,o=d(e),s=e.line,a=e.ch-(o?o[0].length:0);if(!o||!(r=l(e)))return;if("selfClose"!=r)if(o[1]){for(var c=i.length-1;c>=0;--c)if(i[c]==o[2]){i.length=c;break}if(c<0&&(!n||n==o[2]))return{tag:o[2],from:t(s,a),to:t(e.line,e.ch)}}else i.push(o[2])}}function f(e,n){for(var i=[];;){var r=h(e);if(!r)return;if("selfClose"!=r){var o=e.line,s=e.ch,a=u(e);if(!a)return;if(a[1])i.push(a[2]);else{for(var c=i.length-1;c>=0;--c)if(i[c]==a[2]){i.length=c;break}if(c<0&&(!n||n==a[2]))return{tag:a[2],from:t(e.line,e.ch),to:t(o,s)}}}else u(e)}}e.registerHelper("fold","xml",(function(e,i){for(var r=new o(e,i.line,0);;){var s=d(r);if(!s||r.line!=i.line)return;var a=l(r);if(!a)return;if(!s[1]&&"selfClose"!=a){var c=t(r.line,r.ch),u=p(r,s[2]);return u&&n(u.from,c)>0?{from:c,to:u.from}:null}}})),e.findMatchingTag=function(e,i,r){var s=new o(e,i.line,i.ch,r);if(-1!=s.text.indexOf(">")||-1!=s.text.indexOf("<")){var a=l(s),c=a&&t(s.line,s.ch),d=a&&u(s);if(a&&d&&!(n(s,i)>0)){var h={from:t(s.line,s.ch),to:c,tag:d[2]};return"selfClose"==a?{open:h,close:null,at:"open"}:d[1]?{open:f(s,d[2]),close:h,at:"close"}:{open:h,close:p(s=new o(e,c.line,c.ch,r),d[2]),at:"open"}}}},e.findEnclosingTag=function(e,t,n,i){for(var r=new o(e,t.line,t.ch,n);;){var s=f(r,i);if(!s)break;var a=p(new o(e,t.line,t.ch,n),s.tag);if(a)return{open:s,close:a}}},e.scanForClosingTag=function(e,t,n,i){return p(new o(e,t.line,t.ch,i?{from:0,to:i}:null),n)}}(n(6246))},4071:(e,t,n)=>{"use strict";var i=n(8366),r=n(5231),o=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(r(e),t)}},4078:(e,t,n)=>{"use strict";var i=n(1363),r=n(1786),o=Array.prototype;e.exports=function(e){var t=e.concat;return e===o||i(o,e)&&t===o.concat?r:t}},4110:(e,t,n)=>{"use strict";var i=n(7800),r=n(5231),o=n(3734);i({target:"Object",stat:!0,forced:n(8445)((function(){o(1)}))},{keys:function(e){return o(r(e))}})},4136:(e,t,n)=>{"use strict";var i=n(2202),r=n(7555),o=n(6434).f,s=n(78),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"===i(e)?function(e){try{return o(e)}catch(t){return s(a)}}(e):o(r(e))}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var k=b.prototype=new y;k.constructor=b,m(k,v.prototype),k.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,C={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,i){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&!T.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=i;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:C.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function O(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,r,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case i:c=!0}}if(c)return s=s(c=e),e=""===o?"."+O(c,0):o,w(s)?(r="",null!=e&&(r=e.replace(P,"$&/")+"/"),R(s,t,r,"",(function(e){return e}))):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(P,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",w(e))for(var l=0;l<e.length;l++){var u=o+O(a=e[l],l);c+=R(a,t,r,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=R(a=a.value,t,r,u=o+O(a,l++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function _(e,t,n){if(null==e)return e;var i=[],r=0;return R(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},L={transition:null},A={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:L,ReactCurrentOwner:C};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:_,forEach:function(e,t,n){_(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return _(e,(function(){t++})),t},toArray:function(e){return _(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=M,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=C.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)S.call(t,l)&&!T.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}return{$$typeof:n,type:e.type,key:o,ref:s,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},4205:(e,t,n)=>{"use strict";var i=n(4702),r=n(9203),o=n(4071),s=n(6094),a=n(6521),c=n(4482),l=i.Symbol,u=r("wks"),d=c?l.for||l:l&&l.withoutSetter||s;e.exports=function(e){return o(u,e)||(u[e]=a&&o(l,e)?l[e]:d("Symbol."+e)),u[e]}},4232:(e,t,n)=>{"use strict";var i=n(4508),r=n(5231),o=n(8365),s=n(5612),a=TypeError,c="Reduce of empty array with no initial value",l=function(e){return function(t,n,l,u){var d=r(t),h=o(d),p=s(d);if(i(n),0===p&&l<2)throw new a(c);var f=e?p-1:0,m=e?-1:1;if(l<2)for(;;){if(f in h){u=h[f],f+=m;break}if(f+=m,e?f<0:p<=f)throw new a(c)}for(;e?f>=0:p>f;f+=m)f in h&&(u=n(u,h[f],f,d));return u}};e.exports={left:l(!1),right:l(!0)}},4246:(e,t,n)=>{"use strict";var i=n(1821);e.exports=i},4300:(e,t,n)=>{"use strict";var i=n(6779),r=TypeError;e.exports=function(e){if(i(e))throw new r("Can't call method on "+e);return e}},4391:(e,t,n)=>{"use strict";var i=n(7950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},4402:(e,t,n)=>{"use strict";var i=n(3719);e.exports=i},4403:(e,t,n)=>{"use strict";var i=n(8366),r=n(5334),o=n(9607),s=n(2202),a=n(8777),c=i([].push);e.exports=function(e){if(o(e))return e;if(r(e)){for(var t=e.length,n=[],i=0;i<t;i++){var l=e[i];"string"==typeof l?c(n,l):"number"!=typeof l&&"Number"!==s(l)&&"String"!==s(l)||c(n,a(l))}var u=n.length,d=!0;return function(e,t){if(d)return d=!1,t;if(r(this))return t;for(var i=0;i<u;i++)if(n[i]===e)return t}}}},4423:(e,t,n)=>{"use strict";var i=n(8512);e.exports=i},4482:(e,t,n)=>{"use strict";var i=n(6521);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},4508:(e,t,n)=>{"use strict";var i=n(9607),r=n(6381),o=TypeError;e.exports=function(e){if(i(e))return e;throw new o(r(e)+" is not a function")}},4582:(e,t,n)=>{"use strict";var i=n(8445),r=n(9607),o=/#|\.prototype\./,s=function(e,t){var n=c[a(e)];return n===u||n!==l&&(r(t)?i(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},4606:(e,t,n)=>{"use strict";var i={};i[n(4205)("toStringTag")]="z",e.exports="[object z]"===String(i)},4607:(e,t,n)=>{"use strict";n(8237);var i=n(5313);e.exports=i.Object.getOwnPropertySymbols},4662:(e,t,n)=>{"use strict";var i,r=n(6929),o=n(1731),s=n(2721),a=n(6663),c=n(9855),l=n(1925),u=n(6045),d="prototype",h="script",p=u("IE_PROTO"),f=function(){},m=function(e){return"<"+h+">"+e+"</"+h+">"},g=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}v="undefined"!=typeof document?document.domain&&i?g(i):function(){var e,t=l("iframe"),n="java"+h+":";return t.style.display="none",c.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F}():g(i);for(var e=s.length;e--;)delete v[d][s[e]];return v()};a[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f[d]=r(e),n=new f,f[d]=null,n[p]=e):n=v(),void 0===t?n:o.f(n,t)}},4702:function(e,t,n){"use strict";var i=function(e){return e&&e.Math===Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4721:(e,t,n)=>{"use strict";var i=n(819);e.exports=function(e){var t=+e;return t!==t||0===t?0:i(t)}},4762:(e,t,n)=>{"use strict";var i=n(7800),r=n(4232).left,o=n(844),s=n(5145);i({target:"Array",proto:!0,forced:!n(7795)&&s>79&&s<83||!o("reduce")},{reduce:function(e){var t=arguments.length;return r(this,e,t,t>1?arguments[1]:void 0)}})},4774:(e,t,n)=>{"use strict";var i=n(2202),r=n(8366);e.exports=function(e){if("Function"===i(e))return r(e)}},4794:(e,t,n)=>{"use strict";var i=n(3570),r=n(607),o=n(2582);e.exports=function(e,t,n){i?r.f(e,t,o(0,n)):e[t]=n}},4823:(e,t,n)=>{"use strict";var i=n(6188);e.exports=i},4956:(e,t,n)=>{"use strict";var i=n(1363),r=n(6016),o=Array.prototype;e.exports=function(e){var t=e.reduce;return e===o||i(o,e)&&t===o.reduce?r:t}},5016:e=>{!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,i=0;n<e.length;n++,i+=8)t[i>>>5]|=e[n]<<24-i%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],i=0;i<e.length;i+=3)for(var r=e[i]<<16|e[i+1]<<8|e[i+2],o=0;o<4;o++)8*i+6*o<=8*e.length?n.push(t.charAt(r>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],i=0,r=0;i<e.length;r=++i%4)0!=r&&n.push((t.indexOf(e.charAt(i-1))&Math.pow(2,-2*r+8)-1)<<2*r|t.indexOf(e.charAt(i))>>>6-2*r);return n}};e.exports=n}()},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5099:(e,t,n)=>{"use strict";var i=n(5703),r=n(307);e.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}},5145:(e,t,n)=>{"use strict";var i,r,o=n(4702),s=n(3273),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(r=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=+i[1]),e.exports=r},5173:(e,t,n)=>{e.exports=n(1497)()},5223:e=>{e.exports={JOIN:"join",JOINED:"joined",DISCONNECTED:"disconnected",CODE_CHANGE:"code-change",SYNC_CODE:"sync-code",LEAVE:"leave",INPUT_CHANGE:"input-change",OUTPUT_CHANGE:"output-change",LANGUAGE_CHANGE:"language-change",STATE_CHANGE:"state-change",CODE_RUN:"code-run"}},5231:(e,t,n)=>{"use strict";var i=n(4300),r=Object;e.exports=function(e){return r(i(e))}},5243:(e,t,n)=>{"use strict";var i=n(7800),r=n(3570),o=n(1731).f;i({target:"Object",stat:!0,forced:Object.defineProperties!==o,sham:!r},{defineProperties:o})},5313:e=>{"use strict";e.exports={}},5334:(e,t,n)=>{"use strict";var i=n(2202);e.exports=Array.isArray||function(e){return"Array"===i(e)}},5461:(e,t,n)=>{"use strict";var i=n(7800),r=n(8445),o=n(7555),s=n(7965).f,a=n(3570);i({target:"Object",stat:!0,forced:!a||r((function(){s(1)})),sham:!a},{getOwnPropertyDescriptor:function(e,t){return s(o(e),t)}})},5480:(e,t,n)=>{"use strict";var i=n(4508),r=n(6779);e.exports=function(e,t){var n=e[t];return r(n)?void 0:i(n)}},5510:(e,t,n)=>{"use strict";n(8436);var i=n(8118);e.exports=i("Array","slice")},5534:(e,t,n)=>{"use strict";n(4110);var i=n(5313);e.exports=i.Object.keys},5569:(e,t,n)=>{"use strict";var i=n(2587);e.exports=i},5612:(e,t,n)=>{"use strict";var i=n(1416);e.exports=function(e){return i(e.length)}},5703:(e,t,n)=>{"use strict";var i=n(2203),r=n(5900),o=n(307),s=n(5480),a=n(6152),c=n(4205),l=TypeError,u=c("toPrimitive");e.exports=function(e,t){if(!r(e)||o(e))return e;var n,c=s(e,u);if(c){if(void 0===t&&(t="default"),n=i(c,e,t),!r(n)||o(n))return n;throw new l("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},5718:(e,t,n)=>{"use strict";var i=n(9825);e.exports=function(e,t,n,r){return r&&r.enumerable?e[t]=n:i(e,t,n),e}},5749:(e,t,n)=>{"use strict";var i=n(5313),r=n(4702),o=n(9607),s=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(i[e])||s(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}},5837:e=>{function t(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},5900:(e,t,n)=>{"use strict";var i=n(9607);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},5916:(e,t,n)=>{"use strict";var i=n(7800),r=n(5749),o=n(375),s=n(2203),a=n(8366),c=n(8445),l=n(9607),u=n(307),d=n(78),h=n(4403),p=n(6521),f=String,m=r("JSON","stringify"),g=a(/./.exec),v=a("".charAt),y=a("".charCodeAt),b=a("".replace),k=a(1.1.toString),w=/[\uD800-\uDFFF]/g,S=/^[\uD800-\uDBFF]$/,C=/^[\uDC00-\uDFFF]$/,T=!p||c((function(){var e=r("Symbol")("stringify detection");return"[null]"!==m([e])||"{}"!==m({a:e})||"{}"!==m(Object(e))})),x=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),E=function(e,t){var n=d(arguments),i=h(t);if(l(i)||void 0!==e&&!u(e))return n[1]=function(e,t){if(l(i)&&(t=s(i,this,f(e),t)),!u(t))return t},o(m,null,n)},P=function(e,t,n){var i=v(n,t-1),r=v(n,t+1);return g(S,e)&&!g(C,r)||g(C,e)&&!g(S,i)?"\\u"+k(y(e,0),16):e};m&&i({target:"JSON",stat:!0,arity:3,forced:T||x},{stringify:function(e,t,n){var i=d(arguments),r=o(T?E:m,null,i);return x&&"string"==typeof r?b(r,w,P):r}})},6016:(e,t,n)=>{"use strict";n(4762);var i=n(8118);e.exports=i("Array","reduce")},6045:(e,t,n)=>{"use strict";var i=n(9203),r=n(6094),o=i("keys");e.exports=function(e){return o[e]||(o[e]=r(e))}},6094:(e,t,n)=>{"use strict";var i=n(8366),r=0,o=Math.random(),s=i(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++r+o,36)}},6152:(e,t,n)=>{"use strict";var i=n(2203),r=n(9607),o=n(5900),s=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&r(n=e.toString)&&!o(a=i(n,e)))return a;if(r(n=e.valueOf)&&!o(a=i(n,e)))return a;if("string"!==t&&r(n=e.toString)&&!o(a=i(n,e)))return a;throw new s("Can't convert object to primitive value")}},6162:(e,t,n)=>{"use strict";var i=n(7800),r=n(3239).filter;i({target:"Array",proto:!0,forced:!n(1903)("filter")},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},6188:(e,t,n)=>{"use strict";var i=n(1363),r=n(1760),o=Array.prototype;e.exports=function(e){var t=e.filter;return e===o||i(o,e)&&t===o.filter?r:t}},6208:(e,t,n)=>{"use strict";n(3001),n(5916);var i=n(5313),r=n(375);i.JSON||(i.JSON={stringify:JSON.stringify}),e.exports=function(e,t,n){return r(i.JSON.stringify,null,arguments)}},6246:function(e){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),s=i||r||o,a=s&&(i?document.documentMode||6:+(o||r)[1]),c=!o&&/WebKit\//.test(e),l=c&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\/(\d+)/.exec(e),d=u&&+u[1],h=/Opera\//.test(e),p=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),m=/PhantomJS/.test(e),g=p&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),v=/Android/.test(e),y=g||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=g||/Mac/.test(t),k=/\bCrOS\b/.test(e),w=/win/i.test(t),S=h&&e.match(/Version\/(\d*\.\d*)/);S&&(S=Number(S[1])),S&&S>=15&&(h=!1,c=!0);var C=b&&(l||h&&(null==S||S<12.11)),T=n||s&&a>=9;function x(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var E,P=function(e,t){var n=e.className,i=x(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function O(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function R(e,t){return O(e).appendChild(t)}function _(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function N(e,t,n,i){var r=_(e,t,n,i);return r.setAttribute("role","presentation"),r}function I(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function L(e){var t,n=e.ownerDocument||e;try{t=e.activeElement}catch(i){t=n.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function A(e,t){var n=e.className;x(t).test(n)||(e.className+=(n?" ":"")+t)}function M(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!x(n[i]).test(t)&&(t+=" "+n[i]);return t}E=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(r){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var D=function(e){e.select()};function j(e){return e.display.wrapper.ownerDocument}function U(e){return F(e.display.wrapper)}function F(e){return e.getRootNode?e.getRootNode():e.ownerDocument}function B(e){return j(e).defaultView}function z(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function V(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function W(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=i||0,s=r||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=n-s%n,o=a+1}}g?D=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(D=function(e){try{e.select()}catch(t){}});var H=function(){this.id=null,this.f=null,this.time=0,this.handler=z(this.onTimeout,this)};function q(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}H.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},H.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var G=50,K={toString:function(){return"CodeMirror.Pass"}},J={scroll:!1},$={origin:"*mouse"},Q={origin:"+move"};function Y(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var s=o-i;if(o==e.length||r+s>=t)return i+Math.min(s,t-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=t)return i}}var X=[""];function Z(e){for(;X.length<=e;)X.push(ee(X)+" ");return X[e]}function ee(e){return e[e.length-1]}function te(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function ne(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}function ie(){}function re(e,t){var n;return Object.create?n=Object.create(e):(ie.prototype=e,n=new ie),t&&V(t,n),n}var oe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function se(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||oe.test(e))}function ae(e,t){return t?!!(t.source.indexOf("\\w")>-1&&se(e))||t.test(e):se(e)}function ce(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var le=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ue(e){return e.charCodeAt(0)>=768&&le.test(e)}function de(e,t,n){for(;(n<0?t>0:t<e.length)&&ue(e.charAt(t));)t+=n;return t}function he(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+i}}function pe(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),r=!0)}r||i(t,n,"ltr")}var fe=null;function me(e,t,n){var i;fe=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==n?i=r:fe=r),o.from==t&&(o.from!=o.to&&"before"!=n?i=r:fe=r)}return null!=i?i:fe}var ge=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?t.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,a=/[1n]/;function c(e,t,n){this.level=e,this.from=t,this.to=n}return function(e,t){var l="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!i.test(e))return!1;for(var u=e.length,d=[],h=0;h<u;++h)d.push(n(e.charCodeAt(h)));for(var p=0,f=l;p<u;++p){var m=d[p];"m"==m?d[p]=f:f=m}for(var g=0,v=l;g<u;++g){var y=d[g];"1"==y&&"r"==v?d[g]="n":o.test(y)&&(v=y,"r"==y&&(d[g]="R"))}for(var b=1,k=d[0];b<u-1;++b){var w=d[b];"+"==w&&"1"==k&&"1"==d[b+1]?d[b]="1":","!=w||k!=d[b+1]||"1"!=k&&"n"!=k||(d[b]=k),k=w}for(var S=0;S<u;++S){var C=d[S];if(","==C)d[S]="N";else if("%"==C){var T=void 0;for(T=S+1;T<u&&"%"==d[T];++T);for(var x=S&&"!"==d[S-1]||T<u&&"1"==d[T]?"1":"N",E=S;E<T;++E)d[E]=x;S=T-1}}for(var P=0,O=l;P<u;++P){var R=d[P];"L"==O&&"1"==R?d[P]="L":o.test(R)&&(O=R)}for(var _=0;_<u;++_)if(r.test(d[_])){var N=void 0;for(N=_+1;N<u&&r.test(d[N]);++N);for(var I="L"==(_?d[_-1]:l),L=I==("L"==(N<u?d[N]:l))?I?"L":"R":l,A=_;A<N;++A)d[A]=L;_=N-1}for(var M,D=[],j=0;j<u;)if(s.test(d[j])){var U=j;for(++j;j<u&&s.test(d[j]);++j);D.push(new c(0,U,j))}else{var F=j,B=D.length,z="rtl"==t?1:0;for(++j;j<u&&"L"!=d[j];++j);for(var V=F;V<j;)if(a.test(d[V])){F<V&&(D.splice(B,0,new c(1,F,V)),B+=z);var W=V;for(++V;V<j&&a.test(d[V]);++V);D.splice(B,0,new c(2,W,V)),B+=z,F=V}else++V;F<j&&D.splice(B,0,new c(1,F,j))}return"ltr"==t&&(1==D[0].level&&(M=e.match(/^\s+/))&&(D[0].from=M[0].length,D.unshift(new c(0,0,M[0].length))),1==ee(D).level&&(M=e.match(/\s+$/))&&(ee(D).to-=M[0].length,D.push(new c(0,u-M[0].length,u)))),"rtl"==t?D.reverse():D}}();function ve(e,t){var n=e.order;return null==n&&(n=e.order=ge(e.text,t)),n}var ye=[],be=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||ye).concat(n)}};function ke(e,t){return e._handlers&&e._handlers[t]||ye}function we(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var o=q(r,n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function Se(e,t){var n=ke(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function Ce(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Se(e,n||t.type,e,t),Re(t)||t.codemirrorIgnore}function Te(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==q(n,t[i])&&n.push(t[i])}function xe(e,t){return ke(e,t).length>0}function Ee(e){e.prototype.on=function(e,t){be(this,e,t)},e.prototype.off=function(e,t){we(this,e,t)}}function Pe(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Oe(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Re(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function _e(e){Pe(e),Oe(e)}function Ne(e){return e.target||e.srcElement}function Ie(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var Le,Ae,Me=function(){if(s&&a<9)return!1;var e=_("div");return"draggable"in e||"dragDrop"in e}();function De(e){if(null==Le){var t=_("span","\u200b");R(e,_("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Le=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var n=Le?_("span","\u200b"):_("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function je(e){if(null!=Ae)return Ae;var t=R(e,document.createTextNode("A\u062eA")),n=E(t,0,1).getBoundingClientRect(),i=E(t,1,2).getBoundingClientRect();return O(e),!(!n||n.left==n.right)&&(Ae=i.right-n.right<3)}var Ue=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Fe=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Be=function(){var e=_("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),ze=null;function Ve(e){if(null!=ze)return ze;var t=R(e,_("span","x")),n=t.getBoundingClientRect(),i=E(t,0,1).getBoundingClientRect();return ze=Math.abs(n.left-i.left)>1}var We={},He={};function qe(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),We[e]=t}function Ge(e,t){He[e]=t}function Ke(e){if("string"==typeof e&&He.hasOwnProperty(e))e=He[e];else if(e&&"string"==typeof e.name&&He.hasOwnProperty(e.name)){var t=He[e.name];"string"==typeof t&&(t={name:t}),(e=re(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ke("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ke("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Je(e,t){t=Ke(t);var n=We[t.name];if(!n)return Je(e,"text/plain");var i=n(e,t);if($e.hasOwnProperty(t.name)){var r=$e[t.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)i[s]=t.modeProps[s];return i}var $e={};function Qe(e,t){V(t,$e.hasOwnProperty(e)?$e[e]:$e[e]={})}function Ye(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Xe(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ze(e,t,n){return!e.startState||e.startState(t,n)}var et=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function tt(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(t<o){n=r;break}t-=o}return n.lines[t]}function nt(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r})),i}function it(e,t,n){var i=[];return e.iter(t,n,(function(e){i.push(e.text)})),i}function rt(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function ot(e){if(null==e.parent)return null;for(var t=e.parent,n=q(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function st(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s].height;if(t<a)break;t-=a}return n+s}function at(e,t){return t>=e.first&&t<e.first+e.size}function ct(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function lt(e,t,n){if(void 0===n&&(n=null),!(this instanceof lt))return new lt(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ut(e,t){return e.line-t.line||e.ch-t.ch}function dt(e,t){return e.sticky==t.sticky&&0==ut(e,t)}function ht(e){return lt(e.line,e.ch)}function pt(e,t){return ut(e,t)<0?t:e}function ft(e,t){return ut(e,t)<0?e:t}function mt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function gt(e,t){if(t.line<e.first)return lt(e.first,0);var n=e.first+e.size-1;return t.line>n?lt(n,tt(e,n).text.length):vt(t,tt(e,t.line).text.length)}function vt(e,t){var n=e.ch;return null==n||n>t?lt(e.line,t):n<0?lt(e.line,0):e}function yt(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=gt(e,t[i]);return n}et.prototype.eol=function(){return this.pos>=this.string.length},et.prototype.sol=function(){return this.pos==this.lineStart},et.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},et.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},et.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},et.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},et.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},et.prototype.skipToEnd=function(){this.pos=this.string.length},et.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},et.prototype.backUp=function(e){this.pos-=e},et.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=W(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?W(this.string,this.lineStart,this.tabSize):0)},et.prototype.indentation=function(){return W(this.string,null,this.tabSize)-(this.lineStart?W(this.string,this.lineStart,this.tabSize):0)},et.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},et.prototype.current=function(){return this.string.slice(this.start,this.pos)},et.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},et.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},et.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var bt=function(e,t){this.state=e,this.lookAhead=t},kt=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function wt(e,t,n,i){var r=[e.state.modeGen],o={};_t(e,t.text,e.doc.mode,n,(function(e,t){return r.push(e,t)}),o,i);for(var s=n.state,a=function(i){n.baseTokens=r;var a=e.state.overlays[i],c=1,l=0;n.state=!0,_t(e,t.text,a.mode,n,(function(e,t){for(var n=c;l<e;){var i=r[c];i>e&&r.splice(c,1,e,r[c+1],i),c+=2,l=Math.min(e,i)}if(t)if(a.opaque)r.splice(n,c-n,e,"overlay "+t),c=n+2;else for(;n<c;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+t}}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},c=0;c<e.state.overlays.length;++c)a(c);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function St(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=Ct(e,ot(t)),r=t.text.length>e.options.maxHighlightLength&&Ye(e.doc.mode,i.state),o=wt(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Ct(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new kt(i,!0,t);var o=Nt(e,t,n),s=o>i.first&&tt(i,o-1).stateAfter,a=s?kt.fromSaved(i,s,o):new kt(i,Ze(i.mode),o);return i.iter(o,t,(function(n){Tt(e,n.text,a);var i=a.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?a.save():null,a.nextLine()})),n&&(i.modeFrontier=a.line),a}function Tt(e,t,n,i){var r=e.doc.mode,o=new et(t,e.options.tabSize,n);for(o.start=o.pos=i||0,""==t&&xt(r,n.state);!o.eol();)Et(r,o,n.state),o.start=o.pos}function xt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Xe(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Et(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=Xe(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}kt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},kt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},kt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},kt.fromSaved=function(e,t,n){return t instanceof bt?new kt(e,Ye(e.mode,t.state),n,t.lookAhead):new kt(e,Ye(e.mode,t),n)},kt.prototype.save=function(e){var t=!1!==e?Ye(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new bt(t,this.maxLookAhead):t};var Pt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Ot(e,t,n,i){var r,o,s=e.doc,a=s.mode,c=tt(s,(t=gt(s,t)).line),l=Ct(e,t.line,n),u=new et(c.text,e.options.tabSize,l);for(i&&(o=[]);(i||u.pos<t.ch)&&!u.eol();)u.start=u.pos,r=Et(a,u,l.state),i&&o.push(new Pt(u,r,Ye(s.mode,l.state)));return i?o:new Pt(u,r,l.state)}function Rt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+n[2])}return e}function _t(e,t,n,i,r,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var c,l=0,u=null,d=new et(t,e.options.tabSize,i),h=e.options.addModeClass&&[null];for(""==t&&Rt(xt(n,i.state),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(a=!1,s&&Tt(e,t,i,d.pos),d.pos=t.length,c=null):c=Rt(Et(n,d,i.state,h),o),h){var p=h[0].name;p&&(c="m-"+(c?p+" "+c:p))}if(!a||u!=c){for(;l<d.start;)r(l=Math.min(d.start,l+5e3),u);u=c}d.start=d.pos}for(;l<d.pos;){var f=Math.min(d.pos,l+5e3);r(f,u),l=f}}function Nt(e,t,n){for(var i,r,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var c=tt(o,a-1),l=c.stateAfter;if(l&&(!n||a+(l instanceof bt?l.lookAhead:0)<=o.modeFrontier))return a;var u=W(c.text,null,e.options.tabSize);(null==r||i>u)&&(r=a-1,i=u)}return r}function It(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=tt(e,i).stateAfter;if(r&&(!(r instanceof bt)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}var Lt=!1,At=!1;function Mt(){Lt=!0}function Dt(){At=!0}function jt(e,t,n){this.marker=e,this.from=t,this.to=n}function Ut(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Ft(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Bt(e,t,n){var i=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));i&&e.markedSpans&&i.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],i&&i.add(e.markedSpans)),t.marker.attachLine(e)}function zt(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new jt(s,o.from,a?null:o.to))}}return i}function Vt(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new jt(s,a?null:o.from-t,null==o.to?null:o.to-t))}}return i}function Wt(e,t){if(t.full)return null;var n=at(e,t.from.line)&&tt(e,t.from.line).markedSpans,i=at(e,t.to.line)&&tt(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,s=0==ut(t.from,t.to),a=zt(n,r,s),c=Vt(i,o,s),l=1==t.text.length,u=ee(t.text).length+(l?r:0);if(a)for(var d=0;d<a.length;++d){var h=a[d];if(null==h.to){var p=Ut(c,h.marker);p?l&&(h.to=null==p.to?null:p.to+u):h.to=r}}if(c)for(var f=0;f<c.length;++f){var m=c[f];null!=m.to&&(m.to+=u),null==m.from?Ut(a,m.marker)||(m.from=u,l&&(a||(a=[])).push(m)):(m.from+=u,l&&(a||(a=[])).push(m))}a&&(a=Ht(a)),c&&c!=a&&(c=Ht(c));var g=[a];if(!l){var v,y=t.text.length-2;if(y>0&&a)for(var b=0;b<a.length;++b)null==a[b].to&&(v||(v=[])).push(new jt(a[b].marker,null,null));for(var k=0;k<y;++k)g.push(v);g.push(c)}return g}function Ht(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function qt(e,t,n){var i=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=q(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(0),c=0;c<r.length;++c){var l=r[c];if(!(ut(l.to,a.from)<0||ut(l.from,a.to)>0)){var u=[c,1],d=ut(l.from,a.from),h=ut(l.to,a.to);(d<0||!s.inclusiveLeft&&!d)&&u.push({from:l.from,to:a.from}),(h>0||!s.inclusiveRight&&!h)&&u.push({from:a.to,to:l.to}),r.splice.apply(r,u),c+=u.length-3}}return r}function Gt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Kt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Jt(e){return e.inclusiveLeft?-1:0}function $t(e){return e.inclusiveRight?1:0}function Qt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),o=ut(i.from,r.from)||Jt(e)-Jt(t);if(o)return-o;var s=ut(i.to,r.to)||$t(e)-$t(t);return s||t.id-e.id}function Yt(e,t){var n,i=At&&e.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||Qt(n,r.marker)<0)&&(n=r.marker);return n}function Xt(e){return Yt(e,!0)}function Zt(e){return Yt(e,!1)}function en(e,t){var n,i=At&&e.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Qt(n,o.marker)<0)&&(n=o.marker)}return n}function tn(e,t,n,i,r){var o=tt(e,t),s=At&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var c=s[a];if(c.marker.collapsed){var l=c.marker.find(0),u=ut(l.from,n)||Jt(c.marker)-Jt(r),d=ut(l.to,i)||$t(c.marker)-$t(r);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(c.marker.inclusiveRight&&r.inclusiveLeft?ut(l.to,n)>=0:ut(l.to,n)>0)||u>=0&&(c.marker.inclusiveRight&&r.inclusiveLeft?ut(l.from,i)<=0:ut(l.from,i)<0)))return!0}}}function nn(e){for(var t;t=Xt(e);)e=t.find(-1,!0).line;return e}function rn(e){for(var t;t=Zt(e);)e=t.find(1,!0).line;return e}function on(e){for(var t,n;t=Zt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function sn(e,t){var n=tt(e,t),i=nn(n);return n==i?t:ot(i)}function an(e,t){if(t>e.lastLine())return t;var n,i=tt(e,t);if(!cn(e,i))return t;for(;n=Zt(i);)i=n.find(1,!0).line;return ot(i)+1}function cn(e,t){var n=At&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&ln(e,t,i))return!0}}function ln(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return ln(e,i.line,Ut(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,o=0;o<t.markedSpans.length;++o)if((r=t.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&ln(e,t,r))return!0}function un(e){for(var t=0,n=(e=nn(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;t+=a.height}return t}function dn(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Xt(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=Zt(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function hn(e){var t=e.display,n=e.doc;t.maxLine=tt(n,n.first),t.maxLineLength=dn(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=dn(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var pn=function(e,t,n){this.text=e,Kt(this,t),this.height=n?n(this):1};function fn(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Gt(e),Kt(e,n);var r=i?i(e):1;r!=e.height&&rt(e,r)}function mn(e){e.parent=null,Gt(e)}pn.prototype.lineNo=function(){return ot(this)},Ee(pn);var gn={},vn={};function yn(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?vn:gn;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function bn(e,t){var n=N("span",null,null,c?"padding-right: .1px":null),i={pre:N("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o=r?t.rest[r-1]:t.line,s=void 0;i.pos=0,i.addToken=wn,je(e.display.measure)&&(s=ve(o,e.doc.direction))&&(i.addToken=Cn(i.addToken,s)),i.map=[],xn(o,i,St(e,o,t!=e.display.externalMeasured&&ot(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=M(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=M(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(De(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(c){var a=i.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return Se(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=M(i.pre.className,i.textClass||"")),i}function kn(e){var t=_("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function wn(e,t,n,i,r,o,c){if(t){var l,u=e.splitSpaces?Sn(t,e.trailingSpace):t,d=e.cm.state.specialChars,h=!1;if(d.test(t)){l=document.createDocumentFragment();for(var p=0;;){d.lastIndex=p;var f=d.exec(t),m=f?f.index-p:t.length-p;if(m){var g=document.createTextNode(u.slice(p,p+m));s&&a<9?l.appendChild(_("span",[g])):l.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!f)break;p+=m+1;var v=void 0;if("\t"==f[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(v=l.appendChild(_("span",Z(b),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=b}else"\r"==f[0]||"\n"==f[0]?((v=l.appendChild(_("span","\r"==f[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",f[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),s&&a<9?l.appendChild(_("span",[v])):l.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,l=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,l),s&&a<9&&(h=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||i||r||h||o||c){var k=n||"";i&&(k+=i),r&&(k+=r);var w=_("span",[l],k,o);if(c)for(var S in c)c.hasOwnProperty(S)&&"style"!=S&&"class"!=S&&w.setAttribute(S,c[S]);return e.content.appendChild(w)}e.content.appendChild(l)}}function Sn(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o="\xa0"),i+=o,n=" "==o}return i}function Cn(e,t){return function(n,i,r,o,s,a,c){r=r?r+" cm-force-border":"cm-force-border";for(var l=n.pos,u=l+i.length;;){for(var d=void 0,h=0;h<t.length&&!((d=t[h]).to>l&&d.from<=l);h++);if(d.to>=u)return e(n,i,r,o,s,a,c);e(n,i.slice(0,d.to-l),r,o,null,a,c),o=null,i=i.slice(d.to-l),l=d.to}}}function Tn(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function xn(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(i)for(var s,a,c,l,u,d,h,p=r.length,f=0,m=1,g="",v=0;;){if(v==f){c=l=u=a="",h=null,d=null,v=1/0;for(var y=[],b=void 0,k=0;k<i.length;++k){var w=i[k],S=w.marker;if("bookmark"==S.type&&w.from==f&&S.widgetNode)y.push(S);else if(w.from<=f&&(null==w.to||w.to>f||S.collapsed&&w.to==f&&w.from==f)){if(null!=w.to&&w.to!=f&&v>w.to&&(v=w.to,l=""),S.className&&(c+=" "+S.className),S.css&&(a=(a?a+";":"")+S.css),S.startStyle&&w.from==f&&(u+=" "+S.startStyle),S.endStyle&&w.to==v&&(b||(b=[])).push(S.endStyle,w.to),S.title&&((h||(h={})).title=S.title),S.attributes)for(var C in S.attributes)(h||(h={}))[C]=S.attributes[C];S.collapsed&&(!d||Qt(d.marker,S)<0)&&(d=w)}else w.from>f&&v>w.from&&(v=w.from)}if(b)for(var T=0;T<b.length;T+=2)b[T+1]==v&&(l+=" "+b[T]);if(!d||d.from==f)for(var x=0;x<y.length;++x)Tn(t,0,y[x]);if(d&&(d.from||0)==f){if(Tn(t,(null==d.to?p+1:d.to)-f,d.marker,null==d.from),null==d.to)return;d.to==f&&(d=!1)}}if(f>=p)break;for(var E=Math.min(p,v);;){if(g){var P=f+g.length;if(!d){var O=P>E?g.slice(0,E-f):g;t.addToken(t,O,s?s+c:c,u,f+O.length==v?l:"",a,h)}if(P>=E){g=g.slice(E-f),f=E;break}f=P,u=""}g=r.slice(o,o=n[m++]),s=yn(n[m++],t.cm.options)}}else for(var R=1;R<n.length;R+=2)t.addToken(t,r.slice(o,o=n[R]),yn(n[R+1],t.cm.options))}function En(e,t,n){this.line=t,this.rest=on(t),this.size=this.rest?ot(ee(this.rest))-n+1:1,this.node=this.text=null,this.hidden=cn(e,t)}function Pn(e,t,n){for(var i,r=[],o=t;o<n;o=i){var s=new En(e.doc,tt(e.doc,o),o);i=o+s.size,r.push(s)}return r}var On=null;function Rn(e){On?On.ops.push(e):e.ownsGroup=On={ops:[e],delayedCallbacks:[]}}function _n(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}function Nn(e,t){var n=e.ownsGroup;if(n)try{_n(n)}finally{On=null,t(n)}}var In=null;function Ln(e,t){var n=ke(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);On?i=On.delayedCallbacks:In?i=In:(i=In=[],setTimeout(An,0));for(var o=function(e){i.push((function(){return n[e].apply(null,r)}))},s=0;s<n.length;++s)o(s)}}function An(){var e=In;In=null;for(var t=0;t<e.length;++t)e[t]()}function Mn(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?Fn(e,t):"gutter"==o?zn(e,t,n,i):"class"==o?Bn(e,t):"widget"==o&&Vn(e,t,i)}t.changes=null}function Dn(e){return e.node==e.text&&(e.node=_("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function jn(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=Dn(t);t.background=i.insertBefore(_("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}}function Un(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):bn(e,t)}function Fn(e,t){var n=t.text.className,i=Un(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,Bn(e,t)):n&&(t.text.className=n)}function Bn(e,t){jn(e,t),t.line.wrapClass?Dn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function zn(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=Dn(t);t.gutterBackground=_("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=Dn(t),a=t.gutter=_("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(a.setAttribute("aria-hidden","true"),e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(_("div",ct(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var c=0;c<e.display.gutterSpecs.length;++c){var l=e.display.gutterSpecs[c].className,u=o.hasOwnProperty(l)&&o[l];u&&a.appendChild(_("div",[u],"CodeMirror-gutter-elt","left: "+i.gutterLeft[l]+"px; width: "+i.gutterWidth[l]+"px"))}}}function Vn(e,t,n){t.alignable&&(t.alignable=null);for(var i=x("CodeMirror-linewidget"),r=t.node.firstChild,o=void 0;r;r=o)o=r.nextSibling,i.test(r.className)&&t.node.removeChild(r);Hn(e,t,n)}function Wn(e,t,n,i){var r=Un(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),Bn(e,t),zn(e,t,n,i),Hn(e,t,i),t.node}function Hn(e,t,n){if(qn(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)qn(e,t.rest[i],t,n,!1)}function qn(e,t,n,i,r){if(t.widgets)for(var o=Dn(n),s=0,a=t.widgets;s<a.length;++s){var c=a[s],l=_("div",[c.node],"CodeMirror-linewidget"+(c.className?" "+c.className:""));c.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),Gn(c,l,n,i),e.display.input.setUneditable(l),r&&c.above?o.insertBefore(l,n.gutter||n.text):o.appendChild(l),Ln(c,"redraw")}}function Gn(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function Kn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!I(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),R(t.display.measure,_("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Jn(e,t){for(var n=Ne(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function $n(e){return e.lineSpace.offsetTop}function Qn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Yn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=R(e.measure,_("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Xn(e){return G-e.display.nativeBarWidth}function Zn(e){return e.display.scroller.clientWidth-Xn(e)-e.display.barWidth}function ei(e){return e.display.scroller.clientHeight-Xn(e)-e.display.barHeight}function ti(e,t,n){var i=e.options.lineWrapping,r=i&&Zn(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var c=s[a],l=s[a+1];Math.abs(c.bottom-l.bottom)>2&&o.push((c.bottom+l.top)/2-n.top)}}o.push(n.bottom-n.top)}}function ni(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(ot(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}}function ii(e,t){var n=ot(t=nn(t)),i=e.display.externalMeasured=new En(e.doc,t,n);i.lineN=n;var r=i.built=bn(e,i);return i.text=r.pre,R(e.display.lineMeasure,r.pre),i}function ri(e,t,n,i){return ai(e,si(e,t),n,i)}function oi(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Bi(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function si(e,t){var n=ot(t),i=oi(e,n);i&&!i.text?i=null:i&&i.changes&&(Mn(e,i,n,Mi(e)),e.curOp.forceUpdate=!0),i||(i=ii(e,t));var r=ni(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function ai(e,t,n,i,r){t.before&&(n=-1);var o,s=n+(i||"");return t.cache.hasOwnProperty(s)?o=t.cache[s]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(ti(e,t.view,t.rect),t.hasHeights=!0),(o=hi(e,t,n,i)).bogus||(t.cache[s]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var ci,li={left:0,right:0,top:0,bottom:0};function ui(e,t,n){for(var i,r,o,s,a,c,l=0;l<e.length;l+=3)if(a=e[l],c=e[l+1],t<a?(r=0,o=1,s="left"):t<c?o=1+(r=t-a):(l==e.length-3||t==c&&e[l+3]>t)&&(r=(o=c-a)-1,t>=c&&(s="right")),null!=r){if(i=e[l+2],a==c&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==r)for(;l&&e[l-2]==e[l-3]&&e[l-1].insertLeft;)i=e[2+(l-=3)],s="left";if("right"==n&&r==c-a)for(;l<e.length-3&&e[l+3]==e[l+4]&&!e[l+5].insertLeft;)i=e[(l+=3)+2],s="right";break}return{node:i,start:r,end:o,collapse:s,coverStart:a,coverEnd:c}}function di(e,t){var n=li;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function hi(e,t,n,i){var r,o=ui(t.map,n,i),c=o.node,l=o.start,u=o.end,d=o.collapse;if(3==c.nodeType){for(var h=0;h<4;h++){for(;l&&ue(t.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+u<o.coverEnd&&ue(t.line.text.charAt(o.coverStart+u));)++u;if((r=s&&a<9&&0==l&&u==o.coverEnd-o.coverStart?c.parentNode.getBoundingClientRect():di(E(c,l,u).getClientRects(),i)).left||r.right||0==l)break;u=l,l-=1,d="right"}s&&a<11&&(r=pi(e.display.measure,r))}else{var p;l>0&&(d=i="right"),r=e.options.lineWrapping&&(p=c.getClientRects()).length>1?p["right"==i?p.length-1:0]:c.getBoundingClientRect()}if(s&&a<9&&!l&&(!r||!r.left&&!r.right)){var f=c.parentNode.getClientRects()[0];r=f?{left:f.left,right:f.left+Ai(e.display),top:f.top,bottom:f.bottom}:li}for(var m=r.top-t.rect.top,g=r.bottom-t.rect.top,v=(m+g)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var k=b?y[b-1]:0,w=y[b],S={left:("right"==d?r.right:r.left)-t.rect.left,right:("left"==d?r.left:r.right)-t.rect.left,top:k,bottom:w};return r.left||r.right||(S.bogus=!0),e.options.singleCursorHeightPerLine||(S.rtop=m,S.rbottom=g),S}function pi(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Ve(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}function fi(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function mi(e){e.display.externalMeasure=null,O(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)fi(e.display.view[t])}function gi(e){mi(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function vi(e){return u&&v?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function yi(e){return u&&v?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function bi(e){var t=nn(e).widgets,n=0;if(t)for(var i=0;i<t.length;++i)t[i].above&&(n+=Kn(t[i]));return n}function ki(e,t,n,i,r){if(!r){var o=bi(t);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=un(t);if("local"==i?s+=$n(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:yi(j(e)));var c=a.left+("window"==i?0:vi(j(e)));n.left+=c,n.right+=c}return n.top+=s,n.bottom+=s,n}function wi(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=vi(j(e)),r-=yi(j(e));else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:r-s.top}}function Si(e,t,n,i,r){return i||(i=tt(e.doc,t.line)),ki(e,i,ri(e,i,t.ch,r),n)}function Ci(e,t,n,i,r,o){function s(t,s){var a=ai(e,r,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,ki(e,i,a,n)}i=i||tt(e.doc,t.line),r||(r=si(e,i));var a=ve(i,e.doc.direction),c=t.ch,l=t.sticky;if(c>=i.text.length?(c=i.text.length,l="before"):c<=0&&(c=0,l="after"),!a)return s("before"==l?c-1:c,"before"==l);function u(e,t,n){return s(n?e-1:e,1==a[t].level!=n)}var d=me(a,c,l),h=fe,p=u(c,d,"before"==l);return null!=h&&(p.other=u(c,h,"before"!=l)),p}function Ti(e,t){var n=0;t=gt(e.doc,t),e.options.lineWrapping||(n=Ai(e.display)*t.ch);var i=tt(e.doc,t.line),r=un(i)+$n(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function xi(e,t,n,i,r){var o=lt(e,t,n);return o.xRel=r,i&&(o.outside=i),o}function Ei(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return xi(i.first,0,null,-1,-1);var r=st(i,n),o=i.first+i.size-1;if(r>o)return xi(i.first+i.size-1,tt(i,o).text.length,null,1,1);t<0&&(t=0);for(var s=tt(i,r);;){var a=_i(e,s,r,t,n),c=en(s,a.ch+(a.xRel>0||a.outside>0?1:0));if(!c)return a;var l=c.find(1);if(l.line==r)return l;s=tt(i,r=l.line)}}function Pi(e,t,n,i){i-=bi(t);var r=t.text.length,o=he((function(t){return ai(e,n,t-1).bottom<=i}),r,0);return{begin:o,end:r=he((function(t){return ai(e,n,t).top>i}),o,r)}}function Oi(e,t,n,i){return n||(n=si(e,t)),Pi(e,t,n,ki(e,t,ai(e,n,i),"line").top)}function Ri(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function _i(e,t,n,i,r){r-=un(t);var o=si(e,t),s=bi(t),a=0,c=t.text.length,l=!0,u=ve(t,e.doc.direction);if(u){var d=(e.options.lineWrapping?Ii:Ni)(e,t,n,o,u,i,r);a=(l=1!=d.level)?d.from:d.to-1,c=l?d.to:d.from-1}var h,p,f=null,m=null,g=he((function(t){var n=ai(e,o,t);return n.top+=s,n.bottom+=s,!!Ri(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(f=t,m=n),!0)}),a,c),v=!1;if(m){var y=i-m.left<m.right-i,b=y==l;g=f+(b?0:1),p=b?"after":"before",h=y?m.left:m.right}else{l||g!=c&&g!=a||g++,p=0==g?"after":g==t.text.length?"before":ai(e,o,g-(l?1:0)).bottom+s<=r==l?"after":"before";var k=Ci(e,lt(n,g,p),"line",t,o);h=k.left,v=r<k.top?-1:r>=k.bottom?1:0}return xi(n,g=de(t.text,g,1),p,v,i-h)}function Ni(e,t,n,i,r,o,s){var a=he((function(a){var c=r[a],l=1!=c.level;return Ri(Ci(e,lt(n,l?c.to:c.from,l?"before":"after"),"line",t,i),o,s,!0)}),0,r.length-1),c=r[a];if(a>0){var l=1!=c.level,u=Ci(e,lt(n,l?c.from:c.to,l?"after":"before"),"line",t,i);Ri(u,o,s,!0)&&u.top>s&&(c=r[a-1])}return c}function Ii(e,t,n,i,r,o,s){var a=Pi(e,t,i,s),c=a.begin,l=a.end;/\s/.test(t.text.charAt(l-1))&&l--;for(var u=null,d=null,h=0;h<r.length;h++){var p=r[h];if(!(p.from>=l||p.to<=c)){var f=ai(e,i,1!=p.level?Math.min(l,p.to)-1:Math.max(c,p.from)).right,m=f<o?o-f+1e9:f-o;(!u||d>m)&&(u=p,d=m)}}return u||(u=r[r.length-1]),u.from<c&&(u={from:c,to:u.to,level:u.level}),u.to>l&&(u={from:u.from,to:l,level:u.level}),u}function Li(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==ci){ci=_("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)ci.appendChild(document.createTextNode("x")),ci.appendChild(_("br"));ci.appendChild(document.createTextNode("x"))}R(e.measure,ci);var n=ci.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),O(e.measure),n||1}function Ai(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=_("span","xxxxxxxxxx"),n=_("pre",[t],"CodeMirror-line-like");R(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function Mi(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=e.display.gutterSpecs[s].className;n[a]=o.offsetLeft+o.clientLeft+r,i[a]=o.clientWidth}return{fixedPos:Di(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function Di(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ji(e){var t=Li(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/Ai(e.display)-3);return function(r){if(cn(e.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function Ui(e){var t=e.doc,n=ji(e);t.iter((function(e){var t=n(e);t!=e.height&&rt(e,t)}))}function Fi(e,t,n,i){var r=e.display;if(!n&&"true"==Ne(t).getAttribute("cm-not-content"))return null;var o,s,a=r.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(d){return null}var c,l=Ei(e,o,s);if(i&&l.xRel>0&&(c=tt(e.doc,l.line).text).length==l.ch){var u=W(c,c.length,e.options.tabSize)-c.length;l=lt(l.line,Math.max(0,Math.round((o-Yn(e.display).left)/Ai(e.display))-u))}return l}function Bi(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function zi(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)At&&sn(e.doc,t)<r.viewTo&&Wi(e);else if(n<=r.viewFrom)At&&an(e.doc,n+i)>r.viewFrom?Wi(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)Wi(e);else if(t<=r.viewFrom){var o=Hi(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):Wi(e)}else if(n>=r.viewTo){var s=Hi(e,t,t,-1);s?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):Wi(e)}else{var a=Hi(e,t,t,-1),c=Hi(e,n,n+i,1);a&&c?(r.view=r.view.slice(0,a.index).concat(Pn(e,a.lineN,c.lineN)).concat(r.view.slice(c.index)),r.viewTo+=i):Wi(e)}var l=r.externalMeasured;l&&(n<l.lineN?l.lineN+=i:t<l.lineN+l.size&&(r.externalMeasured=null))}function Vi(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[Bi(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==q(s,n)&&s.push(n)}}}function Wi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Hi(e,t,n,i){var r,o=Bi(e,t),s=e.display.view;if(!At||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=e.display.viewFrom,c=0;c<o;c++)a+=s[c].size;if(a!=t){if(i>0){if(o==s.length-1)return null;r=a+s[o].size-t,o++}else r=a-t;t+=r,n+=r}for(;sn(e.doc,n)!=n;){if(o==(i<0?0:s.length-1))return null;n+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function qi(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=Pn(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=Pn(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Bi(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(Pn(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Bi(e,n)))),i.viewTo=n}function Gi(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function Ki(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ji(e,t){void 0===t&&(t=!0);var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=e.options.$customCursor;s&&(t=!0);for(var a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var c=n.sel.ranges[a];if(!(c.from().line>=e.display.viewTo||c.to().line<e.display.viewFrom)){var l=c.empty();if(s){var u=s(e,c);u&&$i(e,u,r)}else(l||e.options.showCursorWhenSelecting)&&$i(e,c.head,r);l||Yi(e,c,o)}}return i}function $i(e,t,n){var i=Ci(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild(_("div","\xa0","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var o=Si(e,t,"div",null,null),s=o.right-o.left;r.style.width=(s>0?s:e.defaultCharWidth())+"px"}if(i.other){var a=n.appendChild(_("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=i.other.left+"px",a.style.top=i.other.top+"px",a.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Qi(e,t){return e.top-t.top||e.left-t.left}function Yi(e,t,n){var i=e.display,r=e.doc,o=document.createDocumentFragment(),s=Yn(e.display),a=s.left,c=Math.max(i.sizerWidth,Zn(e)-i.sizer.offsetLeft)-s.right,l="ltr"==r.direction;function u(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),o.appendChild(_("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?c-e:n)+"px;\n                             height: "+(i-t)+"px"))}function d(t,n,i){var o,s,d=tt(r,t),h=d.text.length;function p(n,i){return Si(e,lt(t,n),"div",d,i)}function f(t,n,i){var r=Oi(e,d,null,t),o="ltr"==n==("after"==i)?"left":"right";return p("after"==i?r.begin:r.end-(/\s/.test(d.text.charAt(r.end-1))?2:1),o)[o]}var m=ve(d,r.direction);return pe(m,n||0,null==i?h:i,(function(e,t,r,d){var g="ltr"==r,v=p(e,g?"left":"right"),y=p(t-1,g?"right":"left"),b=null==n&&0==e,k=null==i&&t==h,w=0==d,S=!m||d==m.length-1;if(y.top-v.top<=3){var C=(l?k:b)&&S,T=(l?b:k)&&w?a:(g?v:y).left,x=C?c:(g?y:v).right;u(T,v.top,x-T,v.bottom)}else{var E,P,O,R;g?(E=l&&b&&w?a:v.left,P=l?c:f(e,r,"before"),O=l?a:f(t,r,"after"),R=l&&k&&S?c:y.right):(E=l?f(e,r,"before"):a,P=!l&&b&&w?c:v.right,O=!l&&k&&S?a:y.left,R=l?f(t,r,"after"):c),u(E,v.top,P-E,v.bottom),v.bottom<y.top&&u(a,v.bottom,null,y.top),u(O,y.top,R-O,y.bottom)}(!o||Qi(v,o)<0)&&(o=v),Qi(y,o)<0&&(o=y),(!s||Qi(v,s)<0)&&(s=v),Qi(y,s)<0&&(s=y)})),{start:o,end:s}}var h=t.from(),p=t.to();if(h.line==p.line)d(h.line,h.ch,p.ch);else{var f=tt(r,h.line),m=tt(r,p.line),g=nn(f)==nn(m),v=d(h.line,h.ch,g?f.text.length+1:null).end,y=d(p.line,g?0:null,p.ch).start;g&&(v.top<y.top-2?(u(v.right,v.top,null,v.bottom),u(a,y.top,y.left,y.bottom)):u(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&u(a,v.bottom,null,y.top)}n.appendChild(o)}function Xi(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||nr(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Zi(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||tr(e))}function er(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&nr(e))}),100)}function tr(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Se(e,"focus",e,t),e.state.focused=!0,A(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),c&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),Xi(e))}function nr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Se(e,"blur",e,t),e.state.focused=!1,P(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function ir(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=Math.max(0,t.scroller.getBoundingClientRect().top),r=t.lineDiv.getBoundingClientRect().top,o=0,c=0;c<t.view.length;c++){var l=t.view[c],u=e.options.lineWrapping,d=void 0,h=0;if(!l.hidden){if(r+=l.line.height,s&&a<8){var p=l.node.offsetTop+l.node.offsetHeight;d=p-n,n=p}else{var f=l.node.getBoundingClientRect();d=f.bottom-f.top,!u&&l.text.firstChild&&(h=l.text.firstChild.getBoundingClientRect().right-f.left-1)}var m=l.line.height-d;if((m>.005||m<-.005)&&(r<i&&(o-=m),rt(l.line,d),rr(l.line),l.rest))for(var g=0;g<l.rest.length;g++)rr(l.rest[g]);if(h>e.display.sizerWidth){var v=Math.ceil(h/Ai(e.display));v>e.display.maxLineLength&&(e.display.maxLineLength=v,e.display.maxLine=l.line,e.display.maxLineChanged=!0)}}}Math.abs(o)>2&&(t.scroller.scrollTop+=o)}function rr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function or(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-$n(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,o=st(t,i),s=st(t,r);if(n&&n.ensure){var a=n.ensure.from.line,c=n.ensure.to.line;a<o?(o=a,s=st(t,un(tt(t,a))+e.wrapper.clientHeight)):Math.min(c,t.lastLine())>=s&&(o=st(t,un(tt(t,c))-e.wrapper.clientHeight),s=c)}return{from:o,to:Math.max(s,o+1)}}function sr(e,t){if(!Ce(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null,o=n.wrapper.ownerDocument;if(t.top+i.top<0?r=!0:t.bottom+i.top>(o.defaultView.innerHeight||o.documentElement.clientHeight)&&(r=!1),null!=r&&!m){var s=_("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-$n(e.display))+"px;\n                         height: "+(t.bottom-t.top+Xn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(r),e.display.lineSpace.removeChild(s)}}}function ar(e,t,n,i){var r;null==i&&(i=0),e.options.lineWrapping||t!=n||(n="before"==t.sticky?lt(t.line,t.ch+1,"before"):t,t=t.ch?lt(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var o=0;o<5;o++){var s=!1,a=Ci(e,t),c=n&&n!=t?Ci(e,n):a,l=lr(e,r={left:Math.min(a.left,c.left),top:Math.min(a.top,c.top)-i,right:Math.max(a.left,c.left),bottom:Math.max(a.bottom,c.bottom)+i}),u=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=l.scrollTop&&(gr(e,l.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(s=!0)),null!=l.scrollLeft&&(yr(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(s=!0)),!s)break}return r}function cr(e,t){var n=lr(e,t);null!=n.scrollTop&&gr(e,n.scrollTop),null!=n.scrollLeft&&yr(e,n.scrollLeft)}function lr(e,t){var n=e.display,i=Li(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=ei(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a=e.doc.height+Qn(n),c=t.top<i,l=t.bottom>a-i;if(t.top<r)s.scrollTop=c?0:t.top;else if(t.bottom>r+o){var u=Math.min(t.top,(l?a:t.bottom)-o);u!=r&&(s.scrollTop=u)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,p=Zn(e)-n.gutters.offsetWidth,f=t.right-t.left>p;return f&&(t.right=t.left+p),t.left<10?s.scrollLeft=0:t.left<h?s.scrollLeft=Math.max(0,t.left+d-(f?0:10)):t.right>p+h-3&&(s.scrollLeft=t.right+(f?0:10)-p),s}function ur(e,t){null!=t&&(fr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function dr(e){fr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function hr(e,t,n){null==t&&null==n||fr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function pr(e,t){fr(e),e.curOp.scrollToPos=t}function fr(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,mr(e,Ti(e,t.from),Ti(e,t.to),t.margin))}function mr(e,t,n,i){var r=lr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});hr(e,r.scrollLeft,r.scrollTop)}function gr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||Kr(e,{top:t}),vr(e,t,!0),n&&Kr(e),Fr(e,100))}function vr(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function yr(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,Yr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function br(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Qn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Xn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var kr=function(e,t,n){this.cm=n;var i=this.vert=_("div",[_("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=_("div",[_("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,e(i),e(r),be(i,"scroll",(function(){i.clientHeight&&t(i.scrollTop,"vertical")})),be(r,"scroll",(function(){r.clientWidth&&t(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};kr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},kr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},kr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},kr.prototype.zeroWidthHack=function(){var e=b&&!f?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new H,this.disableVert=new H},kr.prototype.enableZeroWidthBar=function(e,t,n){function i(){var r=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=e?e.style.visibility="hidden":t.set(1e3,i)}e.style.visibility="",t.set(1e3,i)},kr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var wr=function(){};function Sr(e,t){t||(t=br(e));var n=e.display.barWidth,i=e.display.barHeight;Cr(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&ir(e),Cr(e,br(e)),n=e.display.barWidth,i=e.display.barHeight}function Cr(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}wr.prototype.update=function(){return{bottom:0,right:0}},wr.prototype.setScrollLeft=function(){},wr.prototype.setScrollTop=function(){},wr.prototype.clear=function(){};var Tr={native:kr,null:wr};function xr(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&P(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Tr[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),be(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?yr(e,t):gr(e,t)}),e),e.display.scrollbars.addClass&&A(e.display.wrapper,e.display.scrollbars.addClass)}var Er=0;function Pr(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Er,markArrays:null},Rn(e.curOp)}function Or(e){var t=e.curOp;t&&Nn(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;Rr(e)}))}function Rr(e){for(var t=e.ops,n=0;n<t.length;n++)_r(t[n]);for(var i=0;i<t.length;i++)Nr(t[i]);for(var r=0;r<t.length;r++)Ir(t[r]);for(var o=0;o<t.length;o++)Lr(t[o]);for(var s=0;s<t.length;s++)Ar(t[s])}function _r(e){var t=e.cm,n=t.display;Vr(t),e.updateMaxLine&&hn(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new zr(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Nr(e){e.updatedDisplay=e.mustUpdate&&qr(e.cm,e.update)}function Ir(e){var t=e.cm,n=t.display;e.updatedDisplay&&ir(t),e.barMeasure=br(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=ri(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Xn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Zn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Lr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&yr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==L(U(t));e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Sr(t,e.barMeasure),e.updatedDisplay&&Qr(t,e.barMeasure),e.selectionChanged&&Xi(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Zi(e.cm)}function Ar(e){var t=e.cm,n=t.display,i=t.doc;e.updatedDisplay&&Gr(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&vr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&yr(t,e.scrollLeft,!0,!0),e.scrollToPos&&sr(t,ar(t,gt(i,e.scrollToPos.from),gt(i,e.scrollToPos.to),e.scrollToPos.margin));var r=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(r)for(var s=0;s<r.length;++s)r[s].lines.length||Se(r[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&Se(o[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Se(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Mr(e,t){if(e.curOp)return t();Pr(e);try{return t()}finally{Or(e)}}function Dr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Pr(e);try{return t.apply(e,arguments)}finally{Or(e)}}}function jr(e){return function(){if(this.curOp)return e.apply(this,arguments);Pr(this);try{return e.apply(this,arguments)}finally{Or(this)}}}function Ur(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Pr(t);try{return e.apply(this,arguments)}finally{Or(t)}}}function Fr(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,z(Br,e))}function Br(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=Ct(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(i.line>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength?Ye(t.mode,i.state):null,c=wt(e,o,i,!0);a&&(i.state=a),o.styles=c.styles;var l=o.styleClasses,u=c.classes;u?o.styleClasses=u:l&&(o.styleClasses=null);for(var d=!s||s.length!=o.styles.length||l!=u&&(!l||!u||l.bgClass!=u.bgClass||l.textClass!=u.textClass),h=0;!d&&h<s.length;++h)d=s[h]!=o.styles[h];d&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=e.options.maxHighlightLength&&Tt(e,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return Fr(e,e.options.workDelay),!0})),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&Mr(e,(function(){for(var t=0;t<r.length;t++)Vi(e,r[t],"text")}))}}var zr=function(e,t,n){var i=e.display;this.viewport=t,this.visible=or(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Zn(e),this.force=n,this.dims=Mi(e),this.events=[]};function Vr(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Xn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Xn(e)+"px",t.scrollbarsClipped=!0)}function Wr(e){if(e.hasFocus())return null;var t=L(U(e));if(!t||!I(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=B(e).getSelection();i.anchorNode&&i.extend&&I(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}function Hr(e){if(e&&e.activeElt&&e.activeElt!=L(F(e.activeElt))&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&I(document.body,e.anchorNode)&&I(document.body,e.focusNode))){var t=e.activeElt.ownerDocument,n=t.defaultView.getSelection(),i=t.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),n.removeAllRanges(),n.addRange(i),n.extend(e.focusNode,e.focusOffset)}}function qr(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return Wi(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Gi(e))return!1;Xr(e)&&(Wi(e),t.dims=Mi(e));var r=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(r,n.viewTo)),At&&(o=sn(e.doc,o),s=an(e.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;qi(e,o,s),n.viewOffset=un(tt(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=Gi(e);if(!a&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var l=Wr(e);return c>4&&(n.lineDiv.style.display="none"),Jr(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,Hr(l),O(n.cursorDiv),O(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Fr(e,400)),n.updateLineNumbers=null,!0}function Gr(e,t){for(var n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Zn(e))i&&(t.visible=or(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Qn(e.display)-ei(e),n.top)}),t.visible=or(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!qr(e,t))break;ir(e);var r=br(e);Ki(e),Sr(e,r),Qr(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Kr(e,t){var n=new zr(e,t);if(qr(e,n)){ir(e),Gr(e,n);var i=br(e);Ki(e),Sr(e,i),Qr(e,i),n.finish()}}function Jr(e,t,n){var i=e.display,r=e.options.lineNumbers,o=i.lineDiv,s=o.firstChild;function a(t){var n=t.nextSibling;return c&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var l=i.view,u=i.viewFrom,d=0;d<l.length;d++){var h=l[d];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;s!=h.node;)s=a(s);var p=r&&null!=t&&t<=u&&h.lineNumber;h.changes&&(q(h.changes,"gutter")>-1&&(p=!1),Mn(e,h,u,n)),p&&(O(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(ct(e.options,u)))),s=h.node.nextSibling}else{var f=Wn(e,h,u,n);o.insertBefore(f,s)}u+=h.size}for(;s;)s=a(s)}function $r(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",Ln(e,"gutterChanged",e)}function Qr(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Xn(e)+"px"}function Yr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=Di(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var c=0;c<a.length;c++)a[c].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function Xr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=ct(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(_("div",[_("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",$r(e.display),!0}return!1}function Zr(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var o=e[r],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;i=!0}n.push({className:o,style:s})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function eo(e){var t=e.gutters,n=e.gutterSpecs;O(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,s=r.style,a=t.appendChild(_("div",null,"CodeMirror-gutter "+o));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==o&&(e.lineGutter=a,a.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",$r(e)}function to(e){eo(e.display),zi(e),Yr(e)}function no(e,t,i,r){var o=this;this.input=i,o.scrollbarFiller=_("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=_("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=N("div",null,"CodeMirror-code"),o.selectionDiv=_("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=_("div",null,"CodeMirror-cursors"),o.measure=_("div",null,"CodeMirror-measure"),o.lineMeasure=_("div",null,"CodeMirror-measure"),o.lineSpace=N("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var l=N("div",[o.lineSpace],"CodeMirror-lines");o.mover=_("div",[l],null,"position: relative"),o.sizer=_("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=_("div",null,null,"position: absolute; height: "+G+"px; width: 1px;"),o.gutters=_("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=_("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=_("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),u&&d>=105&&(o.wrapper.style.clipPath="inset(0px)"),o.wrapper.setAttribute("translate","no"),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),c||n&&y||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=Zr(r.gutters,r.lineNumbers),eo(o),i.init(o)}zr.prototype.signal=function(e,t){xe(e,t)&&this.events.push(arguments)},zr.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Se.apply(null,this.events[e])};var io=0,ro=null;function oo(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function so(e){var t=oo(e);return t.x*=ro,t.y*=ro,t}function ao(e,t){u&&102==d&&(null==e.display.chromeScrollHack?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout((function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""}),100));var i=oo(t),r=i.x,o=i.y,s=ro;0===t.deltaMode&&(r=t.deltaX,o=t.deltaY,s=1);var a=e.display,l=a.scroller,p=l.scrollWidth>l.clientWidth,f=l.scrollHeight>l.clientHeight;if(r&&p||o&&f){if(o&&b&&c)e:for(var m=t.target,g=a.view;m!=l;m=m.parentNode)for(var v=0;v<g.length;v++)if(g[v].node==m){e.display.currentWheelTarget=m;break e}if(r&&!n&&!h&&null!=s)return o&&f&&gr(e,Math.max(0,l.scrollTop+o*s)),yr(e,Math.max(0,l.scrollLeft+r*s)),(!o||o&&f)&&Pe(t),void(a.wheelStartX=null);if(o&&null!=s){var y=o*s,k=e.doc.scrollTop,w=k+a.wrapper.clientHeight;y<0?k=Math.max(0,k+y-50):w=Math.min(e.doc.height,w+y+50),Kr(e,{top:k,bottom:w})}io<20&&0!==t.deltaMode&&(null==a.wheelStartX?(a.wheelStartX=l.scrollLeft,a.wheelStartY=l.scrollTop,a.wheelDX=r,a.wheelDY=o,setTimeout((function(){if(null!=a.wheelStartX){var e=l.scrollLeft-a.wheelStartX,t=l.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(ro=(ro*io+n)/(io+1),++io)}}),200)):(a.wheelDX+=r,a.wheelDY+=o))}}s?ro=-.53:n?ro=15:u?ro=-.7:p&&(ro=-1/3);var co=function(e,t){this.ranges=e,this.primIndex=t};co.prototype.primary=function(){return this.ranges[this.primIndex]},co.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!dt(n.anchor,i.anchor)||!dt(n.head,i.head))return!1}return!0},co.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new lo(ht(this.ranges[t].anchor),ht(this.ranges[t].head));return new co(e,this.primIndex)},co.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},co.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(ut(t,i.from())>=0&&ut(e,i.to())<=0)return n}return-1};var lo=function(e,t){this.anchor=e,this.head=t};function uo(e,t,n){var i=e&&e.options.selectionsMayTouch,r=t[n];t.sort((function(e,t){return ut(e.from(),t.from())})),n=q(t,r);for(var o=1;o<t.length;o++){var s=t[o],a=t[o-1],c=ut(a.to(),s.from());if(i&&!s.empty()?c>0:c>=0){var l=ft(a.from(),s.from()),u=pt(a.to(),s.to()),d=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,t.splice(--o,2,new lo(d?u:l,d?l:u))}}return new co(t,n)}function ho(e,t){return new co([new lo(e,t||e)],0)}function po(e){return e.text?lt(e.from.line+e.text.length-1,ee(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function fo(e,t){if(ut(e,t.from)<0)return e;if(ut(e,t.to)<=0)return po(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=po(t).ch-t.to.ch),lt(n,i)}function mo(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new lo(fo(r.anchor,t),fo(r.head,t)))}return uo(e.cm,n,e.sel.primIndex)}function go(e,t,n){return e.line==t.line?lt(n.line,e.ch-t.ch+n.ch):lt(n.line+(e.line-t.line),e.ch)}function vo(e,t,n){for(var i=[],r=lt(e.first,0),o=r,s=0;s<t.length;s++){var a=t[s],c=go(a.from,r,o),l=go(po(a),r,o);if(r=a.to,o=l,"around"==n){var u=e.sel.ranges[s],d=ut(u.head,u.anchor)<0;i[s]=new lo(d?l:c,d?c:l)}else i[s]=new lo(c,c)}return new co(i,e.sel.primIndex)}function yo(e){e.doc.mode=Je(e.options,e.doc.modeOption),bo(e)}function bo(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Fr(e,100),e.state.modeGen++,e.curOp&&zi(e)}function ko(e,t){return 0==t.from.ch&&0==t.to.ch&&""==ee(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function wo(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){fn(e,n,r,i),Ln(e,"change",e,t)}function s(e,t){for(var n=[],o=e;o<t;++o)n.push(new pn(l[o],r(o),i));return n}var a=t.from,c=t.to,l=t.text,u=tt(e,a.line),d=tt(e,c.line),h=ee(l),p=r(l.length-1),f=c.line-a.line;if(t.full)e.insert(0,s(0,l.length)),e.remove(l.length,e.size-l.length);else if(ko(e,t)){var m=s(0,l.length-1);o(d,d.text,p),f&&e.remove(a.line,f),m.length&&e.insert(a.line,m)}else if(u==d)if(1==l.length)o(u,u.text.slice(0,a.ch)+h+u.text.slice(c.ch),p);else{var g=s(1,l.length-1);g.push(new pn(h+u.text.slice(c.ch),p,i)),o(u,u.text.slice(0,a.ch)+l[0],r(0)),e.insert(a.line+1,g)}else if(1==l.length)o(u,u.text.slice(0,a.ch)+l[0]+d.text.slice(c.ch),r(0)),e.remove(a.line+1,f);else{o(u,u.text.slice(0,a.ch)+l[0],r(0)),o(d,h+d.text.slice(c.ch),p);var v=s(1,l.length-1);f>1&&e.remove(a.line+1,f-1),e.insert(a.line+1,v)}Ln(e,"change",e,t)}function So(e,t,n){function i(e,r,o){if(e.linked)for(var s=0;s<e.linked.length;++s){var a=e.linked[s];if(a.doc!=r){var c=o&&a.sharedHist;n&&!c||(t(a.doc,c),i(a.doc,e,c))}}}i(e,null,!0)}function Co(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Ui(e),yo(e),To(e),e.options.direction=t.direction,e.options.lineWrapping||hn(e),e.options.mode=t.modeOption,zi(e)}function To(e){("rtl"==e.doc.direction?A:P)(e.display.lineDiv,"CodeMirror-rtl")}function xo(e){Mr(e,(function(){To(e),zi(e)}))}function Eo(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Po(e,t){var n={from:ht(t.from),to:po(t),text:nt(e,t.from,t.to)};return Ao(e,n,t.from.line,t.to.line+1),So(e,(function(e){return Ao(e,n,t.from.line,t.to.line+1)}),!0),n}function Oo(e){for(;e.length&&ee(e).ranges;)e.pop()}function Ro(e,t){return t?(Oo(e.done),ee(e.done)):e.done.length&&!ee(e.done).ranges?ee(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),ee(e.done)):void 0}function _o(e,t,n,i){var r=e.history;r.undone.length=0;var o,s,a=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=Ro(r,r.lastOp==i)))s=ee(o.changes),0==ut(t.from,t.to)&&0==ut(t.from,s.to)?s.to=po(t):o.changes.push(Po(e,t));else{var c=ee(r.done);for(c&&c.ranges||Lo(e.sel,r.done),o={changes:[Po(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=a,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,s||Se(e,"historyAdded")}function No(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Io(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||No(e,o,ee(r.done),t))?r.done[r.done.length-1]=t:Lo(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Oo(r.undone)}function Lo(e,t){var n=ee(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Ao(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),(function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function Mo(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Do(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(Mo(n[r]));return i}function jo(e,t){var n=Do(e,t),i=Wt(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)e:for(var a=0;a<s.length;++a){for(var c=s[a],l=0;l<o.length;++l)if(o[l].marker==c.marker)continue e;o.push(c)}else s&&(n[r]=s)}return n}function Uo(e,t,n){for(var i=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?co.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];i.push({changes:a});for(var c=0;c<s.length;++c){var l=s[c],u=void 0;if(a.push({from:l.from,to:l.to,text:l.text}),t)for(var d in l)(u=d.match(/^spans_(\d+)$/))&&q(t,Number(u[1]))>-1&&(ee(a)[d]=l[d],delete l[d])}}}return i}function Fo(e,t,n,i){if(i){var r=e.anchor;if(n){var o=ut(t,r)<0;o!=ut(n,r)<0?(r=t,t=n):o!=ut(t,n)<0&&(t=n)}return new lo(r,t)}return new lo(n||t,t)}function Bo(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),Go(e,new co([Fo(e.sel.primary(),t,n,r)],0),i)}function zo(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=Fo(e.sel.ranges[o],t[o],null,r);Go(e,uo(e.cm,i,e.sel.primIndex),n)}function Vo(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,Go(e,uo(e.cm,r,e.sel.primIndex),i)}function Wo(e,t,n,i){Go(e,ho(t,n),i)}function Ho(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new lo(gt(e,t[n].anchor),gt(e,t[n].head))},origin:n&&n.origin};return Se(e,"beforeSelectionChange",e,i),e.cm&&Se(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?uo(e.cm,i.ranges,i.ranges.length-1):t}function qo(e,t,n){var i=e.history.done,r=ee(i);r&&r.ranges?(i[i.length-1]=t,Ko(e,t,n)):Go(e,t,n)}function Go(e,t,n){Ko(e,t,n),Io(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Ko(e,t,n){(xe(e,"beforeSelectionChange")||e.cm&&xe(e.cm,"beforeSelectionChange"))&&(t=Ho(e,t,n));var i=n&&n.bias||(ut(t.primary().head,e.sel.primary().head)<0?-1:1);Jo(e,Qo(e,t,i,!0)),n&&!1===n.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||dr(e.cm)}function Jo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Te(e.cm)),Ln(e,"cursorActivity",e))}function $o(e){Jo(e,Qo(e,e.sel,null,!1))}function Qo(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],c=Xo(e,s.anchor,a&&a.anchor,n,i),l=s.head==s.anchor?c:Xo(e,s.head,a&&a.head,n,i);(r||c!=s.anchor||l!=s.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new lo(c,l))}return r?uo(e.cm,r,t.primIndex):t}function Yo(e,t,n,i,r){var o=tt(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],c=a.marker,l="selectLeft"in c?!c.selectLeft:c.inclusiveLeft,u="selectRight"in c?!c.selectRight:c.inclusiveRight;if((null==a.from||(l?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(u?a.to>=t.ch:a.to>t.ch))){if(r&&(Se(c,"beforeCursorEnter"),c.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!c.atomic)continue;if(n){var d=c.find(i<0?1:-1),h=void 0;if((i<0?u:l)&&(d=Zo(e,d,-i,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(h=ut(d,n))&&(i<0?h<0:h>0))return Yo(e,d,t,i,r)}var p=c.find(i<0?-1:1);return(i<0?l:u)&&(p=Zo(e,p,i,p.line==t.line?o:null)),p?Yo(e,p,t,i,r):null}}return t}function Xo(e,t,n,i,r){var o=i||1,s=Yo(e,t,n,o,r)||!r&&Yo(e,t,n,o,!0)||Yo(e,t,n,-o,r)||!r&&Yo(e,t,n,-o,!0);return s||(e.cantEdit=!0,lt(e.first,0))}function Zo(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?gt(e,lt(t.line-1)):null:n>0&&t.ch==(i||tt(e,t.line)).text.length?t.line<e.first+e.size-1?lt(t.line+1,0):null:new lt(t.line,t.ch+n)}function es(e){e.setSelection(lt(e.firstLine(),0),lt(e.lastLine()),J)}function ts(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,o){t&&(i.from=gt(e,t)),n&&(i.to=gt(e,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),Se(e,"beforeChange",e,i),e.cm&&Se(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function ns(e,t,n){if(e.cm){if(!e.cm.curOp)return Dr(e.cm,ns)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(xe(e,"beforeChange")||e.cm&&xe(e.cm,"beforeChange"))||(t=ts(e,t,!0))){var i=Lt&&!n&&qt(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)is(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text,origin:t.origin});else is(e,t)}}function is(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ut(t.from,t.to)){var n=mo(e,t);_o(e,t,n,e.cm?e.cm.curOp.id:NaN),ss(e,t,n,Wt(e,t));var i=[];So(e,(function(e,n){n||-1!=q(i,e.history)||(ds(e.history,t),i.push(e.history)),ss(e,t,null,Wt(e,t))}))}}function rs(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var r,o=e.history,s=e.sel,a="undo"==t?o.done:o.undone,c="undo"==t?o.undone:o.done,l=0;l<a.length&&(r=a[l],n?!r.ranges||r.equals(e.sel):r.ranges);l++);if(l!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=a.pop()).ranges){if(i)return void a.push(r);break}if(Lo(r,c),n&&!r.equals(e.sel))return void Go(e,r,{clearRedo:!1});s=r}var u=[];Lo(s,c),c.push({changes:u,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var d=xe(e,"beforeChange")||e.cm&&xe(e.cm,"beforeChange"),h=function(n){var i=r.changes[n];if(i.origin=t,d&&!ts(e,i,!1))return a.length=0,{};u.push(Po(e,i));var o=n?mo(e,i):ee(a);ss(e,i,o,jo(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:po(i)});var s=[];So(e,(function(e,t){t||-1!=q(s,e.history)||(ds(e.history,i),s.push(e.history)),ss(e,i,null,jo(e,i))}))},p=r.changes.length-1;p>=0;--p){var f=h(p);if(f)return f.v}}}}function os(e,t){if(0!=t&&(e.first+=t,e.sel=new co(te(e.sel.ranges,(function(e){return new lo(lt(e.anchor.line+t,e.anchor.ch),lt(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){zi(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Vi(e.cm,i,"gutter")}}function ss(e,t,n,i){if(e.cm&&!e.cm.curOp)return Dr(e.cm,ss)(e,t,n,i);if(t.to.line<e.first)os(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);os(e,r),t={from:lt(e.first,0),to:lt(t.to.line+r,t.to.ch),text:[ee(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:lt(o,tt(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=nt(e,t.from,t.to),n||(n=mo(e,t)),e.cm?as(e.cm,t,i):wo(e,t,i),Ko(e,n,J),e.cantEdit&&Xo(e,lt(e.firstLine(),0))&&(e.cantEdit=!1)}}function as(e,t,n){var i=e.doc,r=e.display,o=t.from,s=t.to,a=!1,c=o.line;e.options.lineWrapping||(c=ot(nn(tt(i,o.line))),i.iter(c,s.line+1,(function(e){if(e==r.maxLine)return a=!0,!0}))),i.sel.contains(t.from,t.to)>-1&&Te(e),wo(i,t,n,ji(e)),e.options.lineWrapping||(i.iter(c,o.line+t.text.length,(function(e){var t=dn(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0)),It(i,o.line),Fr(e,400);var l=t.text.length-(s.line-o.line)-1;t.full?zi(e):o.line!=s.line||1!=t.text.length||ko(e.doc,t)?zi(e,o.line,s.line+1,l):Vi(e,o.line,"text");var u=xe(e,"changes"),d=xe(e,"change");if(d||u){var h={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&Ln(e,"change",e,h),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function cs(e,t,n,i,r){var o;i||(i=n),ut(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof t&&(t=e.splitLines(t)),ns(e,{from:n,to:i,text:t,origin:r})}function ls(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function us(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],s=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)ls(o.ranges[a].anchor,t,n,i),ls(o.ranges[a].head,t,n,i)}else{for(var c=0;c<o.changes.length;++c){var l=o.changes[c];if(n<l.from.line)l.from=lt(l.from.line+i,l.from.ch),l.to=lt(l.to.line+i,l.to.ch);else if(t<=l.to.line){s=!1;break}}s||(e.splice(0,r+1),r=0)}}}function ds(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;us(e.done,n,i,r),us(e.undone,n,i,r)}function hs(e,t,n,i){var r=t,o=t;return"number"==typeof t?o=tt(e,mt(e,t)):r=ot(t),null==r?null:(i(o,r)&&e.cm&&Vi(e.cm,r,n),o)}function ps(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function fs(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}lo.prototype.from=function(){return ft(this.anchor,this.head)},lo.prototype.to=function(){return pt(this.anchor,this.head)},lo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ps.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,mn(r),Ln(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},fs.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),s=i.height;if(i.removeInner(e,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ps))){var a=[];this.collapse(a),this.children=[new ps(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var s=r.lines.length%25+25,a=s;a<r.lines.length;){var c=new ps(r.lines.slice(a,a+=25));r.height-=c.height,this.children.splice(++i,0,c),c.parent=this}r.lines=r.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new fs(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=q(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new fs(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var s=Math.min(t,o-e);if(r.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var ms=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function gs(e,t,n){un(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&ur(e,n)}function vs(e,t,n,i){var r=new ms(e,n,i),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),hs(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!cn(e,t)){var i=un(t)<e.scrollTop;rt(t,t.height+Kn(r)),i&&ur(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&Ln(o,"lineWidgetAdded",o,r,"number"==typeof t?t:ot(t)),r}ms.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=ot(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var o=Kn(this);rt(n,Math.max(0,n.height-o)),e&&(Mr(e,(function(){gs(e,n,-o),Vi(e,i,"widget")})),Ln(e,"lineWidgetCleared",e,this,i))}},ms.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=Kn(this)-t;r&&(cn(this.doc,i)||rt(i,i.height+r),n&&Mr(n,(function(){n.curOp.forceUpdate=!0,gs(n,i,r),Ln(n,"lineWidgetChanged",n,e,ot(i))})))},Ee(ms);var ys=0,bs=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ys};function ks(e,t,n,i,r){if(i&&i.shared)return Ss(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return Dr(e.cm,ks)(e,t,n,i,r);var o=new bs(e,r),s=ut(t,n);if(i&&V(i,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=N("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(tn(e,t.line,t,n,o)||t.line!=n.line&&tn(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Dt()}o.addToHistory&&_o(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,c=t.line,l=e.cm;if(e.iter(c,n.line+1,(function(i){l&&o.collapsed&&!l.options.lineWrapping&&nn(i)==l.display.maxLine&&(a=!0),o.collapsed&&c!=t.line&&rt(i,0),Bt(i,new jt(o,c==t.line?t.ch:null,c==n.line?n.ch:null),e.cm&&e.cm.curOp),++c})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){cn(e,t)&&rt(t,0)})),o.clearOnEnter&&be(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(Mt(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ys,o.atomic=!0),l){if(a&&(l.curOp.updateMaxLine=!0),o.collapsed)zi(l,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var u=t.line;u<=n.line;u++)Vi(l,u,"text");o.atomic&&$o(l.doc),Ln(l,"markerAdded",l,o)}return o}bs.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Pr(e),xe(this,"clear")){var n=this.find();n&&Ln(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Ut(s.markedSpans,this);e&&!this.collapsed?Vi(e,ot(s),"text"):e&&(null!=a.to&&(r=ot(s)),null!=a.from&&(i=ot(s))),s.markedSpans=Ft(s.markedSpans,a),null==a.from&&this.collapsed&&!cn(this.doc,s)&&e&&rt(s,Li(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var l=nn(this.lines[c]),u=dn(l);u>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&zi(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&$o(e.doc)),e&&Ln(e,"markerCleared",e,this,i,r),t&&Or(e),this.parent&&this.parent.clear()}},bs.prototype.find=function(e,t){var n,i;null==e&&"bookmark"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],s=Ut(o.markedSpans,this);if(null!=s.from&&(n=lt(t?o:ot(o),s.from),-1==e))return n;if(null!=s.to&&(i=lt(t?o:ot(o),s.to),1==e))return i}return n&&{from:n,to:i}},bs.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&Mr(i,(function(){var r=t.line,o=ot(t.line),s=oi(i,o);if(s&&(fi(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!cn(n.doc,r)&&null!=n.height){var a=n.height;n.height=null;var c=Kn(n)-a;c&&rt(r,r.height+c)}Ln(i,"markerChanged",i,e)}))},bs.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=q(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},bs.prototype.detachLine=function(e){if(this.lines.splice(q(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Ee(bs);var ws=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function Ss(e,t,n,i,r){(i=V(i)).shared=!1;var o=[ks(e,t,n,i,r)],s=o[0],a=i.widgetNode;return So(e,(function(e){a&&(i.widgetNode=a.cloneNode(!0)),o.push(ks(e,gt(e,t),gt(e,n),i,r));for(var c=0;c<e.linked.length;++c)if(e.linked[c].isParent)return;s=ee(o)})),new ws(o,s)}function Cs(e){return e.findMarks(lt(e.first,0),e.clipPos(lt(e.lastLine())),(function(e){return e.parent}))}function Ts(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from),s=e.clipPos(r.to);if(ut(o,s)){var a=ks(e,o,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}function xs(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];So(n.primary.doc,(function(e){return i.push(e)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==q(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}ws.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ln(this,"clear")}},ws.prototype.find=function(e,t){return this.primary.find(e,t)},Ee(ws);var Es=0,Ps=function(e,t,n,i,r){if(!(this instanceof Ps))return new Ps(e,t,n,i,r);null==n&&(n=0),fs.call(this,[new ps([new pn("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=lt(n,0);this.sel=ho(o),this.history=new Eo(null),this.id=++Es,this.modeOption=t,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),wo(this,{from:o,to:o,text:e}),Go(this,ho(o),J)};Ps.prototype=re(fs.prototype,{constructor:Ps,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=it(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Ur((function(e){var t=lt(this.first,0),n=this.first+this.size-1;ns(this,{from:t,to:lt(n,tt(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&hr(this.cm,0,0),Go(this,ho(t),J)})),replaceRange:function(e,t,n,i){cs(this,e,t=gt(this,t),n=n?gt(this,n):t,i)},getRange:function(e,t,n){var i=nt(this,gt(this,e),gt(this,t));return!1===n?i:""===n?i.join(""):i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(at(this,e))return tt(this,e)},getLineNumber:function(e){return ot(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=tt(this,e)),nn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return gt(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ur((function(e,t,n){Wo(this,gt(this,"number"==typeof e?lt(e,t||0):e),null,n)})),setSelection:Ur((function(e,t,n){Wo(this,gt(this,e),gt(this,t||e),n)})),extendSelection:Ur((function(e,t,n){Bo(this,gt(this,e),t&&gt(this,t),n)})),extendSelections:Ur((function(e,t){zo(this,yt(this,e),t)})),extendSelectionsBy:Ur((function(e,t){zo(this,yt(this,te(this.sel.ranges,e)),t)})),setSelections:Ur((function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new lo(gt(this,e[r].anchor),gt(this,e[r].head||e[r].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Go(this,uo(this.cm,i,t),n)}})),addSelection:Ur((function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new lo(gt(this,e),gt(this,t||e))),Go(this,uo(this.cm,i,i.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=nt(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=nt(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:Ur((function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&vo(this,i,t),c=i.length-1;c>=0;c--)ns(this,i[c]);a?qo(this,a):this.cm&&dr(this.cm)})),undo:Ur((function(){rs(this,"undo")})),redo:Ur((function(){rs(this,"redo")})),undoSelection:Ur((function(){rs(this,"undo",!0)})),redoSelection:Ur((function(){rs(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Eo(this.history),So(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Uo(this.history.done),undone:Uo(this.history.undone)}},setHistory:function(e){var t=this.history=new Eo(this.history);t.done=Uo(e.done.slice(0),null,!0),t.undone=Uo(e.undone.slice(0),null,!0)},setGutterMarker:Ur((function(e,t,n){return hs(this,e,"gutter",(function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&ce(i)&&(e.gutterMarkers=null),!0}))})),clearGutter:Ur((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&hs(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,ce(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!at(this,e))return null;if(t=e,!(e=tt(this,e)))return null}else if(null==(t=ot(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Ur((function(e,t,n){return hs(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(x(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0}))})),removeLineClass:Ur((function(e,t,n){return hs(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var o=r.match(x(n));if(!o)return!1;var s=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0}))})),addLineWidget:Ur((function(e,t,n){return vs(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return ks(this,gt(this,e),gt(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return ks(this,e=gt(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=tt(this,(e=gt(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=gt(this,e),t=gt(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,(function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var c=s[a];null!=c.to&&r==e.line&&e.ch>=c.to||null==c.from&&r!=e.line||null!=c.from&&r==t.line&&c.from>=t.ch||n&&!n(c.marker)||i.push(c.marker.parent||c.marker)}++r})),i},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)})),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>e)return t=e,!0;e-=o,++n})),gt(this,lt(n,t))},indexFromPos:function(e){var t=(e=gt(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Ps(it(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new Ps(it(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Ts(i,Cs(this)),i},unlinkDoc:function(e){if(e instanceof za&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),xs(Cs(this));break}if(e.history==this.history){var n=[e.id];So(e,(function(e){return n.push(e.id)}),!0),e.history=new Eo(null),e.history.done=Uo(this.history.done,n),e.history.undone=Uo(this.history.undone,n)}},iterLinkedDocs:function(e){So(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ue(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Ur((function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&xo(this.cm))}))}),Ps.prototype.eachLine=Ps.prototype.iter;var Os=0;function Rs(e){var t=this;if(Is(t),!Ce(t,e)&&!Jn(t.display,e)){Pe(e),s&&(Os=+new Date);var n=Fi(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),a=0,c=function(){++a==r&&Dr(t,(function(){var e={from:n=gt(t.doc,n),to:n,text:t.doc.splitLines(o.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};ns(t.doc,e),qo(t.doc,ho(gt(t.doc,n),gt(t.doc,po(e))))}))()},l=function(e,n){if(t.options.allowDropFileTypes&&-1==q(t.options.allowDropFileTypes,e.type))c();else{var i=new FileReader;i.onerror=function(){return c()},i.onload=function(){var e=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(o[n]=e),c()},i.readAsText(e)}},u=0;u<i.length;u++)l(i[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var d=e.dataTransfer.getData("Text");if(d){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),Ko(t.doc,ho(n,n)),h)for(var p=0;p<h.length;++p)cs(t.doc,"",h[p].anchor,h[p].head,"drag");t.replaceSelection(d,"around","paste"),t.display.input.focus()}}catch(f){}}}}function _s(e,t){if(s&&(!e.state.draggingText||+new Date-Os<100))_e(t);else if(!Ce(e,t)&&!Jn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!p)){var n=_("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}function Ns(e,t){var n=Fi(e,t);if(n){var i=document.createDocumentFragment();$i(e,n,i),e.display.dragCursor||(e.display.dragCursor=_("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),R(e.display.dragCursor,i)}}function Is(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ls(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var As=!1;function Ms(){As||(Ds(),As=!0)}function Ds(){var e;be(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Ls(js)}),100))})),be(window,"blur",(function(){return Ls(nr)}))}function js(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Us={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Fs=0;Fs<10;Fs++)Us[Fs+48]=Us[Fs+96]=String(Fs);for(var Bs=65;Bs<=90;Bs++)Us[Bs]=String.fromCharCode(Bs);for(var zs=1;zs<=12;zs++)Us[zs+111]=Us[zs+63235]="F"+zs;var Vs={};function Ws(e){var t,n,i,r,o=e.split(/-(?!$)/);e=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Hs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=te(n.split(" "),Ws),o=0;o<r.length;o++){var s=void 0,a=void 0;o==r.length-1?(a=r.join(" "),s=i):(a=r.slice(0,o+1).join(" "),s="...");var c=t[a];if(c){if(c!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var l in t)e[l]=t[l];return e}function qs(e,t,n,i){var r=(t=$s(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return qs(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var s=qs(e,t.fallthrough[o],n,i);if(s)return s}}}function Gs(e){var t="string"==typeof e?e:Us[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ks(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(C?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(C?t.ctrlKey:t.metaKey)&&"Mod"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function Js(e,t){if(h&&34==e.keyCode&&e.char)return!1;var n=Us[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Ks(n,e,t))}function $s(e){return"string"==typeof e?Vs[e]:e}function Qs(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&ut(o.from,ee(i).to)<=0;){var s=i.pop();if(ut(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}Mr(e,(function(){for(var t=i.length-1;t>=0;t--)cs(e.doc,"",i[t].from,i[t].to,"+delete");dr(e)}))}function Ys(e,t,n){var i=de(e.text,t+n,n);return i<0||i>e.text.length?null:i}function Xs(e,t,n){var i=Ys(e,t.ch,n);return null==i?null:new lt(t.line,i,n<0?"after":"before")}function Zs(e,t,n,i,r){if(e){"rtl"==t.doc.direction&&(r=-r);var o=ve(n,t.doc.direction);if(o){var s,a=r<0?ee(o):o[0],c=r<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==t.doc.direction){var l=si(t,n);s=r<0?n.text.length-1:0;var u=ai(t,l,s).top;s=he((function(e){return ai(t,l,e).top==u}),r<0==(1==a.level)?a.from:a.to-1,s),"before"==c&&(s=Ys(n,s,1))}else s=r<0?a.to:a.from;return new lt(i,s,c)}}return new lt(i,r<0?n.text.length:0,r<0?"before":"after")}function ea(e,t,n,i){var r=ve(t,e.doc.direction);if(!r)return Xs(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=me(r,n.ch,n.sticky),s=r[o];if("ltr"==e.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return Xs(t,n,i);var a,c=function(e,n){return Ys(t,e instanceof lt?e.ch:e,n)},l=function(n){return e.options.lineWrapping?(a=a||si(e,t),Oi(e,t,a,n)):{begin:0,end:t.text.length}},u=l("before"==n.sticky?c(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var d=1==s.level==i<0,h=c(n,d?1:-1);if(null!=h&&(d?h<=s.to&&h<=u.end:h>=s.from&&h>=u.begin)){var p=d?"before":"after";return new lt(n.line,h,p)}}var f=function(e,t,i){for(var o=function(e,t){return t?new lt(n.line,c(e,1),"before"):new lt(n.line,e,"after")};e>=0&&e<r.length;e+=t){var s=r[e],a=t>0==(1!=s.level),l=a?i.begin:c(i.end,-1);if(s.from<=l&&l<s.to)return o(l,a);if(l=a?s.from:c(s.to,-1),i.begin<=l&&l<i.end)return o(l,a)}},m=f(o+i,i,u);if(m)return m;var g=i>0?u.end:c(u.begin,-1);return null==g||i>0&&g==t.text.length||!(m=f(i>0?0:r.length-1,i,l(g)))?null:m}Vs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Vs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Vs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Vs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Vs.default=b?Vs.macDefault:Vs.pcDefault;var ta={selectAll:es,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),J)},killLine:function(e){return Qs(e,(function(t){if(t.empty()){var n=tt(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:lt(t.head.line+1,0)}:{from:t.head,to:lt(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Qs(e,(function(t){return{from:lt(t.from().line,0),to:gt(e.doc,lt(t.to().line+1,0))}}))},delLineLeft:function(e){return Qs(e,(function(e){return{from:lt(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Qs(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Qs(e,(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(lt(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(lt(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return na(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return ra(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return ia(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),Q)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),Q)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?ra(e,t.head):i}),Q)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),s=W(e.getLine(o.line),o.ch,i);t.push(Z(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Mr(e,(function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,o=tt(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new lt(r.line,r.ch-1)),r.ch>0)r=new lt(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),lt(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var s=tt(e.doc,r.line-1).text;s&&(r=new lt(r.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),lt(r.line-1,s.length-1),r,"+transpose"))}n.push(new lo(r,r))}e.setSelections(n)}))},newlineAndIndent:function(e){return Mr(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);dr(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function na(e,t){var n=tt(e.doc,t),i=nn(n);return i!=n&&(t=ot(i)),Zs(!0,e,i,t,1)}function ia(e,t){var n=tt(e.doc,t),i=rn(n);return i!=n&&(t=ot(i)),Zs(!0,e,n,t,-1)}function ra(e,t){var n=na(e,t.line),i=tt(e.doc,n.line),r=ve(i,e.doc.direction);if(!r||0==r[0].level){var o=Math.max(n.ch,i.text.search(/\S/)),s=t.line==n.line&&t.ch<=o&&t.ch;return lt(n.line,s?0:o,n.sticky)}return n}function oa(e,t,n){if("string"==typeof t&&!(t=ta[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=K}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}function sa(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=qs(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&qs(t,e.options.extraKeys,n,e)||qs(t,e.options.keyMap,n,e)}var aa=new H;function ca(e,t,n,i){var r=e.state.keySeq;if(r){if(Gs(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:aa.set(50,(function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())})),la(e,r+" "+t,n,i))return!0}return la(e,t,n,i)}function la(e,t,n,i){var r=sa(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&Ln(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(Pe(n),Xi(e)),!!r}function ua(e,t){var n=Js(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?ca(e,"Shift-"+n,t,(function(t){return oa(e,t,!0)}))||ca(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return oa(e,t)})):ca(e,n,t,(function(t){return oa(e,t)})))}function da(e,t,n){return ca(e,"'"+n+"'",t,(function(t){return oa(e,t,!0)}))}var ha=null;function pa(e){var t=this;if((!e.target||e.target==t.display.input.getField())&&(t.curOp.focus=L(U(t)),!Ce(t,e))){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var r=ua(t,e);h&&(ha=r?i:null,r||88!=i||Be||!(b?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),n&&!b&&!r&&46==i&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||fa(t)}}function fa(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(P(t,"CodeMirror-crosshair"),we(document,"keyup",n),we(document,"mouseover",n))}A(t,"CodeMirror-crosshair"),be(document,"keyup",n),be(document,"mouseover",n)}function ma(e){16==e.keyCode&&(this.doc.sel.shift=!1),Ce(this,e)}function ga(e){var t=this;if((!e.target||e.target==t.display.input.getField())&&!(Jn(t.display,e)||Ce(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(h&&n==ha)return ha=null,void Pe(e);if(!h||e.which&&!(e.which<10)||!ua(t,e)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(da(t,e,r)||t.display.input.onKeyPress(e))}}}var va,ya,ba=400,ka=function(e,t,n){this.time=e,this.pos=t,this.button=n};function wa(e,t){var n=+new Date;return ya&&ya.compare(n,e,t)?(va=ya=null,"triple"):va&&va.compare(n,e,t)?(ya=new ka(n,e,t),va=null,"double"):(va=new ka(n,e,t),ya=null,"single")}function Sa(e){var t=this,n=t.display;if(!(Ce(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,Jn(n,e))c||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!Na(t,e)){var i=Fi(t,e),r=Ie(e),o=i?wa(i,r):"single";B(t).focus(),1==r&&t.state.selectingText&&t.state.selectingText(e),i&&Ca(t,r,i,o,e)||(1==r?i?xa(t,i,o,e):Ne(e)==n.scroller&&Pe(e):2==r?(i&&Bo(t.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(T?t.display.input.onContextMenu(e):er(t)))}}function Ca(e,t,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),ca(e,Ks(o=(1==t?"Left":2==t?"Middle":"Right")+o,r),r,(function(t){if("string"==typeof t&&(t=ta[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=K}finally{e.state.suppressEdits=!1}return i}))}function Ta(e,t,n){var i=e.getOption("configureMouse"),r=i?i(e,t,n):{};if(null==r.unit){var o=k?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=b?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(b?n.altKey:n.ctrlKey)),r}function xa(e,t,n,i){s?setTimeout(z(Zi,e),0):e.curOp.focus=L(U(e));var r,o=Ta(e,n,i),a=e.doc.sel;e.options.dragDrop&&Me&&!e.isReadOnly()&&"single"==n&&(r=a.contains(t))>-1&&(ut((r=a.ranges[r]).from(),t)<0||t.xRel>0)&&(ut(r.to(),t)>0||t.xRel<0)?Ea(e,i,t,o):Oa(e,i,t,o)}function Ea(e,t,n,i){var r=e.display,o=!1,l=Dr(e,(function(t){c&&(r.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:er(e)),we(r.wrapper.ownerDocument,"mouseup",l),we(r.wrapper.ownerDocument,"mousemove",u),we(r.scroller,"dragstart",d),we(r.scroller,"drop",l),o||(Pe(t),i.addNew||Bo(e.doc,n,null,null,i.extend),c&&!p||s&&9==a?setTimeout((function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()}),20):r.input.focus())})),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return o=!0};c&&(r.scroller.draggable=!0),e.state.draggingText=l,l.copy=!i.moveOnDrag,be(r.wrapper.ownerDocument,"mouseup",l),be(r.wrapper.ownerDocument,"mousemove",u),be(r.scroller,"dragstart",d),be(r.scroller,"drop",l),e.state.delayingBlurEvent=!0,setTimeout((function(){return r.input.focus()}),20),r.scroller.dragDrop&&r.scroller.dragDrop()}function Pa(e,t,n){if("char"==n)return new lo(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new lo(lt(t.line,0),gt(e.doc,lt(t.line+1,0)));var i=n(e,t);return new lo(i.from,i.to)}function Oa(e,t,n,i){s&&er(e);var r=e.display,o=e.doc;Pe(t);var a,c,l=o.sel,u=l.ranges;if(i.addNew&&!i.extend?(c=o.sel.contains(n),a=c>-1?u[c]:new lo(n,n)):(a=o.sel.primary(),c=o.sel.primIndex),"rectangle"==i.unit)i.addNew||(a=new lo(n,n)),n=Fi(e,t,!0,!0),c=-1;else{var d=Pa(e,n,i.unit);a=i.extend?Fo(a,d.anchor,d.head,i.extend):d}i.addNew?-1==c?(c=u.length,Go(o,uo(e,u.concat([a]),c),{scroll:!1,origin:"*mouse"})):u.length>1&&u[c].empty()&&"char"==i.unit&&!i.extend?(Go(o,uo(e,u.slice(0,c).concat(u.slice(c+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):Vo(o,c,a,$):(c=0,Go(o,new co([a],0),$),l=o.sel);var h=n;function p(t){if(0!=ut(h,t))if(h=t,"rectangle"==i.unit){for(var r=[],s=e.options.tabSize,u=W(tt(o,n.line).text,n.ch,s),d=W(tt(o,t.line).text,t.ch,s),p=Math.min(u,d),f=Math.max(u,d),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=tt(o,m).text,y=Y(v,p,s);p==f?r.push(new lo(lt(m,y),lt(m,y))):v.length>y&&r.push(new lo(lt(m,y),lt(m,Y(v,f,s))))}r.length||r.push(new lo(n,n)),Go(o,uo(e,l.ranges.slice(0,c).concat(r),c),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,k=a,w=Pa(e,t,i.unit),S=k.anchor;ut(w.anchor,S)>0?(b=w.head,S=ft(k.from(),w.anchor)):(b=w.anchor,S=pt(k.to(),w.head));var C=l.ranges.slice(0);C[c]=Ra(e,new lo(gt(o,S),b)),Go(o,uo(e,C,c),$)}}var f=r.wrapper.getBoundingClientRect(),m=0;function g(t){var n=++m,s=Fi(e,t,!0,"rectangle"==i.unit);if(s)if(0!=ut(s,h)){e.curOp.focus=L(U(e)),p(s);var a=or(r,o);(s.line>=a.to||s.line<a.from)&&setTimeout(Dr(e,(function(){m==n&&g(t)})),150)}else{var c=t.clientY<f.top?-20:t.clientY>f.bottom?20:0;c&&setTimeout(Dr(e,(function(){m==n&&(r.scroller.scrollTop+=c,g(t))})),50)}}function v(t){e.state.selectingText=!1,m=1/0,t&&(Pe(t),r.input.focus()),we(r.wrapper.ownerDocument,"mousemove",y),we(r.wrapper.ownerDocument,"mouseup",b),o.history.lastSelOrigin=null}var y=Dr(e,(function(e){0!==e.buttons&&Ie(e)?g(e):v(e)})),b=Dr(e,v);e.state.selectingText=b,be(r.wrapper.ownerDocument,"mousemove",y),be(r.wrapper.ownerDocument,"mouseup",b)}function Ra(e,t){var n=t.anchor,i=t.head,r=tt(e.doc,n.line);if(0==ut(n,i)&&n.sticky==i.sticky)return t;var o=ve(r);if(!o)return t;var s=me(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return t;var c,l=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==l||l==o.length)return t;if(i.line!=n.line)c=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=me(o,i.ch,i.sticky),d=u-s||(i.ch-n.ch)*(1==a.level?-1:1);c=u==l-1||u==l?d<0:d>0}var h=o[l+(c?-1:0)],p=c==(1==h.level),f=p?h.from:h.to,m=p?"after":"before";return n.ch==f&&n.sticky==m?t:new lo(new lt(n.line,f,m),i)}function _a(e,t,n,i){var r,o;if(t.touches)r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(u){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&Pe(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!xe(e,n))return Re(t);o-=a.top-s.viewOffset;for(var c=0;c<e.display.gutterSpecs.length;++c){var l=s.gutters.childNodes[c];if(l&&l.getBoundingClientRect().right>=r)return Se(e,n,e,st(e.doc,o),e.display.gutterSpecs[c].className,t),Re(t)}}function Na(e,t){return _a(e,t,"gutterClick",!0)}function Ia(e,t){Jn(e.display,t)||La(e,t)||Ce(e,t,"contextmenu")||T||e.display.input.onContextMenu(t)}function La(e,t){return!!xe(e,"gutterContextMenu")&&_a(e,t,"gutterContextMenu",!1)}function Aa(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),gi(e)}ka.prototype.compare=function(e,t,n){return this.time+ba>e&&0==ut(t,this.pos)&&n==this.button};var Ma={toString:function(){return"CodeMirror.Init"}},Da={},ja={};function Ua(e){var t=e.optionHandlers;function n(n,i,r,o){e.defaults[n]=i,r&&(t[n]=o?function(e,t,n){n!=Ma&&r(e,t,n)}:r)}e.defineOption=n,e.Init=Ma,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,yo(e)}),!0),n("indentUnit",2,yo,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){bo(e),gi(e),zi(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter((function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,n.push(lt(i,o))}i++}));for(var r=n.length-1;r>=0;r--)cs(e.doc,t,n[r],lt(n[r].line,n[r].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=Ma&&e.refresh()})),n("specialCharPlaceholder",kn,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){Aa(e),to(e)}),!0),n("keyMap","default",(function(e,t,n){var i=$s(t),r=n!=Ma&&$s(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Ba,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=Zr(t,e.options.lineNumbers),to(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?Di(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return Sr(e)}),!0),n("scrollbarStyle","native",(function(e){xr(e),Sr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=Zr(e.options.gutters,t),to(e)}),!0),n("firstLineNumber",1,to,!0),n("lineNumberFormatter",(function(e){return e}),to,!0),n("showCursorWhenSelecting",!1,Ki,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(nr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,Fa),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,Ki,!0),n("singleCursorHeightPerLine",!0,Ki,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,bo,!0),n("addModeClass",!1,bo,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,bo,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}function Fa(e,t,n){if(!t!=!(n&&n!=Ma)){var i=e.display.dragFunctions,r=t?be:we;r(e.display.scroller,"dragstart",i.start),r(e.display.scroller,"dragenter",i.enter),r(e.display.scroller,"dragover",i.over),r(e.display.scroller,"dragleave",i.leave),r(e.display.scroller,"drop",i.drop)}}function Ba(e){e.options.lineWrapping?(A(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(P(e.display.wrapper,"CodeMirror-wrap"),hn(e)),Ui(e),zi(e),gi(e),setTimeout((function(){return Sr(e)}),100)}function za(e,t){var n=this;if(!(this instanceof za))return new za(e,t);this.options=t=t?V(t):{},V(Da,t,!1);var i=t.value;"string"==typeof i?i=new Ps(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var r=new za.inputStyles[t.inputStyle](this),o=this.display=new no(e,i,r,t);for(var l in o.wrapper.CodeMirror=this,Aa(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),xr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new H,keySeq:null,specialChars:null},t.autofocus&&!y&&o.input.focus(),s&&a<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),Va(this),Ms(),Pr(this),this.curOp.forceUpdate=!0,Co(this,i),t.autofocus&&!y||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&tr(n)}),20):nr(this),ja)ja.hasOwnProperty(l)&&ja[l](this,t[l],Ma);Xr(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Wa.length;++u)Wa[u](this);Or(this),c&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function Va(e){var t=e.display;be(t.scroller,"mousedown",Dr(e,Sa)),be(t.scroller,"dblclick",s&&a<11?Dr(e,(function(t){if(!Ce(e,t)){var n=Fi(e,t);if(n&&!Na(e,t)&&!Jn(e.display,t)){Pe(t);var i=e.findWordAt(n);Bo(e.doc,i.anchor,i.head)}}})):function(t){return Ce(e,t)||Pe(t)}),be(t.scroller,"contextmenu",(function(t){return Ia(e,t)})),be(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||Ia(e,n)}));var n,i={end:0};function r(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(i=t.activeTouch).end=+new Date)}function o(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function c(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}be(t.scroller,"touchstart",(function(r){if(!Ce(e,r)&&!o(r)&&!Na(e,r)){t.input.ensurePolled(),clearTimeout(n);var s=+new Date;t.activeTouch={start:s,moved:!1,prev:s-i.end<=300?i:null},1==r.touches.length&&(t.activeTouch.left=r.touches[0].pageX,t.activeTouch.top=r.touches[0].pageY)}})),be(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),be(t.scroller,"touchend",(function(n){var i=t.activeTouch;if(i&&!Jn(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o,s=e.coordsChar(t.activeTouch,"page");o=!i.prev||c(i,i.prev)?new lo(s,s):!i.prev.prev||c(i,i.prev.prev)?e.findWordAt(s):new lo(lt(s.line,0),gt(e.doc,lt(s.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),Pe(n)}r()})),be(t.scroller,"touchcancel",r),be(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(gr(e,t.scroller.scrollTop),yr(e,t.scroller.scrollLeft,!0),Se(e,"scroll",e))})),be(t.scroller,"mousewheel",(function(t){return ao(e,t)})),be(t.scroller,"DOMMouseScroll",(function(t){return ao(e,t)})),be(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){Ce(e,t)||_e(t)},over:function(t){Ce(e,t)||(Ns(e,t),_e(t))},start:function(t){return _s(e,t)},drop:Dr(e,Rs),leave:function(t){Ce(e,t)||Is(e)}};var l=t.input.getField();be(l,"keyup",(function(t){return ma.call(e,t)})),be(l,"keydown",Dr(e,pa)),be(l,"keypress",Dr(e,ga)),be(l,"focus",(function(t){return tr(e,t)})),be(l,"blur",(function(t){return nr(e,t)}))}za.defaults=Da,za.optionHandlers=ja;var Wa=[];function Ha(e,t,n,i){var r,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=Ct(e,t).state:n="prev");var s=e.options.tabSize,a=tt(o,t),c=W(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var l,u=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((l=o.mode.indent(r,a.text.slice(u.length),a.text))==K||l>150)){if(!i)return;n="prev"}}else l=0,n="not";"prev"==n?l=t>o.first?W(tt(o,t-1).text,null,s):0:"add"==n?l=c+e.options.indentUnit:"subtract"==n?l=c-e.options.indentUnit:"number"==typeof n&&(l=c+n),l=Math.max(0,l);var d="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(l/s);p;--p)h+=s,d+="\t";if(h<l&&(d+=Z(l-h)),d!=u)return cs(o,d,lt(t,0),lt(t,u.length),"+input"),a.stateAfter=null,!0;for(var f=0;f<o.sel.ranges.length;f++){var m=o.sel.ranges[f];if(m.head.line==t&&m.head.ch<u.length){var g=lt(t,u.length);Vo(o,f,new lo(g,g));break}}}za.defineInitHook=function(e){return Wa.push(e)};var qa=null;function Ga(e){qa=e}function Ka(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var s=+new Date-200,a="paste"==r||e.state.pasteIncoming>s,c=Ue(t),l=null;if(a&&i.ranges.length>1)if(qa&&qa.text.join("\n")==t){if(i.ranges.length%qa.text.length==0){l=[];for(var u=0;u<qa.text.length;u++)l.push(o.splitLines(qa.text[u]))}}else c.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(l=te(c,(function(e){return[e]})));for(var d=e.curOp.updateInput,h=i.ranges.length-1;h>=0;h--){var p=i.ranges[h],f=p.from(),m=p.to();p.empty()&&(n&&n>0?f=lt(f.line,f.ch-n):e.state.overwrite&&!a?m=lt(m.line,Math.min(tt(o,m.line).text.length,m.ch+ee(c).length)):a&&qa&&qa.lineWise&&qa.text.join("\n")==c.join("\n")&&(f=m=lt(f.line,0)));var g={from:f,to:m,text:l?l[h%l.length]:c,origin:r||(a?"paste":e.state.cutIncoming>s?"cut":"+input")};ns(e.doc,g),Ln(e,"inputRead",e,g)}t&&!a&&$a(e,t),dr(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Ja(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||!t.hasFocus()||Mr(t,(function(){return Ka(t,n,0,null,"paste")})),!0}function $a(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=Ha(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(tt(e.doc,r.head.line).text.slice(0,r.head.ch))&&(s=Ha(e,r.head.line,"smart"));s&&Ln(e,"electricInput",e,r.head.line)}}}function Qa(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,o={anchor:lt(r,0),head:lt(r+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Ya(e,t,n,i){e.setAttribute("autocorrect",n?"on":"off"),e.setAttribute("autocapitalize",i?"on":"off"),e.setAttribute("spellcheck",!!t)}function Xa(){var e=_("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=_("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return c?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),t}function Za(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){B(this).focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&"mode"!=e||(i[e]=n,t.hasOwnProperty(e)&&Dr(this,t[e])(this,n,r),Se(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"]($s(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:jr((function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");ne(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,zi(this)})),removeOverlay:jr((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void zi(this)}})),indentLine:jr((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),at(this.doc,e)&&Ha(this,e,t,n)})),indentSelection:jr((function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Ha(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&dr(this));else{var o=r.from(),s=r.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var c=a;c<n;++c)Ha(this,c,e);var l=this.doc.sel.ranges;0==o.ch&&t.length==l.length&&l[i].from().ch>0&&Vo(this.doc,i,new lo(o,l[i].to()),J)}}})),getTokenAt:function(e,t){return Ot(this,e,t)},getLineTokens:function(e,t){return Ot(this,lt(e),t,!0)},getTokenTypeAt:function(e){e=gt(this.doc,e);var t,n=St(this,tt(this.doc,e.line)),i=0,r=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var s=i+r>>1;if((s?n[2*s-1]:0)>=o)r=s;else{if(!(n[2*s+1]<o)){t=n[2*s+2];break}i=s+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var r=n[t],o=this.getModeAt(e);if("string"==typeof o[t])r[o[t]]&&i.push(r[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var a=r[o[t][s]];a&&i.push(a)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var c=0;c<r._global.length;c++){var l=r._global[c];l.pred(o,this)&&-1==q(i,l.val)&&i.push(l.val)}return i},getStateAfter:function(e,t){var n=this.doc;return Ct(this,(e=mt(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Ci(this,null==e?n.head:"object"==typeof e?gt(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Si(this,gt(this.doc,e),t||"page")},coordsChar:function(e,t){return Ei(this,(e=wi(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=wi(this,{top:e,left:0},t||"page").top,st(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,r=!0),i=tt(this.doc,e)}else i=e;return ki(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-un(i):0)},defaultTextHeight:function(){return Li(this.display)},defaultCharWidth:function(){return Ai(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o=this.display,s=(e=Ci(this,gt(this.doc,e))).bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==i)s=e.top;else if("above"==i||"near"==i){var c=Math.max(o.wrapper.clientHeight,this.doc.height),l=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>c)&&e.top>t.offsetHeight?s=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=c&&(s=e.bottom),a+t.offsetWidth>l&&(a=l-t.offsetWidth)}t.style.top=s+"px",t.style.left=t.style.right="","right"==r?(a=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),n&&cr(this,{left:a,top:s,right:a+t.offsetWidth,bottom:s+t.offsetHeight})},triggerOnKeyDown:jr(pa),triggerOnKeyPress:jr(ga),triggerOnKeyUp:ma,triggerOnMouseDown:jr(Sa),execCommand:function(e){if(ta.hasOwnProperty(e))return ta[e].call(null,this)},triggerElectric:jr((function(e){$a(this,e)})),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var o=gt(this.doc,e),s=0;s<t&&!(o=ec(this.doc,o,r,n,i)).hitSide;++s);return o},moveH:jr((function(e,t){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?ec(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()}),Q)})),deleteH:jr((function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Qs(this,(function(n){var r=ec(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(e,t,n,i){var r=1,o=i;t<0&&(r=-1,t=-t);for(var s=gt(this.doc,e),a=0;a<t;++a){var c=Ci(this,s,"div");if(null==o?o=c.left:c.left=o,(s=tc(this,c,r,n)).hitSide)break}return s},moveV:jr((function(e,t){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(s){if(o)return e<0?s.from():s.to();var a=Ci(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var c=tc(n,a,e,t);return"page"==t&&s==i.sel.primary()&&ur(n,Si(n,c,"div").top-a.top),c}),Q),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]})),findWordAt:function(e){var t=tt(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!n?++i:--n;for(var o=t.charAt(n),s=ae(o,r)?function(e){return ae(e,r)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ae(e)};n>0&&s(t.charAt(n-1));)--n;for(;i<t.length&&s(t.charAt(i));)++i}return new lo(lt(e.line,n),lt(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?A(this.display.cursorDiv,"CodeMirror-overwrite"):P(this.display.cursorDiv,"CodeMirror-overwrite"),Se(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==L(U(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:jr((function(e,t){hr(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Xn(this)-this.display.barHeight,width:e.scrollWidth-Xn(this)-this.display.barWidth,clientHeight:ei(this),clientWidth:Zn(this)}},scrollIntoView:jr((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:lt(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?pr(this,e):mr(this,e.from,e.to,e.margin)})),setSize:jr((function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&mi(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Vi(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,Se(this,"refresh",this)})),operation:function(e){return Mr(this,e)},startOperation:function(){return Pr(this)},endOperation:function(){return Or(this)},refresh:jr((function(){var e=this.display.cachedTextHeight;zi(this),this.curOp.forceUpdate=!0,gi(this),hr(this,this.doc.scrollLeft,this.doc.scrollTop),$r(this.display),(null==e||Math.abs(e-Li(this.display))>.5||this.options.lineWrapping)&&Ui(this),Se(this,"refresh",this)})),swapDoc:jr((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Co(this,e),gi(this),this.display.input.reset(),hr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Ln(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ee(e),e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][i]=r},e.registerGlobalHelper=function(t,i,r,o){e.registerHelper(t,i,o),n[t]._global.push({pred:r,val:o})}}function ec(e,t,n,i,r){var o=t,s=n,a=tt(e,t.line),c=r&&"rtl"==e.direction?-n:n;function l(){var n=t.line+c;return!(n<e.first||n>=e.first+e.size)&&(t=new lt(n,t.ch,t.sticky),a=tt(e,n))}function u(o){var s;if("codepoint"==i){var u=a.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(u))s=null;else{var d=n>0?u>=55296&&u<56320:u>=56320&&u<57343;s=new lt(t.line,Math.max(0,Math.min(a.text.length,t.ch+n*(d?2:1))),-n)}}else s=r?ea(e.cm,a,t,n):Xs(a,t,n);if(null==s){if(o||!l())return!1;t=Zs(r,e.cm,a,t.line,c)}else t=s;return!0}if("char"==i||"codepoint"==i)u();else if("column"==i)u(!0);else if("word"==i||"group"==i)for(var d=null,h="group"==i,p=e.cm&&e.cm.getHelper(t,"wordChars"),f=!0;!(n<0)||u(!f);f=!1){var m=a.text.charAt(t.ch)||"\n",g=ae(m,p)?"w":h&&"\n"==m?"n":!h||/\s/.test(m)?null:"p";if(!h||f||g||(g="s"),d&&d!=g){n<0&&(n=1,u(),t.sticky="after");break}if(g&&(d=g),n>0&&!u(!f))break}var v=Xo(e,t,o,s,!0);return dt(o,v)&&(v.hitSide=!0),v}function tc(e,t,n,i){var r,o,s=e.doc,a=t.left;if("page"==i){var c=Math.min(e.display.wrapper.clientHeight,B(e).innerHeight||s(e).documentElement.clientHeight),l=Math.max(c-.5*Li(e.display),3);r=(n>0?t.bottom:t.top)+n*l}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;(o=Ei(e,a,r)).outside;){if(n<0?r<=0:r>=s.height){o.hitSide=!0;break}r+=5*n}return o}var nc=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new H,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function ic(e,t){var n=oi(e,t.line);if(!n||n.hidden)return null;var i=tt(e.doc,t.line),r=ni(n,i,t.line),o=ve(i,e.doc.direction),s="left";o&&(s=me(o,t.ch)%2?"right":"left");var a=ui(r.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function rc(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function oc(e,t){return t&&(e.bad=!0),e}function sc(e,t,n,i,r){var o="",s=!1,a=e.doc.lineSeparator(),c=!1;function l(e){return function(t){return t.id==e}}function u(){s&&(o+=a,c&&(o+=a),s=c=!1)}function d(e){e&&(u(),o+=e)}function h(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void d(n);var o,p=t.getAttribute("cm-marker");if(p){var f=e.findMarks(lt(i,0),lt(r+1,0),l(+p));return void(f.length&&(o=f[0].find(0))&&d(nt(e.doc,o.from,o.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var m=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;m&&u();for(var g=0;g<t.childNodes.length;g++)h(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(c=!0),m&&(s=!0)}else 3==t.nodeType&&d(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;h(t),t!=n;)t=t.nextSibling,c=!1;return o}function ac(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return oc(e.clipPos(lt(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return cc(o,t,n)}}function cc(e,t,n){var i=e.text.firstChild,r=!1;if(!t||!I(i,t))return oc(lt(ot(e.line),0),!0);if(t==i&&(r=!0,t=i.childNodes[n],n=0,!t)){var o=e.rest?ee(e.rest):e.line;return oc(lt(ot(o),o.text.length),r)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=i;)a=a.parentNode;var c=e.measure,l=c.maps;function u(t,n,i){for(var r=-1;r<(l?l.length:0);r++)for(var o=r<0?c.map:l[r],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==n){var u=ot(r<0?e.line:e.rest[r]),d=o[s]+i;return(i<0||a!=t)&&(d=o[s+(i?1:0)]),lt(u,d)}}}var d=u(s,a,n);if(d)return oc(d,r);for(var h=a.nextSibling,p=s?s.nodeValue.length-n:0;h;h=h.nextSibling){if(d=u(h,h.firstChild,0))return oc(lt(d.line,d.ch-p),r);p+=h.textContent.length}for(var f=a.previousSibling,m=n;f;f=f.previousSibling){if(d=u(f,f.firstChild,-1))return oc(lt(d.line,d.ch+m),r);m+=f.textContent.length}}nc.prototype.init=function(e){var t=this,n=this,i=n.cm,r=n.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function s(e){if(o(e)&&!Ce(i,e)){if(i.somethingSelected())Ga({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Qa(i);Ga({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation((function(){i.setSelections(t.ranges,0,J),i.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var s=qa.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var a=Xa(),c=a.firstChild;Ya(c),i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild),c.value=qa.text.join("\n");var l=L(F(r));D(c),setTimeout((function(){i.display.lineSpace.removeChild(a),l.focus(),l==r&&n.showPrimarySelection()}),50)}}r.contentEditable=!0,Ya(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),be(r,"paste",(function(e){!o(e)||Ce(i,e)||Ja(e,i)||a<=11&&setTimeout(Dr(i,(function(){return t.updateFromDOM()})),20)})),be(r,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),be(r,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),be(r,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),be(r,"touchstart",(function(){return n.forceCompositionEnd()})),be(r,"input",(function(){t.composing||t.readFromDOMSoon()})),be(r,"copy",s),be(r,"cut",s)},nc.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},nc.prototype.prepareSelection=function(){var e=Ji(this.cm,!1);return e.focus=L(F(this.div))==this.div,e},nc.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},nc.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},nc.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var s=ac(t,e.anchorNode,e.anchorOffset),a=ac(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=ut(ft(s,a),r)||0!=ut(pt(s,a),o)){var c=t.display.view,l=r.line>=t.display.viewFrom&&ic(t,r)||{node:c[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&ic(t,o);if(!u){var d=c[c.length-1].measure,h=d.maps?d.maps[d.maps.length-1]:d.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(l&&u){var p,f=e.rangeCount&&e.getRangeAt(0);try{p=E(l.node,l.offset,u.offset,u.node)}catch(m){}p&&(!n&&t.state.focused?(e.collapse(l.node,l.offset),p.collapsed||(e.removeAllRanges(),e.addRange(p))):(e.removeAllRanges(),e.addRange(p)),f&&null==e.anchorNode?e.addRange(f):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},nc.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},nc.prototype.showMultipleSelections=function(e){R(this.cm.display.cursorDiv,e.cursors),R(this.cm.display.selectionDiv,e.selection)},nc.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},nc.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return I(this.div,t)},nc.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&L(F(this.div))==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},nc.prototype.blur=function(){this.div.blur()},nc.prototype.getField=function(){return this.div},nc.prototype.supportsTouch=function(){return!0},nc.prototype.receivedFocus=function(){var e=this,t=this;function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))}this.selectionInEditor()?setTimeout((function(){return e.pollSelection()}),20):Mr(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,n)},nc.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},nc.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(v&&u&&this.cm.display.gutterSpecs.length&&rc(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=ac(t,e.anchorNode,e.anchorOffset),i=ac(t,e.focusNode,e.focusOffset);n&&i&&Mr(t,(function(){Go(t.doc,ho(n,i),J),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)}))}}},nc.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>i.firstLine()&&(s=lt(s.line-1,tt(i.doc,s.line-1).length)),a.ch==tt(i.doc,a.line).text.length&&a.line<i.lastLine()&&(a=lt(a.line+1,0)),s.line<r.viewFrom||a.line>r.viewTo-1)return!1;s.line==r.viewFrom||0==(e=Bi(i,s.line))?(t=ot(r.view[0].line),n=r.view[0].node):(t=ot(r.view[e].line),n=r.view[e-1].node.nextSibling);var c,l,u=Bi(i,a.line);if(u==r.view.length-1?(c=r.viewTo-1,l=r.lineDiv.lastChild):(c=ot(r.view[u+1].line)-1,l=r.view[u+1].node.previousSibling),!n)return!1;for(var d=i.doc.splitLines(sc(i,n,l,t,c)),h=nt(i.doc,lt(t,0),lt(c,tt(i.doc,c).text.length));d.length>1&&h.length>1;)if(ee(d)==ee(h))d.pop(),h.pop(),c--;else{if(d[0]!=h[0])break;d.shift(),h.shift(),t++}for(var p=0,f=0,m=d[0],g=h[0],v=Math.min(m.length,g.length);p<v&&m.charCodeAt(p)==g.charCodeAt(p);)++p;for(var y=ee(d),b=ee(h),k=Math.min(y.length-(1==d.length?p:0),b.length-(1==h.length?p:0));f<k&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)++f;if(1==d.length&&1==h.length&&t==s.line)for(;p&&p>s.ch&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)p--,f++;d[d.length-1]=y.slice(0,y.length-f).replace(/^\u200b+/,""),d[0]=d[0].slice(p).replace(/\u200b+$/,"");var w=lt(t,p),S=lt(c,h.length?ee(h).length-f:0);return d.length>1||d[0]||ut(w,S)?(cs(i.doc,d,w,S,"+input"),!0):void 0},nc.prototype.ensurePolled=function(){this.forceCompositionEnd()},nc.prototype.reset=function(){this.forceCompositionEnd()},nc.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},nc.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},nc.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Mr(this.cm,(function(){return zi(e.cm)}))},nc.prototype.setUneditable=function(e){e.contentEditable="false"},nc.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Dr(this.cm,Ka)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},nc.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},nc.prototype.onContextMenu=function(){},nc.prototype.resetPosition=function(){},nc.prototype.needsContentAttribute=!0;var lc=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new H,this.hasSelection=!1,this.composing=null,this.resetting=!1};function uc(e,t){if((t=t?V(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=L(F(e));t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=a.getValue()}var r;if(e.form&&(be(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var o=e.form;r=o.submit;try{var s=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=s}}catch(c){}}t.finishInit=function(n){n.save=i,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,i(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(we(e.form,"submit",i),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display="none";var a=za((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return a}function dc(e){e.off=we,e.on=be,e.wheelEventPixels=so,e.Doc=Ps,e.splitLines=Ue,e.countColumn=W,e.findColumn=Y,e.isWordChar=se,e.Pass=K,e.signal=Se,e.Line=pn,e.changeEnd=po,e.scrollbarModel=Tr,e.Pos=lt,e.cmpPos=ut,e.modes=We,e.mimeModes=He,e.resolveMode=Ke,e.getMode=Je,e.modeExtensions=$e,e.extendMode=Qe,e.copyState=Ye,e.startState=Ze,e.innerMode=Xe,e.commands=ta,e.keyMap=Vs,e.keyName=Js,e.isModifierKey=Gs,e.lookupKey=qs,e.normalizeKeyMap=Hs,e.StringStream=et,e.SharedTextMarker=ws,e.TextMarker=bs,e.LineWidget=ms,e.e_preventDefault=Pe,e.e_stopPropagation=Oe,e.e_stop=_e,e.addClass=A,e.contains=I,e.rmClass=P,e.keyNames=Us}lc.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var r=this.textarea;function o(e){if(!Ce(i,e)){if(i.somethingSelected())Ga({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=Qa(i);Ga({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,J):(n.prevInput="",r.value=t.text.join("\n"),D(r))}"cut"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(r.style.width="0px"),be(r,"input",(function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),be(r,"paste",(function(e){Ce(i,e)||Ja(e,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),be(r,"cut",o),be(r,"copy",o),be(e.scroller,"paste",(function(t){if(!Jn(e,t)&&!Ce(i,t)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,r.dispatchEvent(o)}})),be(e.lineSpace,"selectstart",(function(t){Jn(e,t)||Pe(t)})),be(r,"compositionstart",(function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}})),be(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},lc.prototype.createField=function(e){this.wrapper=Xa(),this.textarea=this.wrapper.firstChild;var t=this.cm.options;Ya(this.textarea,t.spellcheck,t.autocorrect,t.autocapitalize)},lc.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},lc.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=Ji(e);if(e.options.moveInputWithCursor){var r=Ci(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-o.left))}return i},lc.prototype.showSelection=function(e){var t=this.cm.display;R(t.cursorDiv,e.cursors),R(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},lc.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var t=this.cm;if(this.resetting=!0,t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&D(this.textarea),s&&a>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null));this.resetting=!1}},lc.prototype.getField=function(){return this.textarea},lc.prototype.supportsTouch=function(){return!1},lc.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||L(F(this.textarea))!=this.textarea))try{this.textarea.focus()}catch(e){}},lc.prototype.blur=function(){this.textarea.blur()},lc.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},lc.prototype.receivedFocus=function(){this.slowPoll()},lc.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},lc.prototype.fastPoll=function(){var e=!1,t=this;function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}t.pollingFast=!0,t.polling.set(20,n)},lc.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||this.resetting||!t.state.focused||Fe(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===r||b&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var c=0,l=Math.min(i.length,r.length);c<l&&i.charCodeAt(c)==r.charCodeAt(c);)++c;return Mr(t,(function(){Ka(t,r.slice(c),i.length-c,null,e.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},lc.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},lc.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},lc.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,r=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=Fi(n,e),l=i.scroller.scrollTop;if(o&&!h){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&Dr(n,Go)(n.doc,ho(o),J);var u,d=r.style.cssText,p=t.wrapper.style.cssText,f=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",c&&(u=r.ownerDocument.defaultView.scrollY),i.input.focus(),c&&r.ownerDocument.defaultView.scrollTo(null,u),i.input.reset(),n.somethingSelected()||(r.value=t.prevInput=" "),t.contextMenuPending=v,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),s&&a>=9&&g(),T){_e(e);var m=function(){we(window,"mouseup",m),setTimeout(v,20)};be(window,"mouseup",m)}else setTimeout(v,50)}function g(){if(null!=r.selectionStart){var e=n.somethingSelected(),o="\u200b"+(e?r.value:"");r.value="\u21da",r.value=o,t.prevInput=e?"":"\u200b",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=p,r.style.cssText=d,s&&a<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=l),null!=r.selectionStart)){(!s||s&&a<9)&&g();var e=0,o=function(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&"\u200b"==t.prevInput?Dr(n,es)(n):e++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(o,200)}}},lc.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},lc.prototype.setUneditable=function(){},lc.prototype.needsContentAttribute=!1,Ua(za),Za(za);var hc="iter insert remove copy getEditor constructor".split(" ");for(var pc in Ps.prototype)Ps.prototype.hasOwnProperty(pc)&&q(hc,pc)<0&&(za.prototype[pc]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ps.prototype[pc]));return Ee(Ps),za.inputStyles={textarea:lc,contenteditable:nc},za.defineMode=function(e){za.defaults.mode||"null"==e||(za.defaults.mode=e),qe.apply(this,arguments)},za.defineMIME=Ge,za.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),za.defineMIME("text/plain","null"),za.defineExtension=function(e,t){za.prototype[e]=t},za.defineDocExtension=function(e,t){Ps.prototype[e]=t},za.fromTextArea=uc,dc(za),za.version="5.65.19",za}()},6249:(e,t,n)=>{"use strict";var i=n(4205);t.f=i},6337:(e,t,n)=>{"use strict";var i=n(4606),r=n(8061);e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},6381:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},6383:(e,t,n)=>{"use strict";var i=n(7800),r=n(4702),o=n(2203),s=n(8366),a=n(2545),c=n(3570),l=n(6521),u=n(8445),d=n(4071),h=n(1363),p=n(6929),f=n(7555),m=n(5099),g=n(8777),v=n(2582),y=n(4662),b=n(3734),k=n(6434),w=n(4136),S=n(6839),C=n(7965),T=n(607),x=n(1731),E=n(8143),P=n(5718),O=n(3220),R=n(9203),_=n(6045),N=n(6663),I=n(6094),L=n(4205),A=n(6249),M=n(3005),D=n(3684),j=n(473),U=n(1543),F=n(3239).forEach,B=_("hidden"),z="Symbol",V="prototype",W=U.set,H=U.getterFor(z),q=Object[V],G=r.Symbol,K=G&&G[V],J=r.RangeError,$=r.TypeError,Q=r.QObject,Y=C.f,X=T.f,Z=w.f,ee=E.f,te=s([].push),ne=R("symbols"),ie=R("op-symbols"),re=R("wks"),oe=!Q||!Q[V]||!Q[V].findChild,se=function(e,t,n){var i=Y(q,t);i&&delete q[t],X(e,t,n),i&&e!==q&&X(q,t,i)},ae=c&&u((function(){return 7!==y(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?se:X,ce=function(e,t){var n=ne[e]=y(K);return W(n,{type:z,tag:e,description:t}),c||(n.description=t),n},le=function(e,t,n){e===q&&le(ie,t,n),p(e);var i=m(t);return p(n),d(ne,i)?(n.enumerable?(d(e,B)&&e[B][i]&&(e[B][i]=!1),n=y(n,{enumerable:v(0,!1)})):(d(e,B)||X(e,B,v(1,y(null))),e[B][i]=!0),ae(e,i,n)):X(e,i,n)},ue=function(e,t){p(e);var n=f(t),i=b(n).concat(fe(n));return F(i,(function(t){c&&!o(de,n,t)||le(e,t,n[t])})),e},de=function(e){var t=m(e),n=o(ee,this,t);return!(this===q&&d(ne,t)&&!d(ie,t))&&(!(n||!d(this,t)||!d(ne,t)||d(this,B)&&this[B][t])||n)},he=function(e,t){var n=f(e),i=m(t);if(n!==q||!d(ne,i)||d(ie,i)){var r=Y(n,i);return!r||!d(ne,i)||d(n,B)&&n[B][i]||(r.enumerable=!0),r}},pe=function(e){var t=Z(f(e)),n=[];return F(t,(function(e){d(ne,e)||d(N,e)||te(n,e)})),n},fe=function(e){var t=e===q,n=Z(t?ie:f(e)),i=[];return F(n,(function(e){!d(ne,e)||t&&!d(q,e)||te(i,ne[e])})),i};l||(P(K=(G=function(){if(h(K,this))throw new $("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=I(e),n=function(e){var i=void 0===this?r:this;i===q&&o(n,ie,e),d(i,B)&&d(i[B],t)&&(i[B][t]=!1);var s=v(1,e);try{ae(i,t,s)}catch(a){if(!(a instanceof J))throw a;se(i,t,s)}};return c&&oe&&ae(q,t,{configurable:!0,set:n}),ce(t,e)})[V],"toString",(function(){return H(this).tag})),P(G,"withoutSetter",(function(e){return ce(I(e),e)})),E.f=de,T.f=le,x.f=ue,C.f=he,k.f=w.f=pe,S.f=fe,A.f=function(e){return ce(L(e),e)},c&&(O(K,"description",{configurable:!0,get:function(){return H(this).description}}),a||P(q,"propertyIsEnumerable",de,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!l,sham:!l},{Symbol:G}),F(b(re),(function(e){M(e)})),i({target:z,stat:!0,forced:!l},{useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),i({target:"Object",stat:!0,forced:!l,sham:!c},{create:function(e,t){return void 0===t?y(e):ue(y(e),t)},defineProperty:le,defineProperties:ue,getOwnPropertyDescriptor:he}),i({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:pe}),D(),j(G,z),N[B]=!0},6434:(e,t,n)=>{"use strict";var i=n(9482),r=n(2721).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},6482:(e,t,n)=>{!function(e){e.defineOption("autoCloseTags",!1,(function(t,n,r){if(r!=e.Init&&r&&t.removeKeyMap("autoCloseTags"),n){var s={name:"autoCloseTags"};"object"==typeof n&&!1===n.whenClosing||(s["'/'"]=function(e){return o(e)}),"object"==typeof n&&!1===n.whenOpening||(s["'>'"]=function(e){return i(e)}),t.addKeyMap(s)}}));var t=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],n=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function i(i){if(i.getOption("disableInput"))return e.Pass;for(var r=i.listSelections(),o=[],c=i.getOption("autoCloseTags"),l=0;l<r.length;l++){if(!r[l].empty())return e.Pass;var u=r[l].head,d=i.getTokenAt(u),h=e.innerMode(i.getMode(),d.state),p=h.state,f=h.mode.xmlCurrentTag&&h.mode.xmlCurrentTag(p),m=f&&f.name;if(!m)return e.Pass;var g="html"==h.mode.configuration,v="object"==typeof c&&c.dontCloseTags||g&&t,y="object"==typeof c&&c.indentTags||g&&n;d.end>u.ch&&(m=m.slice(0,m.length-d.end+u.ch));var b=m.toLowerCase();if(!m||"string"==d.type&&(d.end!=u.ch||!/[\"\']/.test(d.string.charAt(d.string.length-1))||1==d.string.length)||"tag"==d.type&&f.close||d.string.indexOf("/")==u.ch-d.start-1||v&&s(v,b)>-1||a(i,h.mode.xmlCurrentContext&&h.mode.xmlCurrentContext(p)||[],m,u,!0))return e.Pass;var k="object"==typeof c&&c.emptyTags;if(k&&s(k,m)>-1)o[l]={text:"/>",newPos:e.Pos(u.line,u.ch+2)};else{var w=y&&s(y,b)>-1;o[l]={indent:w,text:">"+(w?"\n\n":"")+"</"+m+">",newPos:w?e.Pos(u.line+1,0):e.Pos(u.line,u.ch+1)}}}var S="object"==typeof c&&c.dontIndentOnAutoClose;for(l=r.length-1;l>=0;l--){var C=o[l];i.replaceRange(C.text,r[l].head,r[l].anchor,"+insert");var T=i.listSelections().slice(0);T[l]={head:C.newPos,anchor:C.newPos},i.setSelections(T),!S&&C.indent&&(i.indentLine(C.newPos.line,null,!0),i.indentLine(C.newPos.line+1,null,!0))}}function r(t,n){for(var i=t.listSelections(),r=[],o=n?"/":"</",s=t.getOption("autoCloseTags"),c="object"==typeof s&&s.dontIndentOnSlash,l=0;l<i.length;l++){if(!i[l].empty())return e.Pass;var u=i[l].head,d=t.getTokenAt(u),h=e.innerMode(t.getMode(),d.state),p=h.state;if(n&&("string"==d.type||"<"!=d.string.charAt(0)||d.start!=u.ch-1))return e.Pass;var f,m="xml"!=h.mode.name&&"htmlmixed"==t.getMode().name;if(m&&"javascript"==h.mode.name)f=o+"script";else if(m&&"css"==h.mode.name)f=o+"style";else{var g=h.mode.xmlCurrentContext&&h.mode.xmlCurrentContext(p),v=g.length?g[g.length-1]:"";if(!g||g.length&&a(t,g,v,u))return e.Pass;f=o+v}">"!=t.getLine(u.line).charAt(d.end)&&(f+=">"),r[l]=f}if(t.replaceSelections(r),i=t.listSelections(),!c)for(l=0;l<i.length;l++)(l==i.length-1||i[l].head.line<i[l+1].head.line)&&t.indentLine(i[l].head.line)}function o(t){return t.getOption("disableInput")?e.Pass:r(t,!0)}function s(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;++n)if(e[n]==t)return n;return-1}function a(t,n,i,r,o){if(!e.scanForClosingTag)return!1;var s=Math.min(t.lastLine()+1,r.line+500),a=e.scanForClosingTag(t,r,null,s);if(!a||a.tag!=i)return!1;for(var c=o?1:0,l=n.length-1;l>=0&&n[l]==i;l--)++c;for(r=a.to,l=1;l<c;l++){var u=e.scanForClosingTag(t,r,null,s);if(!u||u.tag!=i)return!1;r=u.to}return!0}e.commands.closeTag=function(e){return r(e)}}(n(6246),n(4044))},6521:(e,t,n)=>{"use strict";var i=n(5145),r=n(8445),o=n(4702).String;e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol("symbol detection");return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},6663:e=>{"use strict";e.exports={}},6684:(e,t,n)=>{"use strict";var i=n(7800),r=n(3239).map;i({target:"Array",proto:!0,forced:!n(1903)("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},6756:(e,t,n)=>{"use strict";var i=n(7800),r=n(8445),o=n(5334),s=n(5900),a=n(5231),c=n(5612),l=n(1348),u=n(4794),d=n(7403),h=n(1903),p=n(4205),f=n(5145),m=p("isConcatSpreadable"),g=f>=51||!r((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:o(e)};i({target:"Array",proto:!0,arity:1,forced:!g||!h("concat")},{concat:function(e){var t,n,i,r,o,s=a(this),h=d(s,0),p=0;for(t=-1,i=arguments.length;t<i;t++)if(v(o=-1===t?s:arguments[t]))for(r=c(o),l(p+r),n=0;n<r;n++,p++)n in o&&u(h,p,o[n]);else l(p+1),u(h,p++,o);return h.length=p,h}})},6779:e=>{"use strict";e.exports=function(e){return null===e||void 0===e}},6839:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},6929:(e,t,n)=>{"use strict";var i=n(5900),r=String,o=TypeError;e.exports=function(e){if(i(e))return e;throw new o(r(e)+" is not an object")}},6962:e=>{"use strict";e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},7108:(e,t,n)=>{"use strict";var i=n(8366),r=n(4300),o=n(8777),s=n(6962),a=i("".replace),c=RegExp("^["+s+"]+"),l=RegExp("(^|[^"+s+"])["+s+"]+$"),u=function(e){return function(t){var n=o(r(t));return 1&e&&(n=a(n,c,"")),2&e&&(n=a(n,l,"$1")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},7209:(e,t,n)=>{"use strict";var i=n(6208);e.exports=i},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,c=e[a],l=a+1,u=e[l];if(0>o(c,n))l<r&&0>o(u,c)?(e[i]=u,e[l]=n,i=l):(e[i]=c,e[a]=n,i=a);else{if(!(l<r&&0>o(u,n)))break e;e[i]=u,e[l]=n,i=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(l,t)}t=i(u)}}function w(e){if(g=!1,k(e),!m)if(null!==i(l))m=!0,L(S);else{var t=i(u);null!==t&&A(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(E),E=-1),f=!0;var o=p;try{for(k(n),h=i(l);null!==h&&(!(h.expirationTime>n)||e&&!R());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===i(l)&&r(l),k(n)}else r(l);h=i(l)}if(null!==h)var c=!0;else{var d=i(u);null!==d&&A(w,d.startTime-n),c=!1}return c}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,T=!1,x=null,E=-1,P=5,O=-1;function R(){return!(t.unstable_now()-O<P)}function _(){if(null!==x){var e=t.unstable_now();O=e;var n=!0;try{n=x(!0,e)}finally{n?C():(T=!1,x=null)}}else T=!1}if("function"===typeof b)C=function(){b(_)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,I=N.port2;N.port1.onmessage=_,C=function(){I.postMessage(null)}}else C=function(){v(_,0)};function L(e){x=e,T||(T=!0,C())}function A(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,L(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===i(l)&&e===i(u)&&(g?(y(E),E=-1):g=!0,A(w,o-s))):(e.sortIndex=a,n(l,e),m||f||(m=!0,L(S))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7403:(e,t,n)=>{"use strict";var i=n(3595);e.exports=function(e,t){return new(i(e))(0===t?0:t)}},7418:(e,t,n)=>{"use strict";n(8285);var i=n(5313);e.exports=i.parseFloat},7499:(e,t,n)=>{"use strict";var i=n(1338);e.exports=i},7519:(e,t,n)=>{"use strict";var i=n(4721),r=n(8777),o=n(4300),s=RangeError;e.exports=function(e){var t=r(o(this)),n="",a=i(e);if(a<0||a===1/0)throw new s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},7555:(e,t,n)=>{"use strict";var i=n(8365),r=n(4300);e.exports=function(e){return i(r(e))}},7795:(e,t,n)=>{"use strict";var i=n(8885);e.exports="NODE"===i},7800:(e,t,n)=>{"use strict";var i=n(4702),r=n(375),o=n(4774),s=n(9607),a=n(7965).f,c=n(4582),l=n(5313),u=n(1566),d=n(9825),h=n(4071);n(8531);var p=function(e){var t=function(n,i,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,i)}return new e(n,i,o)}return r(e,this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var n,r,f,m,g,v,y,b,k,w=e.target,S=e.global,C=e.stat,T=e.proto,x=S?i:C?i[w]:i[w]&&i[w].prototype,E=S?l:l[w]||d(l,w,{})[w],P=E.prototype;for(m in t)r=!(n=c(S?m:w+(C?".":"#")+m,e.forced))&&x&&h(x,m),v=E[m],r&&(y=e.dontCallGetSet?(k=a(x,m))&&k.value:x[m]),g=r&&y?y:t[m],(n||T||typeof v!=typeof g)&&(b=e.bind&&r?u(g,i):e.wrap&&r?p(g):T&&s(g)?o(g):g,(e.sham||g&&g.sham||v&&v.sham)&&d(b,"sham",!0),d(E,m,b),T&&(h(l,f=w+"Prototype")||d(l,f,{}),d(l[f],m,g),e.real&&P&&(n||!P[m])&&d(P,m,g)))}},7886:(e,t,n)=>{"use strict";var i=n(8445);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},7965:(e,t,n)=>{"use strict";var i=n(3570),r=n(2203),o=n(8143),s=n(2582),a=n(7555),c=n(5099),l=n(4071),u=n(8331),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=a(e),t=c(t),u)try{return d(e,t)}catch(n){}if(l(e,t))return s(!r(o.f,e,t),e[t])}},8061:(e,t,n)=>{"use strict";var i=n(4606),r=n(9607),o=n(2202),s=n(4205)("toStringTag"),a=Object,c="Arguments"===o(function(){return arguments}());e.exports=i?o:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=a(e),s))?n:c?o(t):"Object"===(i=o(t))&&r(t.callee)?"Arguments":i}},8118:(e,t,n)=>{"use strict";var i=n(4702),r=n(5313);e.exports=function(e,t){var n=r[e+"Prototype"],o=n&&n[t];if(o)return o;var s=i[e],a=s&&s.prototype;return a&&a[t]}},8143:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},8149:(e,t,n)=>{"use strict";var i=n(7418);e.exports=i},8237:(e,t,n)=>{"use strict";n(6383),n(2224),n(1426),n(5916),n(8591)},8285:(e,t,n)=>{"use strict";var i=n(7800),r=n(3254);i({global:!0,forced:parseFloat!==r},{parseFloat:r})},8287:(e,t,n)=>{!function(e){"use strict";e.defineMode("javascript",(function(t,n){var i,r,o=t.indentUnit,s=n.statementIndent,a=n.jsonld,c=n.json||a,l=!1!==n.trackScope,u=n.typescript,d=n.wordCharacters||/[\w$\xa1-\uffff]/,h=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("keyword d"),o=e("operator"),s={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:e("new"),delete:i,void:i,throw:i,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:e("this"),class:e("class"),super:e("atom"),yield:i,export:e("export"),import:e("import"),extends:i,await:i}}(),p=/[+\-*&%=<>!?|~^@]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function m(e){for(var t,n=!1,i=!1;null!=(t=e.next());){if(!n){if("/"==t&&!i)return;"["==t?i=!0:i&&"]"==t&&(i=!1)}n=!n&&"\\"==t}}function g(e,t,n){return i=e,r=n,t}function v(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=y(n),t.tokenize(e,t);if("."==n&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return g("number","number");if("."==n&&e.match(".."))return g("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return g(n);if("="==n&&e.eat(">"))return g("=>","operator");if("0"==n&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return g("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),g("number","number");if("/"==n)return e.eat("*")?(t.tokenize=b,b(e,t)):e.eat("/")?(e.skipToEnd(),g("comment","comment")):rt(e,t,1)?(m(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),g("regexp","string-2")):(e.eat("="),g("operator","operator",e.current()));if("`"==n)return t.tokenize=k,k(e,t);if("#"==n&&"!"==e.peek())return e.skipToEnd(),g("meta","meta");if("#"==n&&e.eatWhile(d))return g("variable","property");if("<"==n&&e.match("!--")||"-"==n&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),g("comment","comment");if(p.test(n))return">"==n&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=n&&"="!=n||e.eat("="):/[<>*+\-|&?]/.test(n)&&(e.eat(n),">"==n&&e.eat(n))),"?"==n&&e.eat(".")?g("."):g("operator","operator",e.current());if(d.test(n)){e.eatWhile(d);var i=e.current();if("."!=t.lastType){if(h.propertyIsEnumerable(i)){var r=h[i];return g(r.type,r.style,i)}if("async"==i&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return g("async","keyword",i)}return g("variable","variable",i)}}function y(e){return function(t,n){var i,r=!1;if(a&&"@"==t.peek()&&t.match(f))return n.tokenize=v,g("jsonld-keyword","meta");for(;null!=(i=t.next())&&(i!=e||r);)r=!r&&"\\"==i;return r||(n.tokenize=v),g("string","string")}}function b(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=v;break}i="*"==n}return g("comment","comment")}function k(e,t){for(var n,i=!1;null!=(n=e.next());){if(!i&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=v;break}i=!i&&"\\"==n}return g("quasi","string-2",e.current())}var w="([{}])";function S(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(u){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));i&&(n=i.index)}for(var r=0,o=!1,s=n-1;s>=0;--s){var a=e.string.charAt(s),c=w.indexOf(a);if(c>=0&&c<3){if(!r){++s;break}if(0==--r){"("==a&&(o=!0);break}}else if(c>=3&&c<6)++r;else if(d.test(a))o=!0;else if(/["'\/`]/.test(a))for(;;--s){if(0==s)return;if(e.string.charAt(s-1)==a&&"\\"!=e.string.charAt(s-2)){s--;break}}else if(o&&!r){++s;break}}o&&!r&&(t.fatArrowAt=s)}}var C={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function T(e,t,n,i,r,o){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function x(e,t){if(!l)return!1;for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var i=e.context;i;i=i.prev)for(n=i.vars;n;n=n.next)if(n.name==t)return!0}function E(e,t,n,i,r){var o=e.cc;for(P.state=e,P.stream=r,P.marked=null,P.cc=o,P.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():c?q:W)(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return P.marked?P.marked:"variable"==n&&x(e,i)?"variable-2":t}}var P={state:null,column:null,marked:null,cc:null};function O(){for(var e=arguments.length-1;e>=0;e--)P.cc.push(arguments[e])}function R(){return O.apply(null,arguments),!0}function _(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function N(e){var t=P.state;if(P.marked="def",l){if(t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var i=I(e,t.context);if(null!=i)return void(t.context=i)}else if(!_(e,t.localVars))return void(t.localVars=new M(e,t.localVars));n.globalVars&&!_(e,t.globalVars)&&(t.globalVars=new M(e,t.globalVars))}}function I(e,t){if(t){if(t.block){var n=I(e,t.prev);return n?n==t.prev?t:new A(n,t.vars,!0):null}return _(e,t.vars)?t:new A(t.prev,new M(e,t.vars),!1)}return null}function L(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function A(e,t,n){this.prev=e,this.vars=t,this.block=n}function M(e,t){this.name=e,this.next=t}var D=new M("this",new M("arguments",null));function j(){P.state.context=new A(P.state.context,P.state.localVars,!1),P.state.localVars=D}function U(){P.state.context=new A(P.state.context,P.state.localVars,!0),P.state.localVars=null}function F(){P.state.localVars=P.state.context.vars,P.state.context=P.state.context.prev}function B(e,t){var n=function(){var n=P.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new T(i,P.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function z(){var e=P.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function V(e){function t(n){return n==e?R():";"==e||"}"==n||")"==n||"]"==n?O():R(t)}return t}function W(e,t){return"var"==e?R(B("vardef",t),Oe,V(";"),z):"keyword a"==e?R(B("form"),K,W,z):"keyword b"==e?R(B("form"),W,z):"keyword d"==e?P.stream.match(/^\s*$/,!1)?R():R(B("stat"),$,V(";"),z):"debugger"==e?R(V(";")):"{"==e?R(B("}"),U,he,z,F):";"==e?R():"if"==e?("else"==P.state.lexical.info&&P.state.cc[P.state.cc.length-1]==z&&P.state.cc.pop()(),R(B("form"),K,W,z,Ae)):"function"==e?R(Ue):"for"==e?R(B("form"),U,Me,W,F,z):"class"==e||u&&"interface"==t?(P.marked="keyword",R(B("form","class"==e?e:t),We,z)):"variable"==e?u&&"declare"==t?(P.marked="keyword",R(W)):u&&("module"==t||"enum"==t||"type"==t)&&P.stream.match(/^\s*\w/,!1)?(P.marked="keyword","enum"==t?R(tt):"type"==t?R(Be,V("operator"),ve,V(";")):R(B("form"),Re,V("{"),B("}"),he,z,z)):u&&"namespace"==t?(P.marked="keyword",R(B("form"),q,W,z)):u&&"abstract"==t?(P.marked="keyword",R(W)):R(B("stat"),oe):"switch"==e?R(B("form"),K,V("{"),B("}","switch"),U,he,z,z,F):"case"==e?R(q,V(":")):"default"==e?R(V(":")):"catch"==e?R(B("form"),j,H,W,z,F):"export"==e?R(B("stat"),Ke,z):"import"==e?R(B("stat"),$e,z):"async"==e?R(W):"@"==t?R(q,W):O(B("stat"),q,V(";"),z)}function H(e){if("("==e)return R(ze,V(")"))}function q(e,t){return J(e,t,!1)}function G(e,t){return J(e,t,!0)}function K(e){return"("!=e?O():R(B(")"),$,V(")"),z)}function J(e,t,n){if(P.state.fatArrowAt==P.stream.start){var i=n?te:ee;if("("==e)return R(j,B(")"),ue(ze,")"),z,V("=>"),i,F);if("variable"==e)return O(j,Re,V("=>"),i,F)}var r=n?Y:Q;return C.hasOwnProperty(e)?R(r):"function"==e?R(Ue,r):"class"==e||u&&"interface"==t?(P.marked="keyword",R(B("form"),Ve,z)):"keyword c"==e||"async"==e?R(n?G:q):"("==e?R(B(")"),$,V(")"),z,r):"operator"==e||"spread"==e?R(n?G:q):"["==e?R(B("]"),et,z,r):"{"==e?de(ae,"}",null,r):"quasi"==e?O(X,r):"new"==e?R(ne(n)):R()}function $(e){return e.match(/[;\}\)\],]/)?O():O(q)}function Q(e,t){return","==e?R($):Y(e,t,!1)}function Y(e,t,n){var i=0==n?Q:Y,r=0==n?q:G;return"=>"==e?R(j,n?te:ee,F):"operator"==e?/\+\+|--/.test(t)||u&&"!"==t?R(i):u&&"<"==t&&P.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?R(B(">"),ue(ve,">"),z,i):"?"==t?R(q,V(":"),r):R(r):"quasi"==e?O(X,i):";"!=e?"("==e?de(G,")","call",i):"."==e?R(se,i):"["==e?R(B("]"),$,V("]"),z,i):u&&"as"==t?(P.marked="keyword",R(ve,i)):"regexp"==e?(P.state.lastType=P.marked="operator",P.stream.backUp(P.stream.pos-P.stream.start-1),R(r)):void 0:void 0}function X(e,t){return"quasi"!=e?O():"${"!=t.slice(t.length-2)?R(X):R($,Z)}function Z(e){if("}"==e)return P.marked="string-2",P.state.tokenize=k,R(X)}function ee(e){return S(P.stream,P.state),O("{"==e?W:q)}function te(e){return S(P.stream,P.state),O("{"==e?W:G)}function ne(e){return function(t){return"."==t?R(e?re:ie):"variable"==t&&u?R(xe,e?Y:Q):O(e?G:q)}}function ie(e,t){if("target"==t)return P.marked="keyword",R(Q)}function re(e,t){if("target"==t)return P.marked="keyword",R(Y)}function oe(e){return":"==e?R(z,W):O(Q,V(";"),z)}function se(e){if("variable"==e)return P.marked="property",R()}function ae(e,t){return"async"==e?(P.marked="property",R(ae)):"variable"==e||"keyword"==P.style?(P.marked="property","get"==t||"set"==t?R(ce):(u&&P.state.fatArrowAt==P.stream.start&&(n=P.stream.match(/^\s*:\s*/,!1))&&(P.state.fatArrowAt=P.stream.pos+n[0].length),R(le))):"number"==e||"string"==e?(P.marked=a?"property":P.style+" property",R(le)):"jsonld-keyword"==e?R(le):u&&L(t)?(P.marked="keyword",R(ae)):"["==e?R(q,pe,V("]"),le):"spread"==e?R(G,le):"*"==t?(P.marked="keyword",R(ae)):":"==e?O(le):void 0;var n}function ce(e){return"variable"!=e?O(le):(P.marked="property",R(Ue))}function le(e){return":"==e?R(G):"("==e?O(Ue):void 0}function ue(e,t,n){function i(r,o){if(n?n.indexOf(r)>-1:","==r){var s=P.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),R((function(n,i){return n==t||i==t?O():O(e)}),i)}return r==t||o==t?R():n&&n.indexOf(";")>-1?O(e):R(V(t))}return function(n,r){return n==t||r==t?R():O(e,i)}}function de(e,t,n){for(var i=3;i<arguments.length;i++)P.cc.push(arguments[i]);return R(B(t,n),ue(e,t),z)}function he(e){return"}"==e?R():O(W,he)}function pe(e,t){if(u){if(":"==e)return R(ve);if("?"==t)return R(pe)}}function fe(e,t){if(u&&(":"==e||"in"==t))return R(ve)}function me(e){if(u&&":"==e)return P.stream.match(/^\s*\w+\s+is\b/,!1)?R(q,ge,ve):R(ve)}function ge(e,t){if("is"==t)return P.marked="keyword",R()}function ve(e,t){return"keyof"==t||"typeof"==t||"infer"==t||"readonly"==t?(P.marked="keyword",R("typeof"==t?G:ve)):"variable"==e||"void"==t?(P.marked="type",R(Te)):"|"==t||"&"==t?R(ve):"string"==e||"number"==e||"atom"==e?R(Te):"["==e?R(B("]"),ue(ve,"]",","),z,Te):"{"==e?R(B("}"),be,z,Te):"("==e?R(ue(Ce,")"),ye,Te):"<"==e?R(ue(ve,">"),ve):"quasi"==e?O(we,Te):void 0}function ye(e){if("=>"==e)return R(ve)}function be(e){return e.match(/[\}\)\]]/)?R():","==e||";"==e?R(be):O(ke,be)}function ke(e,t){return"variable"==e||"keyword"==P.style?(P.marked="property",R(ke)):"?"==t||"number"==e||"string"==e?R(ke):":"==e?R(ve):"["==e?R(V("variable"),fe,V("]"),ke):"("==e?O(Fe,ke):e.match(/[;\}\)\],]/)?void 0:R()}function we(e,t){return"quasi"!=e?O():"${"!=t.slice(t.length-2)?R(we):R(ve,Se)}function Se(e){if("}"==e)return P.marked="string-2",P.state.tokenize=k,R(we)}function Ce(e,t){return"variable"==e&&P.stream.match(/^\s*[?:]/,!1)||"?"==t?R(Ce):":"==e?R(ve):"spread"==e?R(Ce):O(ve)}function Te(e,t){return"<"==t?R(B(">"),ue(ve,">"),z,Te):"|"==t||"."==e||"&"==t?R(ve):"["==e?R(ve,V("]"),Te):"extends"==t||"implements"==t?(P.marked="keyword",R(ve)):"?"==t?R(ve,V(":"),ve):void 0}function xe(e,t){if("<"==t)return R(B(">"),ue(ve,">"),z,Te)}function Ee(){return O(ve,Pe)}function Pe(e,t){if("="==t)return R(ve)}function Oe(e,t){return"enum"==t?(P.marked="keyword",R(tt)):O(Re,pe,Ie,Le)}function Re(e,t){return u&&L(t)?(P.marked="keyword",R(Re)):"variable"==e?(N(t),R()):"spread"==e?R(Re):"["==e?de(Ne,"]"):"{"==e?de(_e,"}"):void 0}function _e(e,t){return"variable"!=e||P.stream.match(/^\s*:/,!1)?("variable"==e&&(P.marked="property"),"spread"==e?R(Re):"}"==e?O():"["==e?R(q,V("]"),V(":"),_e):R(V(":"),Re,Ie)):(N(t),R(Ie))}function Ne(){return O(Re,Ie)}function Ie(e,t){if("="==t)return R(G)}function Le(e){if(","==e)return R(Oe)}function Ae(e,t){if("keyword b"==e&&"else"==t)return R(B("form","else"),W,z)}function Me(e,t){return"await"==t?R(Me):"("==e?R(B(")"),De,z):void 0}function De(e){return"var"==e?R(Oe,je):"variable"==e?R(je):O(je)}function je(e,t){return")"==e?R():";"==e?R(je):"in"==t||"of"==t?(P.marked="keyword",R(q,je)):O(q,je)}function Ue(e,t){return"*"==t?(P.marked="keyword",R(Ue)):"variable"==e?(N(t),R(Ue)):"("==e?R(j,B(")"),ue(ze,")"),z,me,W,F):u&&"<"==t?R(B(">"),ue(Ee,">"),z,Ue):void 0}function Fe(e,t){return"*"==t?(P.marked="keyword",R(Fe)):"variable"==e?(N(t),R(Fe)):"("==e?R(j,B(")"),ue(ze,")"),z,me,F):u&&"<"==t?R(B(">"),ue(Ee,">"),z,Fe):void 0}function Be(e,t){return"keyword"==e||"variable"==e?(P.marked="type",R(Be)):"<"==t?R(B(">"),ue(Ee,">"),z):void 0}function ze(e,t){return"@"==t&&R(q,ze),"spread"==e?R(ze):u&&L(t)?(P.marked="keyword",R(ze)):u&&"this"==e?R(pe,Ie):O(Re,pe,Ie)}function Ve(e,t){return"variable"==e?We(e,t):He(e,t)}function We(e,t){if("variable"==e)return N(t),R(He)}function He(e,t){return"<"==t?R(B(">"),ue(Ee,">"),z,He):"extends"==t||"implements"==t||u&&","==e?("implements"==t&&(P.marked="keyword"),R(u?ve:q,He)):"{"==e?R(B("}"),qe,z):void 0}function qe(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||u&&L(t))&&P.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1)?(P.marked="keyword",R(qe)):"variable"==e||"keyword"==P.style?(P.marked="property",R(Ge,qe)):"number"==e||"string"==e?R(Ge,qe):"["==e?R(q,pe,V("]"),Ge,qe):"*"==t?(P.marked="keyword",R(qe)):u&&"("==e?O(Fe,qe):";"==e||","==e?R(qe):"}"==e?R():"@"==t?R(q,qe):void 0}function Ge(e,t){if("!"==t)return R(Ge);if("?"==t)return R(Ge);if(":"==e)return R(ve,Ie);if("="==t)return R(G);var n=P.state.lexical.prev;return O(n&&"interface"==n.info?Fe:Ue)}function Ke(e,t){return"*"==t?(P.marked="keyword",R(Ze,V(";"))):"default"==t?(P.marked="keyword",R(q,V(";"))):"{"==e?R(ue(Je,"}"),Ze,V(";")):O(W)}function Je(e,t){return"as"==t?(P.marked="keyword",R(V("variable"))):"variable"==e?O(G,Je):void 0}function $e(e){return"string"==e?R():"("==e?O(q):"."==e?O(Q):O(Qe,Ye,Ze)}function Qe(e,t){return"{"==e?de(Qe,"}"):("variable"==e&&N(t),"*"==t&&(P.marked="keyword"),R(Xe))}function Ye(e){if(","==e)return R(Qe,Ye)}function Xe(e,t){if("as"==t)return P.marked="keyword",R(Qe)}function Ze(e,t){if("from"==t)return P.marked="keyword",R(q)}function et(e){return"]"==e?R():O(ue(G,"]"))}function tt(){return O(B("form"),Re,V("{"),B("}"),ue(nt,"}"),z,z)}function nt(){return O(Re,Ie)}function it(e,t){return"operator"==e.lastType||","==e.lastType||p.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}function rt(e,t,n){return t.tokenize==v&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return j.lex=U.lex=!0,F.lex=!0,z.lex=!0,{startState:function(e){var t={tokenize:v,lastType:"sof",cc:[],lexical:new T((e||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new A(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),S(e,t)),t.tokenize!=b&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==i?n:(t.lastType="operator"!=i||"++"!=r&&"--"!=r?i:"incdec",E(t,n,i,r,e))},indent:function(t,i){if(t.tokenize==b||t.tokenize==k)return e.Pass;if(t.tokenize!=v)return 0;var r,a=i&&i.charAt(0),c=t.lexical;if(!/^\s*else\b/.test(i))for(var l=t.cc.length-1;l>=0;--l){var u=t.cc[l];if(u==z)c=c.prev;else if(u!=Ae&&u!=F)break}for(;("stat"==c.type||"form"==c.type)&&("}"==a||(r=t.cc[t.cc.length-1])&&(r==Q||r==Y)&&!/^[,\.=+\-*:?[\(]/.test(i));)c=c.prev;s&&")"==c.type&&"stat"==c.prev.type&&(c=c.prev);var d=c.type,h=a==d;return"vardef"==d?c.indented+("operator"==t.lastType||","==t.lastType?c.info.length+1:0):"form"==d&&"{"==a?c.indented:"form"==d?c.indented+o:"stat"==d?c.indented+(it(t,i)?s||o:0):"switch"!=c.info||h||0==n.doubleIndentSwitch?c.align?c.column+(h?0:1):c.indented+(h?0:o):c.indented+(/^(?:case|default)\b/.test(i)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:c?null:"/*",blockCommentEnd:c?null:"*/",blockCommentContinue:c?null:" * ",lineComment:c?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:c?"json":"javascript",jsonldMode:a,jsonMode:c,expressionAllowed:rt,skipExpression:function(t){E(t,"atom","atom","true",new e.StringStream("",2,null))}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(6246))},8331:(e,t,n)=>{"use strict";var i=n(3570),r=n(8445),o=n(1925);e.exports=!i&&!r((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8365:(e,t,n)=>{"use strict";var i=n(8366),r=n(8445),o=n(2202),s=Object,a=i("".split);e.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===o(e)?a(e,""):s(e)}:s},8366:(e,t,n)=>{"use strict";var i=n(7886),r=Function.prototype,o=r.call,s=i&&r.bind.bind(o,o);e.exports=i?s:function(e){return function(){return o.apply(e,arguments)}}},8420:(e,t,n)=>{"use strict";var i=n(4721),r=Math.max,o=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):o(n,t)}},8436:(e,t,n)=>{"use strict";var i=n(7800),r=n(5334),o=n(1187),s=n(5900),a=n(8420),c=n(5612),l=n(7555),u=n(4794),d=n(4205),h=n(1903),p=n(78),f=h("slice"),m=d("species"),g=Array,v=Math.max;i({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,i,d,h=l(this),f=c(h),y=a(e,f),b=a(void 0===t?f:t,f);if(r(h)&&(n=h.constructor,(o(n)&&(n===g||r(n.prototype))||s(n)&&null===(n=n[m]))&&(n=void 0),n===g||void 0===n))return p(h,y,b);for(i=new(void 0===n?g:n)(v(b-y,0)),d=0;y<b;y++,d++)y in h&&u(i,d,h[y]);return i.length=d,i}})},8445:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},8512:(e,t,n)=>{"use strict";n(2400);var i=n(5313);e.exports=i.Object.getOwnPropertyDescriptors},8531:(e,t,n)=>{"use strict";var i=n(2545),r=n(4702),o=n(1099),s="__core-js_shared__",a=e.exports=r[s]||o(s,{});(a.versions||(a.versions=[])).push({version:"3.43.0",mode:i?"pure":"global",copyright:"\xa9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.43.0/LICENSE",source:"https://github.com/zloirock/core-js"})},8591:(e,t,n)=>{"use strict";var i=n(7800),r=n(6521),o=n(8445),s=n(6839),a=n(5231);i({target:"Object",stat:!0,forced:!r||o((function(){s.f(1)}))},{getOwnPropertySymbols:function(e){var t=s.f;return t?t(a(e)):[]}})},8608:e=>{e.exports=function(){if("undefined"!==typeof window&&null!==window){if(window.devicePixelRatio>1.25)return!0;if(window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.25), (min--moz-device-pixel-ratio: 1.25), (-o-min-device-pixel-ratio: 5/4), (min-resolution: 1.25dppx)").matches)return!0}return!1}},8777:(e,t,n)=>{"use strict";var i=n(8061),r=String;e.exports=function(e){if("Symbol"===i(e))throw new TypeError("Cannot convert a Symbol value to a string");return r(e)}},8851:(e,t,n)=>{"use strict";var i=n(3570),r=n(8366),o=n(2203),s=n(8445),a=n(3734),c=n(6839),l=n(8143),u=n(5231),d=n(8365),h=Object.assign,p=Object.defineProperty,f=r([].concat);e.exports=!h||s((function(){if(i&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!==h({},e)[n]||a(h({},t)).join("")!==r}))?function(e,t){for(var n=u(e),r=arguments.length,s=1,h=c.f,p=l.f;r>s;)for(var m,g=d(arguments[s++]),v=h?f(a(g),h(g)):a(g),y=v.length,b=0;y>b;)m=v[b++],i&&!o(p,g,m)||(n[m]=g[m]);return n}:h},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},8885:(e,t,n)=>{"use strict";var i=n(4702),r=n(3273),o=n(2202),s=function(e){return r.slice(0,e.length)===e};e.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":i.Bun&&"string"==typeof Bun.version?"BUN":i.Deno&&"object"==typeof Deno.version?"DENO":"process"===o(i.process)?"NODE":i.window&&i.document?"BROWSER":"REST"},8887:(e,t,n)=>{"use strict";var i=n(2546);e.exports=i},8967:(e,t,n)=>{"use strict";var i=n(7555),r=n(8420),o=n(5612),s=function(e){return function(t,n,s){var a=i(t),c=o(a);if(0===c)return!e&&-1;var l,u=r(s,c);if(e&&n!==n){for(;c>u;)if((l=a[u++])!==l)return!0}else for(;c>u;u++)if((e||u in a)&&a[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},9085:(e,t,n)=>{"use strict";var i=n(5749),r=n(8366),o=n(6434),s=n(6839),a=n(6929),c=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=s.f;return n?c(t,n(e)):t}},9162:(e,t,n)=>{"use strict";var i=n(8366),r=n(8445),o=n(511).start,s=RangeError,a=isFinite,c=Math.abs,l=Date.prototype,u=l.toISOString,d=i(l.getTime),h=i(l.getUTCDate),p=i(l.getUTCFullYear),f=i(l.getUTCHours),m=i(l.getUTCMilliseconds),g=i(l.getUTCMinutes),v=i(l.getUTCMonth),y=i(l.getUTCSeconds);e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!==u.call(new Date(-50000000000001))}))||!r((function(){u.call(new Date(NaN))}))?function(){if(!a(d(this)))throw new s("Invalid time value");var e=this,t=p(e),n=m(e),i=t<0?"-":t>9999?"+":"";return i+o(c(t),i?6:4,0)+"-"+o(v(e)+1,2,0)+"-"+o(h(e),2,0)+"T"+o(f(e),2,0)+":"+o(g(e),2,0)+":"+o(y(e),2,0)+"."+o(n,3,0)+"Z"}:u},9203:(e,t,n)=>{"use strict";var i=n(8531);e.exports=function(e,t){return i[e]||(i[e]=t||{})}},9268:(e,t,n)=>{!function(){var t=n(5016),i=n(2828).utf8,r=n(5837),o=n(2828).bin,s=function(e,n){e.constructor==String?e=n&&"binary"===n.encoding?o.stringToBytes(e):i.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var a=t.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,d=-1732584194,h=271733878,p=0;p<a.length;p++)a[p]=16711935&(a[p]<<8|a[p]>>>24)|4278255360&(a[p]<<24|a[p]>>>8);a[c>>>5]|=128<<c%32,a[14+(c+64>>>9<<4)]=c;var f=s._ff,m=s._gg,g=s._hh,v=s._ii;for(p=0;p<a.length;p+=16){var y=l,b=u,k=d,w=h;l=f(l,u,d,h,a[p+0],7,-680876936),h=f(h,l,u,d,a[p+1],12,-389564586),d=f(d,h,l,u,a[p+2],17,606105819),u=f(u,d,h,l,a[p+3],22,-1044525330),l=f(l,u,d,h,a[p+4],7,-176418897),h=f(h,l,u,d,a[p+5],12,1200080426),d=f(d,h,l,u,a[p+6],17,-1473231341),u=f(u,d,h,l,a[p+7],22,-45705983),l=f(l,u,d,h,a[p+8],7,1770035416),h=f(h,l,u,d,a[p+9],12,-1958414417),d=f(d,h,l,u,a[p+10],17,-42063),u=f(u,d,h,l,a[p+11],22,-1990404162),l=f(l,u,d,h,a[p+12],7,1804603682),h=f(h,l,u,d,a[p+13],12,-40341101),d=f(d,h,l,u,a[p+14],17,-1502002290),l=m(l,u=f(u,d,h,l,a[p+15],22,1236535329),d,h,a[p+1],5,-165796510),h=m(h,l,u,d,a[p+6],9,-1069501632),d=m(d,h,l,u,a[p+11],14,643717713),u=m(u,d,h,l,a[p+0],20,-373897302),l=m(l,u,d,h,a[p+5],5,-701558691),h=m(h,l,u,d,a[p+10],9,38016083),d=m(d,h,l,u,a[p+15],14,-660478335),u=m(u,d,h,l,a[p+4],20,-405537848),l=m(l,u,d,h,a[p+9],5,568446438),h=m(h,l,u,d,a[p+14],9,-1019803690),d=m(d,h,l,u,a[p+3],14,-187363961),u=m(u,d,h,l,a[p+8],20,1163531501),l=m(l,u,d,h,a[p+13],5,-1444681467),h=m(h,l,u,d,a[p+2],9,-51403784),d=m(d,h,l,u,a[p+7],14,1735328473),l=g(l,u=m(u,d,h,l,a[p+12],20,-1926607734),d,h,a[p+5],4,-378558),h=g(h,l,u,d,a[p+8],11,-2022574463),d=g(d,h,l,u,a[p+11],16,1839030562),u=g(u,d,h,l,a[p+14],23,-35309556),l=g(l,u,d,h,a[p+1],4,-1530992060),h=g(h,l,u,d,a[p+4],11,1272893353),d=g(d,h,l,u,a[p+7],16,-155497632),u=g(u,d,h,l,a[p+10],23,-1094730640),l=g(l,u,d,h,a[p+13],4,681279174),h=g(h,l,u,d,a[p+0],11,-358537222),d=g(d,h,l,u,a[p+3],16,-722521979),u=g(u,d,h,l,a[p+6],23,76029189),l=g(l,u,d,h,a[p+9],4,-640364487),h=g(h,l,u,d,a[p+12],11,-421815835),d=g(d,h,l,u,a[p+15],16,530742520),l=v(l,u=g(u,d,h,l,a[p+2],23,-995338651),d,h,a[p+0],6,-198630844),h=v(h,l,u,d,a[p+7],10,1126891415),d=v(d,h,l,u,a[p+14],15,-1416354905),u=v(u,d,h,l,a[p+5],21,-57434055),l=v(l,u,d,h,a[p+12],6,1700485571),h=v(h,l,u,d,a[p+3],10,-1894986606),d=v(d,h,l,u,a[p+10],15,-1051523),u=v(u,d,h,l,a[p+1],21,-2054922799),l=v(l,u,d,h,a[p+8],6,1873313359),h=v(h,l,u,d,a[p+15],10,-30611744),d=v(d,h,l,u,a[p+6],15,-1560198380),u=v(u,d,h,l,a[p+13],21,1309151649),l=v(l,u,d,h,a[p+4],6,-145523070),h=v(h,l,u,d,a[p+11],10,-1120210379),d=v(d,h,l,u,a[p+2],15,718787259),u=v(u,d,h,l,a[p+9],21,-343485551),l=l+y>>>0,u=u+b>>>0,d=d+k>>>0,h=h+w>>>0}return t.endian([l,u,d,h])};s._ff=function(e,t,n,i,r,o,s){var a=e+(t&n|~t&i)+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._gg=function(e,t,n,i,r,o,s){var a=e+(t&i|n&~i)+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._hh=function(e,t,n,i,r,o,s){var a=e+(t^n^i)+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._ii=function(e,t,n,i,r,o,s){var a=e+(n^(t|~i))+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var i=t.wordsToBytes(s(e,n));return n&&n.asBytes?i:n&&n.asString?o.bytesToString(i):t.bytesToHex(i)}}()},9482:(e,t,n)=>{"use strict";var i=n(8366),r=n(4071),o=n(7555),s=n(8967).indexOf,a=n(6663),c=i([].push);e.exports=function(e,t){var n,i=o(e),l=0,u=[];for(n in i)!r(a,n)&&r(i,n)&&c(u,n);for(;t.length>l;)r(i,n=t[l++])&&(~s(u,n)||c(u,n));return u}},9607:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports="undefined"==typeof t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},9637:(e,t,n)=>{"use strict";n(5461);var i=n(5313).Object,r=e.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)};i.getOwnPropertyDescriptor.sham&&(r.sham=!0)},9721:(e,t,n)=>{"use strict";var i=n(4078);e.exports=i},9825:(e,t,n)=>{"use strict";var i=n(3570),r=n(607),o=n(2582);e.exports=i?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9855:(e,t,n)=>{"use strict";var i=n(5749);e.exports=i("document","documentElement")},9880:(e,t,n)=>{"use strict";var i=n(8366),r=n(9607),o=n(8531),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>i[e]));return s.default=()=>i,n.d(o,s),o}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{Decoder:()=>Zr,Encoder:()=>Yr,PacketType:()=>Qr,protocol:()=>$r});var t={};n.r(t),n.d(t,{hasBrowserEnv:()=>hs,hasStandardBrowserEnv:()=>fs,hasStandardBrowserWebWorkerEnv:()=>ms,navigator:()=>ps,origin:()=>gs});var i,r=n(5043),o=n.t(r,2),s=n(4391),a=n(7950),c=n.t(a,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Be){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,i){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function v(e,t,n,r){void 0===r&&(r={});let{window:o=document.defaultView,v5Compat:s=!1}=r,a=o.history,c=i.Pop,h=null,g=v();function v(){return(a.state||{idx:null}).idx}function y(){c=i.Pop;let e=v(),t=null==e?null:e-g;g=e,h&&h({action:c,location:k.location,delta:t})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let k={get action(){return c},get location(){return e(o,a)},listen(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(u,y),h=e,()=>{o.removeEventListener(u,y),h=null}},createHref:e=>t(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=i.Push;let r=f(k.location,e,t);n&&n(r,e),g=v()+1;let l=p(r,g),u=k.createHref(r);try{a.pushState(l,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;o.location.assign(u)}s&&h&&h({action:c,location:k.location,delta:1})},replace:function(e,t){c=i.Replace;let r=f(k.location,e,t);n&&n(r,e),g=v();let o=p(r,g),l=k.createHref(r);a.replaceState(o,"",l),s&&h&&h({action:c,location:k.location,delta:0})},go:e=>a.go(e)};return k}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),k(e,t,n,!1)}function k(e,t,n,i){let r=A(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;let o=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=L(r);s=N(o[a],e,i)}return s}function w(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};s.relativePath.startsWith("/")&&(d(s.relativePath.startsWith(i),'Absolute route path "'+s.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(i.length));let a=F([i,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:_(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of S(e.path))r(e,t,i);else r(e,t)})),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===i.length)return r?[o,""]:[o];let s=S(i.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),r&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const C=/^:[\w-]+$/,T=3,x=2,E=1,P=10,O=-2,R=e=>"*"===e;function _(e,t){let n=e.split("/"),i=n.length;return n.some(R)&&(i+=O),t&&(i+=x),n.filter((e=>!R(e))).reduce(((e,t)=>e+(C.test(t)?T:""===t?E:P)),i)}function N(e,t,n){void 0===n&&(n=!1);let{routesMeta:i}=e,r={},o="/",s=[];for(let a=0;a<i.length;++a){let e=i[a],c=a===i.length-1,l="/"===o?t:t.slice(o.length)||"/",u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:c},l),d=e.route;if(!u&&c&&n&&!i[i.length-1].route.index&&(u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!u)return null;Object.assign(r,u.params),s.push({params:r,pathname:F([o,u.pathname]),pathnameBase:B(F([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=F([o,u.pathnameBase]))}return s}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let o=new RegExp(r,t?void 0:"i");return[o,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],s=o.replace(/(.)\/+$/,"$1"),a=r.slice(1),c=i.reduce(((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[i]=r&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{});return{params:c,pathname:o,pathnameBase:s,pattern:e}}function L(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function M(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function j(e,t){let n=D(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function U(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=g(e):(r=l({},e),d(!r.pathname||!r.pathname.includes("?"),M("?","pathname","search",r)),d(!r.pathname||!r.pathname.includes("#"),M("#","pathname","hash",r)),d(!r.search||!r.search.includes("#"),M("#","search","hash",r)));let o,s=""===e||""===r.pathname,a=s?"/":r.pathname;if(null==a)o=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?g(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:z(i),hash:V(r)}}(r,o),u=a&&"/"!==a&&a.endsWith("/"),h=(s||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],q=(new Set(H),["get",...H]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},G.apply(this,arguments)}const K=r.createContext(null);const J=r.createContext(null);const $=r.createContext(null);const Q=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const X=r.createContext(null);function Z(){return null!=r.useContext(Q)}function ee(){return Z()||d(!1),r.useContext(Q).location}function te(e){r.useContext($).static||r.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=de(le.UseNavigateStable),t=pe(ue.UseNavigateStable),n=r.useRef(!1);return te((()=>{n.current=!0})),r.useCallback((function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,G({fromRouteId:t},r)))}),[e,t])}():function(){Z()||d(!1);let e=r.useContext(K),{basename:t,future:n,navigator:i}=r.useContext($),{matches:o}=r.useContext(Y),{pathname:s}=ee(),a=JSON.stringify(j(o,n.v7_relativeSplatPath)),c=r.useRef(!1);return te((()=>{c.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void i.go(n);let o=U(n,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:F([t,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[t,i,a,s,e])}()}function ie(e,t,n,o){Z()||d(!1);let{navigator:s}=r.useContext($),{matches:a}=r.useContext(Y),c=a[a.length-1],l=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,p=ee();if(t){var f;let e="string"===typeof t?g(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||d(!1),h=e}else h=p;let m=h.pathname||"/",v=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:v});let k=ce(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:F([u,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:F([u,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,o);return t&&k?r.createElement(Q.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:i.Pop}},k):k}function re(){let e=function(){var e;let t=r.useContext(X),n=he(ue.UseRouteError),i=pe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,null)}const oe=r.createElement(re,null);class se extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(K);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function ce(e,t,n,i){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=i)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,c=null==(o=n)?void 0:o.errors;if(null!=c){let e=a.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||d(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){l=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,d=!1,h=null,p=null;var f;n&&(s=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||oe,l&&(u<0&&0===o?(f="route-fallback",!1||fe[f]||(fe[f]=!0),d=!0,p=null):u===o&&(d=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,o+1)),g=()=>{let t;return t=s?h:d?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ae,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement(se,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let t=r.useContext(K);return t||d(!1),t}function he(e){let t=r.useContext(J);return t||d(!1),t}function pe(e){let t=function(){let e=r.useContext(Y);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const fe={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}o.startTransition;function ge(e){let{to:t,replace:n,state:i,relative:o}=e;Z()||d(!1);let{future:s,static:a}=r.useContext($),{matches:c}=r.useContext(Y),{pathname:l}=ee(),u=ne(),h=U(t,j(c,s.v7_relativeSplatPath),l,"path"===o),p=JSON.stringify(h);return r.useEffect((()=>u(JSON.parse(p),{replace:n,state:i,relative:o})),[u,p,o,n,i]),null}function ve(e){d(!1)}function ye(e){let{basename:t="/",children:n=null,location:o,navigationType:s=i.Pop,navigator:a,static:c=!1,future:l}=e;Z()&&d(!1);let u=t.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:u,navigator:a,static:c,future:G({v7_relativeSplatPath:!1},l)})),[u,l,a,c]);"string"===typeof o&&(o=g(o));let{pathname:p="/",search:f="",hash:m="",state:v=null,key:y="default"}=o,b=r.useMemo((()=>{let e=A(p,u);return null==e?null:{location:{pathname:e,search:f,hash:m,state:v,key:y},navigationType:s}}),[u,p,f,m,v,y,s]);return null==b?null:r.createElement($.Provider,{value:h},r.createElement(Q.Provider,{children:n,value:b}))}function be(e){let{children:t,location:n}=e;return ie(ke(t),n)}new Promise((()=>{}));r.Component;function ke(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ke(e.props.children,o));e.type!==ve&&d(!1),e.props.index&&e.props.children&&d(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ke(e.props.children,o)),n.push(s)})),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Be){}new Map;const we=o.startTransition;c.flushSync,o.useId;function Se(e){let{basename:t,children:n,future:i,window:o}=e,s=r.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),v((function(e,t){let{pathname:n,search:i,hash:r}=e.location;return f("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:m(t)}),null,a)));let c=s.current,[l,u]=r.useState({action:c.action,location:c.location}),{v7_startTransition:d}=i||{},h=r.useCallback((e=>{d&&we?we((()=>u(e))):u(e)}),[u,d]);return r.useLayoutEffect((()=>c.listen(h)),[c,h]),r.useEffect((()=>me(i)),[i]),r.createElement(ye,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:c,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ce,Te;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ce||(Ce={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var xe,Ee=new Uint8Array(16);function Pe(){if(!xe&&!(xe="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xe(Ee)}const Oe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const Re=function(e){return"string"===typeof e&&Oe.test(e)};for(var _e=[],Ne=0;Ne<256;++Ne)_e.push((Ne+256).toString(16).substr(1));const Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(_e[e[t+0]]+_e[e[t+1]]+_e[e[t+2]]+_e[e[t+3]]+"-"+_e[e[t+4]]+_e[e[t+5]]+"-"+_e[e[t+6]]+_e[e[t+7]]+"-"+_e[e[t+8]]+_e[e[t+9]]+"-"+_e[e[t+10]]+_e[e[t+11]]+_e[e[t+12]]+_e[e[t+13]]+_e[e[t+14]]+_e[e[t+15]]).toLowerCase();if(!Re(n))throw TypeError("Stringified UUID is invalid");return n};const Le=function(e,t,n){var i=(e=e||{}).random||(e.rng||Pe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return Ie(i)};function Ae(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function De(e){var t=function(e,t){if("object"!=Me(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Me(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Me(t)?t:t+""}function je(e,t,n){return(t=De(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Be={data:""},ze=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Be,Ve=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,We=/\/\*[^]*?\*\/|  +/g,He=/\n+/g,qe=(e,t)=>{let n="",i="",r="";for(let o in e){let s=e[o];"@"==o[0]?"i"==o[1]?n=o+" "+s+";":i+="f"==o[1]?qe(s,o):o+"{"+qe(s,"k"==o[1]?"":t)+"}":"object"==typeof s?i+=qe(s,t?t.replace(/([^,])+/g,(e=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):o):null!=s&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=qe.p?qe.p(o,s):o+":"+s+";")}return n+(t&&r?t+"{"+r+"}":r)+i},Ge={},Ke=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Ke(e[n]);return t}return e},Je=(e,t,n,i,r)=>{let o=Ke(e),s=Ge[o]||(Ge[o]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(o));if(!Ge[s]){let t=o!==e?e:(e=>{let t,n,i=[{}];for(;t=Ve.exec(e.replace(We,""));)t[4]?i.shift():t[3]?(n=t[3].replace(He," ").trim(),i.unshift(i[0][n]=i[0][n]||{})):i[0][t[1]]=t[2].replace(He," ").trim();return i[0]})(e);Ge[s]=qe(r?{["@keyframes "+s]:t}:t,n?"":"."+s)}let a=n&&Ge.g?Ge.g:null;return n&&(Ge.g=Ge[s]),((e,t,n,i)=>{i?t.data=t.data.replace(i,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Ge[s],t,i,a),s};function $e(e){let t=this||{},n=e.call?e(t.p):e;return Je(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,i,r)=>{let o=t[r];if(o&&o.call){let e=o(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;o=t?"."+t:e&&"object"==typeof e?e.props?"":qe(e,""):!1===e?"":e}return e+i+(null==o?"":o)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,ze(t.target),t.g,t.o,t.k)}$e.bind({g:1});let Qe,Ye,Xe,Ze=$e.bind({k:1});function et(e,t){let n=this||{};return function(){let i=arguments;function r(o,s){let a=Object.assign({},o),c=a.className||r.className;n.p=Object.assign({theme:Ye&&Ye()},a),n.o=/ *go\d+/.test(c),a.className=$e.apply(n,i)+(c?" "+c:""),t&&(a.ref=s);let l=e;return e[0]&&(l=a.as||e,delete a.as),Xe&&l[0]&&Xe(a),Qe(l,a)}return t?t(r):r}}var tt,nt,it,rt,ot,st,at,ct,lt,ut,dt,ht,pt,ft,mt,gt,vt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,yt=(()=>{let e=0;return()=>(++e).toString()})(),bt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),kt=(e,t)=>{switch(t.type){case 0:return Fe(Fe({},e),{},{toasts:[t.toast,...e.toasts].slice(0,20)});case 1:return Fe(Fe({},e),{},{toasts:e.toasts.map((e=>e.id===t.toast.id?Fe(Fe({},e),t.toast):e))});case 2:let{toast:n}=t;return kt(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:i}=t;return Fe(Fe({},e),{},{toasts:e.toasts.map((e=>e.id===i||void 0===i?Fe(Fe({},e),{},{dismissed:!0,visible:!1}):e))});case 4:return void 0===t.toastId?Fe(Fe({},e),{},{toasts:[]}):Fe(Fe({},e),{},{toasts:e.toasts.filter((e=>e.id!==t.toastId))});case 5:return Fe(Fe({},e),{},{pausedAt:t.time});case 6:let r=t.time-(e.pausedAt||0);return Fe(Fe({},e),{},{pausedAt:void 0,toasts:e.toasts.map((e=>Fe(Fe({},e),{},{pauseDuration:e.pauseDuration+r})))})}},wt=[],St={toasts:[],pausedAt:void 0},Ct=e=>{St=kt(St,e),wt.forEach((e=>{e(St)}))},Tt={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},xt=e=>(t,n)=>{let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return Fe(Fe({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||yt()})}(t,e,n);return Ct({type:2,toast:i}),i.id},Et=(e,t)=>xt("blank")(e,t);Et.error=xt("error"),Et.success=xt("success"),Et.loading=xt("loading"),Et.custom=xt("custom"),Et.dismiss=e=>{Ct({type:3,toastId:e})},Et.remove=e=>Ct({type:4,toastId:e}),Et.promise=(e,t,n)=>{let i=Et.loading(t.loading,Fe(Fe({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then((e=>{let r=t.success?vt(t.success,e):void 0;return r?Et.success(r,Fe(Fe({id:i},n),null==n?void 0:n.success)):Et.dismiss(i),e})).catch((e=>{let r=t.error?vt(t.error,e):void 0;r?Et.error(r,Fe(Fe({id:i},n),null==n?void 0:n.error)):Et.dismiss(i)})),e};var Pt=(e,t)=>{Ct({type:1,toast:{id:e,height:t}})},Ot=()=>{Ct({type:5,time:Date.now()})},Rt=new Map,_t=e=>{let{toasts:t,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,r.useState)(St),i=(0,r.useRef)(St);(0,r.useEffect)((()=>(i.current!==St&&n(St),wt.push(n),()=>{let e=wt.indexOf(n);e>-1&&wt.splice(e,1)})),[]);let o=t.toasts.map((t=>{var n,i,r;return Fe(Fe(Fe(Fe({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(i=e[t.type])?void 0:i.duration)||(null==e?void 0:e.duration)||Tt[t.type],style:Fe(Fe(Fe({},e.style),null==(r=e[t.type])?void 0:r.style),t.style)})}));return Fe(Fe({},t),{},{toasts:o})}(e);(0,r.useEffect)((()=>{if(n)return;let e=Date.now(),i=t.map((t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((()=>Et.dismiss(t.id)),n);t.visible&&Et.dismiss(t.id)}));return()=>{i.forEach((e=>e&&clearTimeout(e)))}}),[t,n]);let i=(0,r.useCallback)((()=>{n&&Ct({type:6,time:Date.now()})}),[n]),o=(0,r.useCallback)(((e,n)=>{let{reverseOrder:i=!1,gutter:r=8,defaultPosition:o}=n||{},s=t.filter((t=>(t.position||o)===(e.position||o)&&t.height)),a=s.findIndex((t=>t.id===e.id)),c=s.filter(((e,t)=>t<a&&e.visible)).length;return s.filter((e=>e.visible)).slice(...i?[c+1]:[0,c]).reduce(((e,t)=>e+(t.height||0)+r),0)}),[t]);return(0,r.useEffect)((()=>{t.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(Rt.has(e))return;let n=setTimeout((()=>{Rt.delete(e),Ct({type:4,toastId:e})}),t);Rt.set(e,n)}(e.id,e.removeDelay);else{let t=Rt.get(e.id);t&&(clearTimeout(t),Rt.delete(e.id))}}))}),[t]),{toasts:t,handlers:{updateHeight:Pt,startPause:Ot,endPause:i,calculateOffset:o}}},Nt=Ze(tt||(tt=Ae(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),It=Ze(nt||(nt=Ae(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Lt=Ze(it||(it=Ae(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),At=et("div")(rt||(rt=Ae(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),(e=>e.primary||"#ff4b4b"),Nt,It,(e=>e.secondary||"#fff"),Lt),Mt=Ze(ot||(ot=Ae(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Dt=et("div")(st||(st=Ae(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),(e=>e.secondary||"#e0e0e0"),(e=>e.primary||"#616161"),Mt),jt=Ze(at||(at=Ae(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Ut=Ze(ct||(ct=Ae(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Ft=et("div")(lt||(lt=Ae(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),(e=>e.primary||"#61d345"),jt,Ut,(e=>e.secondary||"#fff")),Bt=et("div")(ut||(ut=Ae(["\n  position: absolute;\n"]))),zt=et("div")(dt||(dt=Ae(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Vt=Ze(ht||(ht=Ae(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Wt=et("div")(pt||(pt=Ae(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Vt),Ht=e=>{let{toast:t}=e,{icon:n,type:i,iconTheme:o}=t;return void 0!==n?"string"==typeof n?r.createElement(Wt,null,n):n:"blank"===i?null:r.createElement(zt,null,r.createElement(Dt,Fe({},o)),"loading"!==i&&r.createElement(Bt,null,"error"===i?r.createElement(At,Fe({},o)):r.createElement(Ft,Fe({},o))))},qt=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Gt=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Kt=et("div")(ft||(ft=Ae(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Jt=et("div")(mt||(mt=Ae(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),$t=r.memo((e=>{let{toast:t,position:n,style:i,children:o}=e,s=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[i,r]=bt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[qt(n),Gt(n)];return{animation:t?"".concat(Ze(i)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Ze(r)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||n||"top-center",t.visible):{opacity:0},a=r.createElement(Ht,{toast:t}),c=r.createElement(Jt,Fe({},t.ariaProps),vt(t.message,t));return r.createElement(Kt,{className:t.className,style:Fe(Fe(Fe({},s),i),t.style)},"function"==typeof o?o({icon:a,message:c}):r.createElement(r.Fragment,null,a,c))}));!function(e,t,n,i){qe.p=t,Qe=e,Ye=n,Xe=i}(r.createElement);var Qt=e=>{let{id:t,className:n,style:i,onHeightUpdate:o,children:s}=e,a=r.useCallback((e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;o(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[t,o]);return r.createElement("div",{ref:a,className:n,style:i},s)},Yt=$e(gt||(gt=Ae(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Xt=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:i,gutter:o,children:s,containerStyle:a,containerClassName:c}=e,{toasts:l,handlers:u}=_t(i);return r.createElement("div",{id:"_rht_toaster",style:Fe({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},a),className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map((e=>{let i=e.position||n,a=((e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return Fe(Fe({left:0,right:0,display:"flex",position:"absolute",transition:bt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},i),r)})(i,u.calculateOffset(e,{reverseOrder:t,gutter:o,defaultPosition:n}));return r.createElement(Qt,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Yt:"",style:a},"custom"===e.type?vt(e.message,e):s?s(e):r.createElement($t,{toast:e,position:i}))})))},Zt=Et,en=n(579);const tn=()=>{let e=ne();const[t,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),s=()=>{t&&i?e("/editor/".concat(t),{state:{username:i}}):Zt.error("ROOM ID & Username is required!!")},a=e=>{"Enter"===e.code&&s()};return(0,en.jsxs)("div",{className:"homePageWrapper",children:[(0,en.jsxs)("div",{className:"formWrapper",children:[(0,en.jsx)("img",{className:"homePageLogo",src:"/code-sync.png",alt:"code-sync-logo"}),(0,en.jsx)("h4",{className:"mainLabel",children:"Paste invitation ROOM ID"}),(0,en.jsxs)("div",{className:"inputGroup",children:[(0,en.jsx)("input",{onChange:e=>n(e.target.value),value:t,type:"text",className:"inputBox",placeholder:"ROOM ID",onKeyUp:a}),(0,en.jsx)("input",{onChange:e=>o(e.target.value),value:i,type:"text",className:"inputBox",placeholder:"USERNAME",onKeyUp:a}),(0,en.jsx)("button",{onClick:s,className:"btn joinBtn",children:"Join"}),(0,en.jsxs)("span",{className:"createInfo",children:["If you don't have an invite then create \xa0",(0,en.jsx)("button",{onClick:e=>{e.preventDefault();const t=Le();n(t),Zt.success("Created a new room")},className:"createNewBtn",type:"button",children:"new room"})]})]})]}),(0,en.jsx)("footer",{children:(0,en.jsxs)("h4",{children:["Built with \u2764\ufe0f by"," ",(0,en.jsx)("a",{href:"https://github.com/astro-heree",children:" Aman Kumar"})]})})]})};function nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,De(i.key),i)}}function on(e,t,n){return t&&rn(e.prototype,t),n&&rn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e,t){return an=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},an(e,t)}function cn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&an(e,t)}function ln(e,t){if(t&&("object"==Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sn(e)}function un(e){return un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},un(e)}var dn=n(2411),hn=n.n(dn),pn=n(2208),fn=n.n(pn),mn=n(4246),gn=n.n(mn),vn=n(705),yn=n.n(vn),bn=n(3212),kn=n.n(bn),wn=n(4823),Sn=n.n(wn),Cn=n(504),Tn=n.n(Cn),xn=n(4423),En=n.n(xn),Pn=n(5569),On=n.n(Pn),Rn=n(4402),_n=n.n(Rn),Nn=n(5173),In=n.n(Nn),Ln=n(7209),An=n.n(Ln),Mn=n(7499),Dn=n.n(Mn),jn="failing",Un=function(){try{return"localStorage"in window&&window.localStorage}catch(e){return!1}}(),Fn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nn(this,e);var n=t.cachePrefix,i=void 0===n?"react-avatar/":n,r=t.sourceTTL,o=void 0===r?6048e5:r,s=t.sourceSize,a=void 0===s?20:s;this.cachePrefix=i,this.sourceTTL=o,this.sourceSize=a}return on(e,[{key:"set",value:function(e,t){if(Un){t=An()(t);try{localStorage.setItem(this.cachePrefix+e,t)}catch(Be){console.error(Be)}}}},{key:"get",value:function(e){if(!Un)return null;var t=localStorage.getItem(this.cachePrefix+e);return t?JSON.parse(t):null}},{key:"sourceFailed",value:function(e){var t=this.get(jn)||[];return(t=Sn()(t).call(t,(function(t){var n=t.expires>0&&t.expires<Date.now(),i=t===e||t.url==e;return!n&&!i}))).unshift({url:e,expires:Date.now()+this.sourceTTL}),t=Dn()(t).call(t,0,this.sourceSize-1),this.set(jn,t)}},{key:"hasSourceFailedBefore",value:function(e){return(this.get(jn)||[]).some((function(t){var n=t.expires>0&&t.expires<Date.now();return(t===e||t.url==e)&&!n}))}}]),e}();const Bn=new Fn;function zn(){return zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zn.apply(null,arguments)}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Wn(e,t){if(e){if("string"==typeof e)return Vn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vn(e,t):void 0}}function Hn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(a.push(i.value),a.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||Wn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e){return function(e){if(Array.isArray(e))return Vn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Gn=n(8887),Kn=n.n(Gn),Jn=n(8149),$n=n.n(Jn),Qn=n(8608),Yn=n.n(Qn)()();var Xn=["#d73d32","#7e3794","#4285f4","#67ae3f","#d61a7f","#ff4080"],Zn=/^([-+]?(?:\d+(?:\.\d+)?|\.\d+))([a-z]{2,4}|%)?$/;function ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xn;if(!e)return"transparent";var n=function(e,t){for(var n,i=Kn()(n=qn(e)).call(n,(function(e){return e.charCodeAt(0)})),r=i.length,o=r%(t-1)+1,s=hn()(i).call(i,(function(e,t){return e+t}))%t,a=i[0]%t,c=0;c<r;c++)a=(o*a+s)%t;return a}(e,t.length);return t[n]}function ti(e){e=""+e;var t=Hn(Zn.exec(e)||[],3),n=t[1],i=void 0===n?0:n,r=t[2],o=void 0===r?"px":r;return{value:$n()(i),str:i+o,unit:o}}function ni(e){return e=ti(e),e=isNaN(e.value)?512:"px"===e.unit?e.value:0===e.value?0:512,Yn&&(e*=2),e}function ii(e,t){var n,i,r,o=t.maxInitials;return Dn()(n=Sn()(i=Kn()(r=e.split(/\s/)).call(r,(function(e){return e.substring(0,1).toUpperCase()}))).call(i,(function(e){return!!e}))).call(n,0,o).join("").toUpperCase()}var ri={};function oi(e){var t=function(){if("undefined"===typeof Reflect||!gn())return!1;if(gn().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(gn()(Boolean,[],(function(){}))),!0}catch(Be){return!1}}();return function(){var n,i=un(e);if(t){var r=un(this).constructor;n=gn()(i,arguments,r)}else n=i.apply(this,arguments);return ln(this,n)}}var si={cache:Bn,colors:Xn,initials:ii,avatarRedirectUrl:null},ai=yn()(si),ci=r.createContext&&r.createContext(),li=!ci,ui=li?null:ci.Consumer,di=r.forwardRef||function(e){return e},hi=function(e){cn(n,e);var t=oi(n);function n(){return nn(this,n),t.apply(this,arguments)}return on(n,[{key:"_getContext",value:function(){var e=this,t={};return ai.forEach((function(n){"undefined"!==typeof e.props[n]&&(t[n]=e.props[n])})),t}},{key:"render",value:function(){var e=this.props.children;return li?r.Children.only(e):r.createElement(ci.Provider,{value:this._getContext()},r.Children.only(e))}}]),n}(r.Component);je(hi,"displayName","ConfigProvider"),je(hi,"propTypes",{cache:In().object,colors:In().arrayOf(In().string),initials:In().func,avatarRedirectUrl:In().string,children:In().node});li&&(hi.childContextTypes={reactAvatar:In().object},hi.prototype.getChildContext=function(){return{reactAvatar:this._getContext()}});var pi=function(){function e(){nn(this,e),this.sourcePointer=0,this.active=!0,this.fetch=null}return on(e,[{key:"isActive",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).internal===this&&(!!this.fetch&&!0===this.active)}}]),e}();function fi(e,t){var n=yn()(e);if(kn()){var i=kn()(e);t&&(i=Sn()(i).call(i,(function(t){return Tn()(e,t).enumerable}))),n.push.apply(n,i)}return n}function mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(n),!0).forEach((function(t){je(e,t,n[t])})):En()?On()(e,En()(n)):fi(Object(n)).forEach((function(t){_n()(e,t,Tn()(n,t))}))}return e}function gi(e){var t=function(){if("undefined"===typeof Reflect||!gn())return!1;if(gn().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(gn()(Boolean,[],(function(){}))),!0}catch(Be){return!1}}();return function(){var n,i=un(e);if(t){var r=un(this).constructor;n=gn()(i,arguments,r)}else n=i.apply(this,arguments);return ln(this,n)}}var vi=n(9268),yi=n.n(vi),bi=on((function e(t){var n=this;nn(this,e),je(this,"props",null),je(this,"isCompatible",(function(){return!!n.props.email||!!n.props.md5Email})),je(this,"get",(function(e){var t=n.props,i=t.md5Email||yi()(t.email),r=ni(t.size),o="https://secure.gravatar.com/avatar/".concat(i,"?d=404");r&&(o+="&s=".concat(r)),e({sourceName:"gravatar",src:o})})),this.props=t}));je(bi,"propTypes",{email:In().string,md5Email:In().string});var ki=n(9721),wi=n.n(ki),Si=on((function e(t){var n=this;nn(this,e),je(this,"props",null),je(this,"isCompatible",(function(){return!!n.props.facebookId})),je(this,"get",(function(e){var t,i=n.props.facebookId,r=ni(n.props.size),o="https://graph.facebook.com/".concat(i,"/picture");r&&(o+=wi()(t="?width=".concat(r,"&height=")).call(t,r)),e({sourceName:"facebook",src:o})})),this.props=t}));je(Si,"propTypes",{facebookId:In().string});var Ci=on((function e(t){var n=this;nn(this,e),je(this,"props",null),je(this,"isCompatible",(function(){return!!n.props.githubHandle})),je(this,"get",(function(e){var t=n.props.githubHandle,i=ni(n.props.size),r="https://avatars.githubusercontent.com/".concat(t,"?v=4");i&&(r+="&s=".concat(i)),e({sourceName:"github",src:r})})),this.props=t}));je(Ci,"propTypes",{githubHandle:In().string});var Ti=on((function e(t){var n=this;nn(this,e),je(this,"props",null),je(this,"isCompatible",(function(){return!!n.props.skypeId})),je(this,"get",(function(e){var t=n.props.skypeId;e({sourceName:"skype",src:"https://api.skype.com/users/".concat(t,"/profile/avatar")})})),this.props=t}));je(Ti,"propTypes",{skypeId:In().string});var xi=function(){function e(t){var n=this;nn(this,e),je(this,"props",null),je(this,"isCompatible",(function(){return!!(n.props.name||n.props.value||n.props.email)})),je(this,"get",(function(e){var t=n.getValue();if(!t)return e(null);e({sourceName:"text",value:t,color:n.getColor()})})),this.props=t}return on(e,[{key:"getInitials",value:function(){var e=this.props,t=e.name,n=e.initials;return"string"===typeof n?n:"function"===typeof n?n(t,this.props):ii(t,this.props)}},{key:"getValue",value:function(){return this.props.name?this.getInitials():this.props.value?this.props.value:null}},{key:"getColor",value:function(){var e=this.props,t=e.color,n=e.colors,i=e.name,r=e.email,o=e.value;return t||ei(i||r||o,n)}}]),e}();je(xi,"propTypes",{color:In().string,name:In().string,value:In().string,email:In().string,maxInitials:In().number,initials:In().oneOfType([In().string,In().func])});var Ei=on((function e(t){var n=this;nn(this,e),je(this,"props",null),je(this,"isCompatible",(function(){return!!n.props.src})),je(this,"get",(function(e){e({sourceName:"src",src:n.props.src})})),this.props=t}));je(Ei,"propTypes",{src:In().string});var Pi=on((function e(t){var n=this;nn(this,e),je(this,"props",null),je(this,"icon","\u2737"),je(this,"isCompatible",(function(){return!0})),je(this,"get",(function(e){var t=n.props,i=t.color,r=t.colors;e({sourceName:"icon",value:n.icon,color:i||ei(n.icon,r)})})),this.props=t}));function Oi(e,t){var n;return n=on((function n(i){var r=this;nn(this,n),je(this,"props",null),je(this,"isCompatible",(function(){return!!r.props.avatarRedirectUrl&&!!r.props[t]})),je(this,"get",(function(n){var i,o,s,a=r.props.avatarRedirectUrl,c=ni(r.props.size),l=a.replace(/\/*$/,"/"),u=r.props[t],d=c?"size=".concat(c):"";n({source:"network",src:wi()(i=wi()(o=wi()(s="".concat(l)).call(s,e,"/")).call(o,u,"?")).call(i,d)})})),this.props=i})),je(n,"propTypes",je({},t,In().oneOfType([In().string,In().number]))),n}je(Pi,"propTypes",{color:In().string});const Ri=Oi("twitter","twitterHandle"),_i=Oi("vkontakte","vkontakteId"),Ni=Oi("instagram","instagramId");const Ii=function(e){var t=e.sources,n=void 0===t?[]:t,i=hn()(n).call(n,(function(e,t){return fn()(e,t.propTypes)}),{}),o=function(e){cn(o,e);var t=gi(o);function o(e){var i;return nn(this,o),je(sn(i=t.call(this,e)),"_createFetcher",(function(e){return function(t){var r=i.props.cache;if(e.isActive(i.state)){t&&"error"===t.type&&r.sourceFailed(t.target.src);var o=e.sourcePointer;if(n.length!==o){var s=n[o];e.sourcePointer++,function(e,t,n){var i=t.cache,r=new e(t);if(!r.isCompatible(t))return n();r.get((function(e){e&&e.src&&i.hasSourceFailedBefore(e.src)||!e?n():n(e)}))}(s,i.props,(function(t){if(!t)return setTimeout(e.fetch,0);e.isActive(i.state)&&(t=mi({src:null,value:null,color:null},t),i.setState((function(n){return e.isActive(n)?t:{}})))}))}}}})),je(sn(i),"fetch",(function(){var e=new pi;e.fetch=i._createFetcher(e),i.setState({internal:e},e.fetch)})),je(sn(i),"_scaleTextNode",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=i.props,r=n.unstyled,o=n.textSizeRatio,s=n.textMarginRatio;if(e&&!r&&!i.state.src&&i.mounted){var a=e.parentNode,c=a.parentNode,l=a.getBoundingClientRect(),u=l.width,d=l.height;if(0!=u||0!=d){if(!c.style.fontSize){var h=d/o;c.style.fontSize="".concat(h,"px")}a.style.fontSize=null;var p=e.getBoundingClientRect().width;if(!(p<0)){var f=u*(1-2*s);p>f&&(a.style.fontSize="calc(1em * ".concat(f/p,")"))}}else{var m=Math.min(1.5*t,500);!function(e,t){if(ri[t])ri[t].push(e);else{var n=ri[t]=[e];setTimeout((function(){delete ri[t],n.forEach((function(e){return e()}))}),t)}}((function(){return i._scaleTextNode(e,m)}),m)}}})),i.state={internal:null,src:null,value:null,color:e.color},i}return on(o,[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetch()}},{key:"componentDidUpdate",value:function(e){var t=!1;for(var n in i)t=t||e[n]!==this.props[n];t&&setTimeout(this.fetch,0)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.state.internal&&(this.state.internal.active=!1)}},{key:"_renderAsImage",value:function(){var e=this.props,t=e.className,n=e.round,i=e.unstyled,o=e.alt,s=e.title,a=e.name,c=e.value,l=this.state.internal,u=ti(this.props.size),d=i?null:{maxWidth:"100%",width:u.str,height:u.str,borderRadius:!0===n?"100%":n};return r.createElement("img",{className:t+" sb-avatar__image",width:u.str,height:u.str,style:d,src:this.state.src,alt:o||a||c,title:s||a||c,onError:l&&l.fetch})}},{key:"_renderAsText",value:function(){var e=this.props,t=e.className,n=e.round,i=e.unstyled,o=e.title,s=e.name,a=e.value,c=ti(this.props.size),l=i?null:{width:c.str,height:c.str,lineHeight:"initial",textAlign:"center",color:this.props.fgColor,background:this.state.color,borderRadius:!0===n?"100%":n},u=i?null:{display:"table",tableLayout:"fixed",width:"100%",height:"100%"},d=i?null:{display:"table-cell",verticalAlign:"middle",fontSize:"100%",whiteSpace:"nowrap"},h=[this.state.value,this.props.size].join("");return r.createElement("div",{className:t+" sb-avatar__text",style:l,title:o||s||a},r.createElement("div",{style:u},r.createElement("span",{style:d},r.createElement("span",{ref:this._scaleTextNode,key:h},this.state.value))))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.unstyled,i=e.round,o=e.style,s=e.onClick,a=this.state,c=a.src,l=a.sourceName,u=ti(this.props.size),d=n?null:mi({display:"inline-block",verticalAlign:"middle",width:u.str,height:u.str,borderRadius:!0===i?"100%":i,fontFamily:"Helvetica, Arial, sans-serif"},o),h=[t,"sb-avatar"];if(l){var p=l.toLowerCase().replace(/[^a-z0-9-]+/g,"-").replace(/^-+|-+$/g,"");h.push("sb-avatar--"+p)}return r.createElement("div",{className:h.join(" "),onClick:s,style:d},c?this._renderAsImage():this._renderAsText())}}]),o}(r.PureComponent);return je(o,"displayName","Avatar"),je(o,"propTypes",mi(mi({},i),{},{alt:In().string,title:In().string,className:In().string,fgColor:In().string,color:In().string,colors:In().arrayOf(In().string),round:In().oneOfType([In().bool,In().string]),style:In().object,size:In().oneOfType([In().number,In().string]),textSizeRatio:In().number,textMarginRatio:In().number,unstyled:In().bool,cache:In().object,onClick:In().func})),je(o,"defaultProps",{className:"",fgColor:"#FFF",round:!1,size:100,textSizeRatio:3,textMarginRatio:.15,unstyled:!1}),je(o,"getRandomColor",ei),je(o,"Cache",Fn),je(o,"ConfigProvider",hi),fn()(function(e){function t(t,n){if(li){var i=n&&n.reactAvatar;return r.createElement(e,zn({},si,i,t))}return r.createElement(ui,null,(function(i){return r.createElement(e,zn({ref:n},si,i,t))}))}return t.contextTypes=hi.childContextTypes,di(t)}(o),{getRandomColor:ei,ConfigProvider:hi,Cache:Fn})}({sources:[Si,Oi("google","googleId"),Ci,Ri,Ni,_i,Ti,bi,Ei,xi,Pi]}),Li=e=>{let{username:t,videoTrack:n,audioTrack:i,isVideoEnabled:o,isAudioEnabled:s,isLocalUser:a=!1}=e;const c=(0,r.useRef)(null),l=(0,r.useRef)(null),[u,d]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=()=>{(async()=>{try{if("undefined"!==typeof window&&window.AudioContext){const e=new(window.AudioContext||window.webkitAudioContext);"suspended"===e.state&&await e.resume()}d(!0)}catch(e){}})(),document.removeEventListener("click",e)};return u||document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[u]),(0,r.useEffect)((()=>{const e=c.current;if(e&&n&&o)try{n.attach(e)}catch(i){console.error("Error attaching video track for",t,":",i)}else if(e)try{e.srcObject=null}catch(i){console.error("Error clearing video for",t,":",i)}return()=>{if(e&&n)try{n.detach(e)}catch(i){console.error("Error detaching video track for",t,":",i)}}}),[n,o,t]),(0,r.useEffect)((()=>{const e=l.current;if(!a){if(e&&i&&s)try{e.srcObject=null,e.volume=1;const t=i.attach(e);t.autoplay=!0,t.playsInline=!0;const n=t.play();void 0!==n&&n.then((()=>{})).catch((e=>{}))}catch(n){console.error("Error attaching audio track for",t,":",n)}else if(e&&!i)try{e.pause(),e.srcObject=null}catch(n){console.error("Error clearing audio for",t,":",n)}return()=>{if(e&&i&&!a)try{e.pause(),i.detach(e)}catch(n){console.error("Error detaching audio track for",t,":",n)}}}}),[i,s,t,u,a]),(0,en.jsxs)("div",{className:"client",children:[(0,en.jsx)("div",{className:"clientVideo",children:o&&n?(0,en.jsx)("video",{ref:c,className:"participantVideo",autoPlay:!0,playsInline:!0}):(0,en.jsx)(Ii,{name:t,size:50,round:"14px"})}),(0,en.jsx)("span",{className:"userName",children:t}),!a&&(0,en.jsx)("audio",{ref:l,autoPlay:!0,playsInline:!0,style:{display:"none"}})]})};var Ai=n(6246),Mi=n.n(Ai),Di=(n(8287),n(6482),n(2301),n(5223)),ji=n.n(Di);const Ui=e=>{let{socketRef:t,roomId:n,onCodeChange:i}=e;const o=(0,r.useRef)(null);return(0,r.useEffect)((()=>{(async()=>{o.current=Mi().fromTextArea(document.getElementById("realtimeEditor"),{mode:{name:"javascript",json:!0},theme:"dracula",autoCloseTags:!0,autoCloseBrackets:!0,lineNumbers:!0}),o.current.on("change",((e,r)=>{const{origin:o}=r,s=e.getValue();i(s),"setValue"!==o&&t.current&&t.current.connected&&t.current.emit(ji().CODE_CHANGE,{roomId:n,code:s})}))})()}),[]),(0,r.useEffect)((()=>{if(t.current&&o.current){const e=e=>{let{code:t}=e;if(null!==t&&o.current){o.current.getValue()!==t&&o.current.setValue(t)}};return t.current.on(ji().CODE_CHANGE,e),()=>{t.current&&t.current.off(ji().CODE_CHANGE,e)}}}),[t.current,o.current]),(0,en.jsx)("textarea",{id:"realtimeEditor"})},Fi=e=>{let{isMicOn:t,isVideoOn:n,onToggleMic:i,onToggleVideo:r}=e;return(0,en.jsxs)("div",{className:"mediaControls",children:[(0,en.jsx)("button",{className:"btn ".concat(t?"micOn":"micOff"),onClick:i,title:t?"Turn off microphone":"Turn on microphone",children:t?"\ud83c\udfa4 Mic On":"\ud83c\udfa4 Mic Off"}),(0,en.jsx)("button",{className:"btn ".concat(n?"videoOn":"videoOff"),onClick:r,title:n?"Turn off camera":"Turn on camera",children:n?"\ud83d\udcf9 Video On":"\ud83d\udcf9 Video Off"})]})},Bi=Object.create(null);Bi.open="0",Bi.close="1",Bi.ping="2",Bi.pong="3",Bi.message="4",Bi.upgrade="5",Bi.noop="6";const zi=Object.create(null);Object.keys(Bi).forEach((e=>{zi[Bi[e]]=e}));const Vi={type:"error",data:"parser error"},Wi="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Hi="function"===typeof ArrayBuffer,qi=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Gi=(e,t,n)=>{let{type:i,data:r}=e;return Wi&&r instanceof Blob?t?n(r):Ki(r,n):Hi&&(r instanceof ArrayBuffer||qi(r))?t?n(r):Ki(new Blob([r]),n):n(Bi[i]+(r||""))},Ki=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Ji(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let $i;const Qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yi="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)Yi[Qi.charCodeAt(n)]=n;const Xi="function"===typeof ArrayBuffer,Zi=(e,t)=>{if("string"!==typeof e)return{type:"message",data:tr(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:er(e.substring(1),t)};return zi[n]?e.length>1?{type:zi[n],data:e.substring(1)}:{type:zi[n]}:Vi},er=(e,t)=>{if(Xi){const n=(e=>{let t,n,i,r,o,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const l=new ArrayBuffer(s),u=new Uint8Array(l);for(t=0;t<a;t+=4)n=Yi[e.charCodeAt(t)],i=Yi[e.charCodeAt(t+1)],r=Yi[e.charCodeAt(t+2)],o=Yi[e.charCodeAt(t+3)],u[c++]=n<<2|i>>4,u[c++]=(15&i)<<4|r>>2,u[c++]=(3&r)<<6|63&o;return l})(e);return tr(n,t)}return{base64:!0,data:e}},tr=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,nr=String.fromCharCode(30);function ir(){return new TransformStream({transform(e,t){!function(e,t){Wi&&e.data instanceof Blob?e.data.arrayBuffer().then(Ji).then(t):Hi&&(e.data instanceof ArrayBuffer||qi(e.data))?t(Ji(e.data)):Gi(e,!1,(e=>{$i||($i=new TextEncoder),t($i.encode(e))}))}(e,(n=>{const i=n.length;let r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!==typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)}))}})}let rr;function or(e){return e.reduce(((e,t)=>e+t.length),0)}function sr(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let i=0;for(let r=0;r<t;r++)n[r]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function ar(e){if(e)return function(e){for(var t in ar.prototype)e[t]=ar.prototype[t];return e}(e)}ar.prototype.on=ar.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},ar.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},ar.prototype.off=ar.prototype.removeListener=ar.prototype.removeAllListeners=ar.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},ar.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},ar.prototype.emitReserved=ar.prototype.emit,ar.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},ar.prototype.hasListeners=function(e){return!!this.listeners(e).length};const cr="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),lr="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function ur(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const dr=lr.setTimeout,hr=lr.clearTimeout;function pr(e,t){t.useNativeTimers?(e.setTimeoutFn=dr.bind(lr),e.clearTimeoutFn=hr.bind(lr)):(e.setTimeoutFn=lr.setTimeout.bind(lr),e.clearTimeoutFn=lr.clearTimeout.bind(lr))}function fr(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class mr extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class gr extends ar{constructor(e){super(),this.writable=!1,pr(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new mr(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Zi(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class vr extends gr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(nr),i=[];for(let r=0;r<n.length;r++){const e=Zi(n[r],t);if(i.push(e),"error"===e.type)break}return i})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,i=new Array(n);let r=0;e.forEach(((e,o)=>{Gi(e,!1,(e=>{i[o]=e,++r===n&&t(i.join(nr))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=fr()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let yr=!1;try{yr="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(bg){}const br=yr;function kr(){}class wr extends vr{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class Sr extends ar{constructor(e,t,n){super(),this.createRequest=e,pr(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=ur(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(Be){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Be){}try{n.setRequestHeader("Accept","*/*")}catch(Be){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"===typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(Be){return void this.setTimeoutFn((()=>{this._onError(Be)}),0)}"undefined"!==typeof document&&(this._index=Sr.requestsCount++,Sr.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=kr,e)try{this._xhr.abort()}catch(Be){}"undefined"!==typeof document&&delete Sr.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(Sr.requestsCount=0,Sr.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",Cr);else if("function"===typeof addEventListener){addEventListener("onpagehide"in lr?"pagehide":"unload",Cr,!1)}function Cr(){for(let e in Sr.requests)Sr.requests.hasOwnProperty(e)&&Sr.requests[e].abort()}const Tr=function(){const e=xr({xdomain:!1});return e&&null!==e.responseType}();function xr(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||br))return new XMLHttpRequest}catch(Be){}if(!t)try{return new(lr[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(Be){}}const Er="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Pr extends gr{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Er?{}:ur(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(bg){return this.emitReserved("error",bg)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;Gi(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(Be){}i&&cr((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=fr()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Or=lr.WebSocket||lr.MozWebSocket;const Rr={websocket:class extends Pr{createSocket(e,t,n){return Er?new Or(e,t,n):t?new Or(e,t):new Or(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends gr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(bg){return this.emitReserved("error",bg)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){rr||(rr=new TextDecoder);const n=[];let i=0,r=-1,o=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(0===i){if(or(n)<1)break;const e=sr(n,1);o=128===(128&e[0]),r=127&e[0],i=r<126?3:126===r?1:2}else if(1===i){if(or(n)<2)break;const e=sr(n,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(or(n)<8)break;const e=sr(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),o=t.getUint32(0);if(o>Math.pow(2,21)-1){a.enqueue(Vi);break}r=o*Math.pow(2,32)+t.getUint32(4),i=3}else{if(or(n)<r)break;const e=sr(n,r);a.enqueue(Zi(o?e:rr.decode(e),t)),i=0}if(0===r||r>e){a.enqueue(Vi);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=ir();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),r())})).catch((e=>{}))};r();const o={type:"open"};this.query.sid&&(o.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(o).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this._writer.write(n).then((()=>{i&&cr((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends wr{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Tr&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new Sr(xr,this.uri(),e)}}},_r=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Nr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ir(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let r=_r.exec(e||""),o={},s=14;for(;s--;)o[Nr[s]]=r[s]||"";return-1!=n&&-1!=i&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){const n=/\/{2,9}/g,i=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||i.splice(0,1);"/"==t.slice(-1)&&i.splice(i.length-1,1);return i}(0,o.path),o.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,i){t&&(n[t]=i)})),n}(0,o.query),o}const Lr="function"===typeof addEventListener&&"function"===typeof removeEventListener,Ar=[];Lr&&addEventListener("offline",(()=>{Ar.forEach((e=>e()))}),!1);class Mr extends ar{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=Ir(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Ir(t.host).host);pr(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let i=0,r=n.length;i<r;i++){let e=n[i].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),Lr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ar.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&Mr.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",Mr.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+="string"===typeof(t=i)?function(e){let t=0,n=0;for(let i=0,r=e.length;i<r;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,cr((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,i){if("function"===typeof t&&(i=t,t=void 0),"function"===typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(Mr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Lr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Ar.indexOf(this._offlineEventListener);-1!==e&&Ar.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Mr.protocol=4;class Dr extends Mr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Mr.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Mr.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function r(){n||(n=!0,l(),t.close(),t=null)}const o=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function s(){o("transport closed")}function a(){o("socket closed")}function c(e){t&&e.name!==t.name&&r()}const l=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",s),this.off("close",a),this.off("upgrading",c)};t.once("open",i),t.once("error",o),t.once("close",s),this.once("close",a),this.once("upgrading",c),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class jr extends Dr{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map((e=>Rr[e])).filter((e=>!!e))),super(e,t)}}const Ur="function"===typeof ArrayBuffer,Fr=Object.prototype.toString,Br="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Fr.call(Blob),zr="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Fr.call(File);function Vr(e){return Ur&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Br&&e instanceof Blob||zr&&e instanceof File}function Wr(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Wr(e[t]))return!0;return!1}if(Vr(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Wr(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Wr(e[n]))return!0;return!1}function Hr(e){const t=[],n=e.data,i=e;return i.data=qr(n,t),i.attachments=t.length,{packet:i,buffers:t}}function qr(e,t){if(!e)return e;if(Vr(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=qr(e[i],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=qr(e[i],t));return n}return e}function Gr(e,t){return e.data=Kr(e.data,t),delete e.attachments,e}function Kr(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Kr(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Kr(e[n],t));return e}const Jr=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],$r=5;var Qr;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Qr||(Qr={}));class Yr{constructor(e){this.replacer=e}encode(e){return e.type!==Qr.EVENT&&e.type!==Qr.ACK||!Wr(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Qr.EVENT?Qr.BINARY_EVENT:Qr.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Qr.BINARY_EVENT&&e.type!==Qr.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Hr(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}function Xr(e){return"[object Object]"===Object.prototype.toString.call(e)}class Zr extends ar{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Qr.BINARY_EVENT;n||t.type===Qr.BINARY_ACK?(t.type=n?Qr.EVENT:Qr.ACK,this.reconstructor=new eo(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Vr(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Qr[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Qr.BINARY_EVENT||n.type===Qr.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(i,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!Zr.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(Be){return!1}}static isPayloadValid(e,t){switch(e){case Qr.CONNECT:return Xr(t);case Qr.DISCONNECT:return void 0===t;case Qr.CONNECT_ERROR:return"string"===typeof t||Xr(t);case Qr.EVENT:case Qr.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Jr.indexOf(t[0]));case Qr.ACK:case Qr.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class eo{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Gr(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function to(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const no=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class io extends ar{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[to(e,"open",this.onopen.bind(this)),to(e,"packet",this.onpacket.bind(this)),to(e,"error",this.onerror.bind(this)),to(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,i;if(no.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];if(o.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;const a={type:Qr.EVENT,data:o,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof o[o.length-1]){const e=this.ids++,t=o.pop();this._registerAckCallback(e,t),a.id=e}const c=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,l=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!c||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n,i=this;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r),s=function(){i.io.clearTimeoutFn(o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(i,n)};s.withError=!0,this.acks[e]=s}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(((t,i)=>{const r=(e,n)=>e?i(e):t(n);r.withError=!0,n.push(r),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(i!==t._queue[0])return;if(null!==e)i.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];n(null,...o)}return i.pending=!1,t._drainQueue()})),this._queue.push(i),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Qr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Qr.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Qr.EVENT:case Qr.BINARY_EVENT:this.onevent(e);break;case Qr.ACK:case Qr.BINARY_ACK:this.onack(e);break;case Qr.DISCONNECT:this.ondisconnect();break;case Qr.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];t.packet({type:Qr.ACK,id:e,data:r})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Qr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function ro(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ro.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},ro.prototype.reset=function(){this.attempts=0},ro.prototype.setMin=function(e){this.ms=e},ro.prototype.setMax=function(e){this.max=e},ro.prototype.setJitter=function(e){this.jitter=e};class oo extends ar{constructor(t,n){var i;super(),this.nsps={},this.subs=[],t&&"object"===typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,pr(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new ro({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=t;const r=n.parser||e;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new jr(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=to(t,"open",(function(){n.onopen(),e&&e()})),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=to(t,"error",r);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{i(),r(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(to(e,"ping",this.onping.bind(this)),to(e,"data",this.ondata.bind(this)),to(e,"error",this.onerror.bind(this)),to(e,"close",this.onclose.bind(this)),to(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(Be){this.onclose("parse error",Be)}}ondecoded(e){cr((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new io(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const so={};function ao(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),i=Ir(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(n&&n.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),i=n.source,r=n.id,o=n.path,s=so[r]&&o in so[r].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?a=new oo(i,t):(so[r]||(so[r]=new oo(i,t)),a=so[r]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(ao,{Manager:oo,Socket:io,io:ao,connect:ao});function co(e,t){return function(){return e.apply(t,arguments)}}const{toString:lo}=Object.prototype,{getPrototypeOf:uo}=Object,{iterator:ho,toStringTag:po}=Symbol,fo=(e=>t=>{const n=lo.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),mo=e=>(e=e.toLowerCase(),t=>fo(t)===e),go=e=>t=>typeof t===e,{isArray:vo}=Array,yo=go("undefined");const bo=mo("ArrayBuffer");const ko=go("string"),wo=go("function"),So=go("number"),Co=e=>null!==e&&"object"===typeof e,To=e=>{if("object"!==fo(e))return!1;const t=uo(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(po in e)&&!(ho in e)},xo=mo("Date"),Eo=mo("File"),Po=mo("Blob"),Oo=mo("FileList"),Ro=mo("URLSearchParams"),[_o,No,Io,Lo]=["ReadableStream","Request","Response","Headers"].map(mo);function Ao(e,t){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),vo(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let s;for(n=0;n<o;n++)s=i[n],t.call(null,e[s],s,e)}}function Mo(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Do="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,jo=e=>!yo(e)&&e!==Do;const Uo=(Fo="undefined"!==typeof Uint8Array&&uo(Uint8Array),e=>Fo&&e instanceof Fo);var Fo;const Bo=mo("HTMLFormElement"),zo=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Vo=mo("RegExp"),Wo=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Ao(n,((n,r)=>{let o;!1!==(o=t(n,r,e))&&(i[r]=o||n)})),Object.defineProperties(e,i)};const Ho=mo("AsyncFunction"),qo=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),i=[],Do.addEventListener("message",(e=>{let{source:t,data:r}=e;t===Do&&r===n&&i.length&&i.shift()()}),!1),e=>{i.push(e),Do.postMessage(n,"*")}):e=>setTimeout(e);var n,i})("function"===typeof setImmediate,wo(Do.postMessage)),Go="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Do):"undefined"!==typeof process&&process.nextTick||qo,Ko={isArray:vo,isArrayBuffer:bo,isBuffer:function(e){return null!==e&&!yo(e)&&null!==e.constructor&&!yo(e.constructor)&&wo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||wo(e.append)&&("formdata"===(t=fo(e))||"object"===t&&wo(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&bo(e.buffer),t},isString:ko,isNumber:So,isBoolean:e=>!0===e||!1===e,isObject:Co,isPlainObject:To,isReadableStream:_o,isRequest:No,isResponse:Io,isHeaders:Lo,isUndefined:yo,isDate:xo,isFile:Eo,isBlob:Po,isRegExp:Vo,isFunction:wo,isStream:e=>Co(e)&&wo(e.pipe),isURLSearchParams:Ro,isTypedArray:Uo,isFileList:Oo,forEach:Ao,merge:function e(){const{caseless:t}=jo(this)&&this||{},n={},i=(i,r)=>{const o=t&&Mo(n,r)||r;To(n[o])&&To(i)?n[o]=e(n[o],i):To(i)?n[o]=e({},i):vo(i)?n[o]=i.slice():n[o]=i};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Ao(arguments[r],i);return n},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ao(t,((t,i)=>{n&&wo(t)?e[i]=co(t,n):e[i]=t}),{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let r,o,s;const a={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)s=r[o],i&&!i(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&uo(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:fo,kindOfTest:mo,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(vo(e))return e;let t=e.length;if(!So(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[ho]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:Bo,hasOwnProperty:zo,hasOwnProp:zo,reduceDescriptors:Wo,freezeMethods:e=>{Wo(e,((t,n)=>{if(wo(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];wo(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return vo(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Mo,global:Do,isContextDefined:jo,isSpecCompliantForm:function(e){return!!(e&&wo(e.append)&&"FormData"===e[po]&&e[ho])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(Co(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const r=vo(e)?[]:{};return Ao(e,((e,t)=>{const o=n(e,i+1);!yo(o)&&(r[t]=o)})),t[i]=void 0,r}}return e};return n(e,0)},isAsyncFn:Ho,isThenable:e=>e&&(Co(e)||wo(e))&&wo(e.then)&&wo(e.catch),setImmediate:qo,asap:Go,isIterable:e=>null!=e&&wo(e[ho])};function Jo(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}Ko.inherits(Jo,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ko.toJSONObject(this.config),code:this.code,status:this.status}}});const $o=Jo.prototype,Qo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Qo[e]={value:e}})),Object.defineProperties(Jo,Qo),Object.defineProperty($o,"isAxiosError",{value:!0}),Jo.from=(e,t,n,i,r,o)=>{const s=Object.create($o);return Ko.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Jo.call(s,e.message,t,n,i,r),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const Yo=Jo;function Xo(e){return Ko.isPlainObject(e)||Ko.isArray(e)}function Zo(e){return Ko.endsWith(e,"[]")?e.slice(0,-2):e}function es(e,t,n){return e?e.concat(t).map((function(e,t){return e=Zo(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const ts=Ko.toFlatObject(Ko,{},null,(function(e){return/^is[A-Z]/.test(e)}));const ns=function(e,t,n){if(!Ko.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=Ko.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Ko.isUndefined(t[e])}))).metaTokens,r=n.visitor||l,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Ko.isSpecCompliantForm(t);if(!Ko.isFunction(r))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Ko.isDate(e))return e.toISOString();if(Ko.isBoolean(e))return e.toString();if(!a&&Ko.isBlob(e))throw new Yo("Blob is not supported. Use a Buffer instead.");return Ko.isArrayBuffer(e)||Ko.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,r){let a=e;if(e&&!r&&"object"===typeof e)if(Ko.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(Ko.isArray(e)&&function(e){return Ko.isArray(e)&&!e.some(Xo)}(e)||(Ko.isFileList(e)||Ko.endsWith(n,"[]"))&&(a=Ko.toArray(e)))return n=Zo(n),a.forEach((function(e,i){!Ko.isUndefined(e)&&null!==e&&t.append(!0===s?es([n],i,o):null===s?n:n+"[]",c(e))})),!1;return!!Xo(e)||(t.append(es(r,n,o),c(e)),!1)}const u=[],d=Object.assign(ts,{defaultVisitor:l,convertValue:c,isVisitable:Xo});if(!Ko.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!Ko.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),Ko.forEach(n,(function(n,o){!0===(!(Ko.isUndefined(n)||null===n)&&r.call(t,n,Ko.isString(o)?o.trim():o,i,d))&&e(n,i?i.concat(o):[o])})),u.pop()}}(e),t};function is(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function rs(e,t){this._pairs=[],e&&ns(e,this,t)}const os=rs.prototype;os.append=function(e,t){this._pairs.push([e,t])},os.toString=function(e){const t=e?function(t){return e.call(this,t,is)}:is;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const ss=rs;function as(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cs(e,t,n){if(!t)return e;const i=n&&n.encode||as;Ko.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let o;if(o=r?r(t,n):Ko.isURLSearchParams(t)?t.toString():new ss(t,n).toString(i),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const ls=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ko.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},us={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ds={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ss,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},hs="undefined"!==typeof window&&"undefined"!==typeof document,ps="object"===typeof navigator&&navigator||void 0,fs=hs&&(!ps||["ReactNative","NativeScript","NS"].indexOf(ps.product)<0),ms="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,gs=hs&&window.location.href||"http://localhost",vs=Fe(Fe({},t),ds);const ys=function(e){function t(e,n,i,r){let o=e[r++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=r>=e.length;if(o=!o&&Ko.isArray(i)?i.length:o,a)return Ko.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s;i[o]&&Ko.isObject(i[o])||(i[o]=[]);return t(e,n,i[o],r)&&Ko.isArray(i[o])&&(i[o]=function(e){const t={},n=Object.keys(e);let i;const r=n.length;let o;for(i=0;i<r;i++)o=n[i],t[o]=e[o];return t}(i[o])),!s}if(Ko.isFormData(e)&&Ko.isFunction(e.entries)){const n={};return Ko.forEachEntry(e,((e,i)=>{t(function(e){return Ko.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const bs={transitional:us,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=Ko.isObject(e);r&&Ko.isHTMLForm(e)&&(e=new FormData(e));if(Ko.isFormData(e))return i?JSON.stringify(ys(e)):e;if(Ko.isArrayBuffer(e)||Ko.isBuffer(e)||Ko.isStream(e)||Ko.isFile(e)||Ko.isBlob(e)||Ko.isReadableStream(e))return e;if(Ko.isArrayBufferView(e))return e.buffer;if(Ko.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ns(e,new vs.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return vs.isNode&&Ko.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=Ko.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ns(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),function(e,t,n){if(Ko.isString(e))try{return(t||JSON.parse)(e),Ko.trim(e)}catch(Be){if("SyntaxError"!==Be.name)throw Be}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||bs.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(Ko.isResponse(e)||Ko.isReadableStream(e))return e;if(e&&Ko.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(Be){if(n){if("SyntaxError"===Be.name)throw Yo.from(Be,Yo.ERR_BAD_RESPONSE,this,null,this.response);throw Be}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vs.classes.FormData,Blob:vs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ko.forEach(["delete","get","head","post","put","patch"],(e=>{bs.headers[e]={}}));const ks=bs,ws=Ko.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ss=Symbol("internals");function Cs(e){return e&&String(e).trim().toLowerCase()}function Ts(e){return!1===e||null==e?e:Ko.isArray(e)?e.map(Ts):String(e)}function xs(e,t,n,i,r){return Ko.isFunction(i)?i.call(this,t,n):(r&&(t=n),Ko.isString(t)?Ko.isString(i)?-1!==t.indexOf(i):Ko.isRegExp(i)?i.test(t):void 0:void 0)}class Es{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=Cs(t);if(!r)throw new Error("header name must be a non-empty string");const o=Ko.findKey(i,r);(!o||void 0===i[o]||!0===n||void 0===n&&!1!==i[o])&&(i[o||t]=Ts(e))}const o=(e,t)=>Ko.forEach(e,((e,n)=>r(e,n,t)));if(Ko.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Ko.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,i,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&ws[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t);else if(Ko.isObject(e)&&Ko.isIterable(e)){let n,i,r={};for(const t of e){if(!Ko.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[i=t[0]]=(n=r[i])?Ko.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(r,t)}else null!=e&&r(t,e,n);return this}get(e,t){if(e=Cs(e)){const n=Ko.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(Ko.isFunction(t))return t.call(this,e,n);if(Ko.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Cs(e)){const n=Ko.findKey(this,e);return!(!n||void 0===this[n]||t&&!xs(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=Cs(e)){const r=Ko.findKey(n,e);!r||t&&!xs(0,n[r],r,t)||(delete n[r],i=!0)}}return Ko.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];e&&!xs(0,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return Ko.forEach(this,((i,r)=>{const o=Ko.findKey(n,r);if(o)return t[o]=Ts(i),void delete t[r];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();s!==r&&delete t[r],t[s]=Ts(i),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Ko.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&Ko.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Ss]=this[Ss]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=Cs(e);t[i]||(!function(e,t){const n=Ko.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[i]=!0)}return Ko.isArray(e)?e.forEach(i):i(e),this}}Es.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ko.reduceDescriptors(Es.prototype,((e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}})),Ko.freezeMethods(Es);const Ps=Es;function Os(e,t){const n=this||ks,i=t||n,r=Ps.from(i.headers);let o=i.data;return Ko.forEach(e,(function(e){o=e.call(n,o,r.normalize(),t?t.status:void 0)})),r.normalize(),o}function Rs(e){return!(!e||!e.__CANCEL__)}function _s(e,t,n){Yo.call(this,null==e?"canceled":e,Yo.ERR_CANCELED,t,n),this.name="CanceledError"}Ko.inherits(_s,Yo,{__CANCEL__:!0});const Ns=_s;function Is(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new Yo("Request failed with status code "+n.status,[Yo.ERR_BAD_REQUEST,Yo.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Ls=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=i[s];r||(r=c),n[o]=a,i[o]=c;let u=s,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-r<t)return;const h=l&&c-l;return h?Math.round(1e3*d/h):void 0}};const As=function(e,t){let n,i,r=0,o=1e3/t;const s=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=o,n=null,i&&(clearTimeout(i),i=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-r;for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];t>=o?s(c,e):(n=c,i||(i=setTimeout((()=>{i=null,s(n)}),o-t)))},()=>n&&s(n)]},Ms=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=Ls(50,250);return As((n=>{const o=n.loaded,s=n.lengthComputable?n.total:void 0,a=o-i,c=r(a);i=o;e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},Ds=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},js=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Ko.asap((()=>e(...n)))},Us=vs.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,vs.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(vs.origin),vs.navigator&&/(msie|trident)/i.test(vs.navigator.userAgent)):()=>!0,Fs=vs.hasStandardBrowserEnv?{write(e,t,n,i,r,o){const s=[e+"="+encodeURIComponent(t)];Ko.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Ko.isString(i)&&s.push("path="+i),Ko.isString(r)&&s.push("domain="+r),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Bs(e,t,n){let i=!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t);return e&&(i||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const zs=e=>e instanceof Ps?Fe({},e):e;function Vs(e,t){t=t||{};const n={};function i(e,t,n,i){return Ko.isPlainObject(e)&&Ko.isPlainObject(t)?Ko.merge.call({caseless:i},e,t):Ko.isPlainObject(t)?Ko.merge({},t):Ko.isArray(t)?t.slice():t}function r(e,t,n,r){return Ko.isUndefined(t)?Ko.isUndefined(e)?void 0:i(void 0,e,0,r):i(e,t,0,r)}function o(e,t){if(!Ko.isUndefined(t))return i(void 0,t)}function s(e,t){return Ko.isUndefined(t)?Ko.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(n,r,o){return o in t?i(n,r):o in e?i(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>r(zs(e),zs(t),0,!0)};return Ko.forEach(Object.keys(Object.assign({},e,t)),(function(i){const o=c[i]||r,s=o(e[i],t[i],i);Ko.isUndefined(s)&&o!==a||(n[i]=s)})),n}const Ws=e=>{const t=Vs({},e);let n,{data:i,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:c}=t;if(t.headers=a=Ps.from(a),t.url=cs(Bs(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Ko.isFormData(i))if(vs.hasStandardBrowserEnv||vs.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(vs.hasStandardBrowserEnv&&(r&&Ko.isFunction(r)&&(r=r(t)),r||!1!==r&&Us(t.url))){const e=o&&s&&Fs.read(s);e&&a.set(o,e)}return t},Hs="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const i=Ws(e);let r=i.data;const o=Ps.from(i.headers).normalize();let s,a,c,l,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=i;function f(){l&&l(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(s),i.signal&&i.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const i=Ps.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Is((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:i,config:e,request:m}),m=null}m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Yo("Request aborted",Yo.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Yo("Network Error",Yo.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||us;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new Yo(t,r.clarifyTimeoutError?Yo.ETIMEDOUT:Yo.ECONNABORTED,e,m)),m=null},void 0===r&&o.setContentType(null),"setRequestHeader"in m&&Ko.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Ko.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),d&&"json"!==d&&(m.responseType=i.responseType),p&&([c,u]=Ms(p,!0),m.addEventListener("progress",c)),h&&m.upload&&([a,l]=Ms(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",l)),(i.cancelToken||i.signal)&&(s=t=>{m&&(n(!t||t.type?new Ns(null,e,m):t),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(s),i.signal&&(i.signal.aborted?s():i.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);v&&-1===vs.protocols.indexOf(v)?n(new Yo("Unsupported protocol "+v+":",Yo.ERR_BAD_REQUEST,e)):m.send(r||null)}))},qs=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const r=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;i.abort(t instanceof Yo?t:new Ns(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,r(new Yo("timeout ".concat(t," of ms exceeded"),Yo.ETIMEDOUT))}),t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)})),e=null)};e.forEach((e=>e.addEventListener("abort",r)));const{signal:a}=i;return a.unsubscribe=()=>Ko.asap(s),a}};function Gs(e,t){this.v=e,this.k=t}function Ks(e){return function(){return new Js(e.apply(this,arguments))}}function Js(e){var t,n;function i(t,n){try{var o=e[t](n),s=o.value,a=s instanceof Gs;Promise.resolve(a?s.v:s).then((function(n){if(a){var c="return"===t?"return":"next";if(!s.k||n.done)return i(c,n);n=e[c](n).value}r(o.done?"return":"normal",n)}),(function(e){i("throw",e)}))}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise((function(o,s){var a={key:e,arg:r,resolve:o,reject:s,next:null};n?n=n.next=a:(t=n=a,i(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}function $s(e){return new Gs(e,0)}function Qs(e){var t={},n=!1;function i(t,i){return n=!0,i=new Promise((function(n){n(e[t](i))})),{done:!1,value:new Gs(i,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):i("return",e)}),t}function Ys(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new Xs(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function Xs(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Xs=function(e){this.s=e,this.n=e.next},Xs.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Xs(e)}Js.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Js.prototype.next=function(e){return this._invoke("next",e)},Js.prototype.throw=function(e){return this._invoke("throw",e)},Js.prototype.return=function(e){return this._invoke("return",e)};const Zs=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,r=0;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},ea=function(){var e=Ks((function*(e,t){var n,i=!1,r=!1;try{for(var o,s=Ys(ta(e));i=!(o=yield $s(s.next())).done;i=!1){const e=o.value;yield*Qs(Ys(Zs(e,t)))}}catch(bg){r=!0,n=bg}finally{try{i&&null!=s.return&&(yield $s(s.return()))}finally{if(r)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),ta=function(){var e=Ks((function*(e){if(e[Symbol.asyncIterator])return void(yield*Qs(Ys(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield $s(t.read());if(e)break;yield n}}finally{yield $s(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),na=(e,t,n,i)=>{const r=ea(e,t);let o,s=0,a=e=>{o||(o=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await r.next();if(t)return a(),void e.close();let o=i.byteLength;if(n){let e=s+=o;n(e)}e.enqueue(new Uint8Array(i))}catch(bg){throw a(bg),bg}},cancel:e=>(a(e),r.return())},{highWaterMark:2})},ia="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,ra=ia&&"function"===typeof ReadableStream,oa=ia&&("function"===typeof TextEncoder?(sa=new TextEncoder,e=>sa.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var sa;const aa=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!!e(...n)}catch(Be){return!1}},ca=ra&&aa((()=>{let e=!1;const t=new Request(vs.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),la=ra&&aa((()=>Ko.isReadableStream(new Response("").body))),ua={stream:la&&(e=>e.body)};var da;ia&&(da=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!ua[e]&&(ua[e]=Ko.isFunction(da[e])?t=>t[e]():(t,n)=>{throw new Yo("Response type '".concat(e,"' is not supported"),Yo.ERR_NOT_SUPPORT,n)})})));const ha=async(e,t)=>{const n=Ko.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Ko.isBlob(e))return e.size;if(Ko.isSpecCompliantForm(e)){const t=new Request(vs.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Ko.isArrayBufferView(e)||Ko.isArrayBuffer(e)?e.byteLength:(Ko.isURLSearchParams(e)&&(e+=""),Ko.isString(e)?(await oa(e)).byteLength:void 0)})(t):n},pa=ia&&(async e=>{let{url:t,method:n,data:i,signal:r,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:h}=Ws(e);l=l?(l+"").toLowerCase():"text";let p,f=qs([r,o&&o.toAbortSignal()],s);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(c&&ca&&"get"!==n&&"head"!==n&&0!==(g=await ha(u,i))){let e,n=new Request(t,{method:"POST",body:i,duplex:"half"});if(Ko.isFormData(i)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Ds(g,Ms(js(c)));i=na(n.body,65536,e,t)}}Ko.isString(d)||(d=d?"include":"omit");const r="credentials"in Request.prototype;p=new Request(t,Fe(Fe({},h),{},{signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:r?d:void 0}));let o=await fetch(p,h);const s=la&&("stream"===l||"response"===l);if(la&&(a||s&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=Ko.toFiniteNumber(o.headers.get("content-length")),[n,i]=a&&Ds(t,Ms(js(a),!0))||[];o=new Response(na(o.body,65536,n,(()=>{i&&i(),m&&m()})),e)}l=l||"text";let v=await ua[Ko.findKey(ua,l)||"text"](o,e);return!s&&m&&m(),await new Promise(((t,n)=>{Is(t,n,{data:v,headers:Ps.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})}))}catch(bg){if(m&&m(),bg&&"TypeError"===bg.name&&/Load failed|fetch/i.test(bg.message))throw Object.assign(new Yo("Network Error",Yo.ERR_NETWORK,e,p),{cause:bg.cause||bg});throw Yo.from(bg,bg&&bg.code,e,p)}}),fa={http:null,xhr:Hs,fetch:pa};Ko.forEach(fa,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Be){}Object.defineProperty(e,"adapterName",{value:t})}}));const ma=e=>"- ".concat(e),ga=e=>Ko.isFunction(e)||null===e||!1===e,va=e=>{e=Ko.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let o=0;o<t;o++){let t;if(n=e[o],i=n,!ga(n)&&(i=fa[(t=String(n)).toLowerCase()],void 0===i))throw new Yo("Unknown adapter '".concat(t,"'"));if(i)break;r[t||"#"+o]=i}if(!i){const e=Object.entries(r).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(ma).join("\n"):" "+ma(e[0]):"as no adapter specified";throw new Yo("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function ya(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ns(null,e)}function ba(e){ya(e),e.headers=Ps.from(e.headers),e.data=Os.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return va(e.adapter||ks.adapter)(e).then((function(t){return ya(e),t.data=Os.call(e,e.transformResponse,t),t.headers=Ps.from(t.headers),t}),(function(t){return Rs(t)||(ya(e),t&&t.response&&(t.response.data=Os.call(e,e.transformResponse,t.response),t.response.headers=Ps.from(t.response.headers))),Promise.reject(t)}))}const ka="1.10.0",wa={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{wa[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Sa={};wa.transitional=function(e,t,n){function i(e,t){return"[Axios v"+ka+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,o)=>{if(!1===e)throw new Yo(i(r," has been removed"+(t?" in "+t:"")),Yo.ERR_DEPRECATED);return t&&!Sa[r]&&(Sa[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},wa.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Ca={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Yo("options must be an object",Yo.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const o=i[r],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new Yo("option "+o+" must be "+n,Yo.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Yo("Unknown option "+o,Yo.ERR_BAD_OPTION)}},validators:wa},Ta=Ca.validators;class xa{constructor(e){this.defaults=e||{},this.interceptors={request:new ls,response:new ls}}async request(e,t){try{return await this._request(e,t)}catch(bg){if(bg instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{bg.stack?n&&!String(bg.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(bg.stack+="\n"+n):bg.stack=n}catch(Be){}}throw bg}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Vs(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&Ca.assertOptions(n,{silentJSONParsing:Ta.transitional(Ta.boolean),forcedJSONParsing:Ta.transitional(Ta.boolean),clarifyTimeoutError:Ta.transitional(Ta.boolean)},!1),null!=i&&(Ko.isFunction(i)?t.paramsSerializer={serialize:i}:Ca.assertOptions(i,{encode:Ta.function,serialize:Ta.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ca.assertOptions(t,{baseUrl:Ta.spelling("baseURL"),withXsrfToken:Ta.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&Ko.merge(r.common,r[t.method]);r&&Ko.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=Ps.concat(o,r);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[ba.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{l=ba.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return cs(Bs((e=Vs(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Ko.forEach(["delete","get","head","options"],(function(e){xa.prototype[e]=function(t,n){return this.request(Vs(n||{},{method:e,url:t,data:(n||{}).data}))}})),Ko.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(Vs(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}xa.prototype[e]=t(),xa.prototype[e+"Form"]=t(!0)}));const Ea=xa;class Pa{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,r){n.reason||(n.reason=new Ns(e,i,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Pa((function(t){e=t}));return{token:t,cancel:e}}}const Oa=Pa;const Ra={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ra).forEach((e=>{let[t,n]=e;Ra[n]=t}));const _a=Ra;const Na=function e(t){const n=new Ea(t),i=co(Ea.prototype.request,n);return Ko.extend(i,Ea.prototype,n,{allOwnKeys:!0}),Ko.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(Vs(t,n))},i}(ks);Na.Axios=Ea,Na.CanceledError=Ns,Na.CancelToken=Oa,Na.isCancel=Rs,Na.VERSION=ka,Na.toFormData=ns,Na.AxiosError=Yo,Na.Cancel=Na.CanceledError,Na.all=function(e){return Promise.all(e)},Na.spread=function(e){return function(t){return e.apply(null,t)}},Na.isAxiosError=function(e){return Ko.isObject(e)&&!0===e.isAxiosError},Na.mergeConfig=Vs,Na.AxiosHeaders=Ps,Na.formToJSON=e=>ys(Ko.isHTMLForm(e)?new FormData(e):e),Na.getAdapter=va,Na.HttpStatusCode=_a,Na.default=Na;const Ia=Na,La="input",Aa="output",Ma=e=>{let{codeRef:t,socketRef:n,roomId:i}=e;const[o,s]=(0,r.useState)(La),[a,c]=(0,r.useState)(""),[l,u]=(0,r.useState)(""),[d,h]=(0,r.useState)("5");(0,r.useEffect)((()=>{if(n.current){const e=e=>{let{input:t}=e;c(t)},t=e=>{let{output:t}=e;u(t),s(Aa)},i=e=>{let{language:t}=e;h(t)},r=e=>{let{currentState:t}=e;s(t)},o=()=>{Zt.success("Another user is running the code...")};return n.current.on(ji().INPUT_CHANGE,e),n.current.on(ji().OUTPUT_CHANGE,t),n.current.on(ji().LANGUAGE_CHANGE,i),n.current.on(ji().STATE_CHANGE,r),n.current.on(ji().CODE_RUN,o),()=>{n.current&&(n.current.off(ji().INPUT_CHANGE,e),n.current.off(ji().OUTPUT_CHANGE,t),n.current.off(ji().LANGUAGE_CHANGE,i),n.current.off(ji().STATE_CHANGE,r),n.current.off(ji().CODE_RUN,o))}}}),[n.current]);const p=e=>{s(e),n.current&&n.current.connected&&n.current.emit(ji().STATE_CHANGE,{roomId:i,currentState:e})};return(0,en.jsxs)("div",{className:"inputOutputWrap",children:[(0,en.jsxs)("div",{className:"btnWrap",children:[(0,en.jsxs)("div",{children:[(0,en.jsx)("button",{style:{opacity:o===La?"1":"0.8"},onClick:()=>p(La),children:"Input"}),(0,en.jsx)("button",{style:{opacity:o===Aa?"1":"0.8"},onClick:()=>p(Aa),children:"Output"})]}),(0,en.jsxs)("div",{children:[(0,en.jsxs)("select",{value:d,onChange:e=>{return t=e.target.value,h(t),void(n.current&&n.current.connected&&n.current.emit(ji().LANGUAGE_CHANGE,{roomId:i,language:t}));var t},children:[(0,en.jsx)("option",{value:"5",children:"Python"}),(0,en.jsx)("option",{value:"7",children:"C++"}),(0,en.jsx)("option",{value:"4",children:"Java"}),(0,en.jsx)("option",{value:"17",children:"JavaScript"})]}),(0,en.jsx)("button",{onClick:()=>{Zt.success("Running Code"),n.current&&n.current.connected&&n.current.emit(ji().CODE_RUN,{roomId:i});var e={method:"POST",url:"https://code-compiler.p.rapidapi.com/v2",headers:{"content-type":"application/x-www-form-urlencoded","x-rapidapi-host":"code-compiler.p.rapidapi.com","x-rapidapi-key":"0ca192bd34mshca25146e7ea1142p17a87ajsn20830dca802b"},data:{LanguageChoice:d,Program:t.current,Input:a}};Ia.request(e).then((function(e){const t=e.data.Errors||e.data.Result||"No output";u(t),s(Aa),n.current&&n.current.connected&&n.current.emit(ji().OUTPUT_CHANGE,{roomId:i,output:t}),e.data.Errors?Zt.error("Code failed !"):Zt.success("Code executed successfully !")})).catch((function(e){console.error(e);const t=e.toString();u(t),s(Aa),n.current&&n.current.connected&&n.current.emit(ji().OUTPUT_CHANGE,{roomId:i,output:t}),Zt.error("Code failed !")}))},children:"Run"})]})]}),(0,en.jsx)("textarea",{name:"",id:"",cols:"30",rows:"10",placeholder:"Enter your input here...",readOnly:o===Aa,value:o===La?a:l,onChange:e=>{return t=e.target.value,c(t),void(n.current&&n.current.connected&&n.current.emit(ji().INPUT_CHANGE,{roomId:i,input:t}));var t}})]})};function Da(e,t){return t.forEach((function(t){t&&"string"!==typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var ja=Object.defineProperty,Ua=(e,t,n)=>((e,t,n)=>t in e?ja(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Fa{constructor(){Ua(this,"_locking"),Ua(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){let e;this._locks+=1;const t=new Promise((t=>e=()=>{this._locks-=1,t()})),n=this._locking.then((()=>e));return this._locking=this._locking.then((()=>t)),n}}function Ba(e,t){if(!e)throw new Error(t)}function za(e){if("number"!==typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)}function Va(e){if("number"!==typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function Wa(e){if("number"!==typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}const Ha=Symbol("@bufbuild/protobuf/enum-type");function qa(e){const t=e[Ha];return Ba(t,"missing enum type on enum object"),t}function Ga(e,t,n,i){e[Ha]=Ka(t,n.map((t=>({no:t.no,name:t.name,localName:e[t.no]}))))}function Ka(e,t,n){const i=Object.create(null),r=Object.create(null),o=[];for(const s of t){const e=$a(s);o.push(e),i[s.name]=e,r[s.no]=e}return{typeName:e,values:o,findName:e=>i[e],findNumber:e=>r[e]}}function Ja(e,t,n){const i={};for(const r of t){const e=$a(r);i[e.localName]=e.no,i[e.no]=e.localName}return Ga(i,e,t),i}function $a(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class Qa{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=this.getType().runtime.bin,i=n.makeReadOptions(t);return n.readMessage(this,i.readerFactory(e),e.byteLength,i),this}fromJson(e,t){const n=this.getType(),i=n.runtime.json,r=i.makeReadOptions(t);return i.readMessage(n,e,r,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(Be){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(Be instanceof Error?Be.message:String(Be)))}return this.fromJson(n,t)}toBinary(e){const t=this.getType().runtime.bin,n=t.makeWriteOptions(e),i=n.writerFactory();return t.writeMessage(this,i,n),i.finish()}toJson(e){const t=this.getType().runtime.json,n=t.makeWriteOptions(e);return t.writeMessage(this,n)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,null!==(t=null===e||void 0===e?void 0:e.prettySpaces)&&void 0!==t?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function Ya(){let e=0,t=0;for(let i=0;i<28;i+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<i,0==(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let i=3;i<=31;i+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<i,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Xa(e,t,n){for(let o=0;o<28;o+=7){const i=e>>>o,r=!(i>>>7==0&&0==t),s=255&(r?128|i:i);if(n.push(s),!r)return}const i=e>>>28&15|(7&t)<<4,r=!(t>>3==0);if(n.push(255&(r?128|i:i)),r){for(let e=3;e<31;e+=7){const i=t>>>e,r=!(i>>>7==0),o=255&(r?128|i:i);if(n.push(o),!r)return}n.push(t>>>31&1)}}const Za=4294967296;function ec(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let i=0,r=0;function o(t,o){const s=Number(e.slice(t,o));r*=n,i=i*n+s,i>=Za&&(r+=i/Za|0,i%=Za)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),t?ic(i,r):nc(i,r)}function tc(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(Za*t+e);const n=16777215&(e>>>24|t<<8),i=t>>16&65535;let r=(16777215&e)+6777216*n+6710656*i,o=n+8147497*i,s=2*i;const a=1e7;return r>=a&&(o+=Math.floor(r/a),r%=a),o>=a&&(s+=Math.floor(o/a),o%=a),s.toString()+rc(o)+rc(r)}function nc(e,t){return{lo:0|e,hi:0|t}}function ic(e,t){return t=~t,e?e=1+~e:t+=1,nc(e,t)}const rc=e=>{const t=String(e);return"0000000".slice(t.length)+t};function oc(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function sc(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;0!==(128&e)&&n<10;n++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}const ac=function(){const e=new DataView(new ArrayBuffer(8));if("function"===typeof BigInt&&"function"===typeof e.getBigInt64&&"function"===typeof e.getBigUint64&&"function"===typeof e.setBigInt64&&"function"===typeof e.setBigUint64&&("object"!=typeof process||"1"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"http://localhost:8080"}.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),i=BigInt("0"),r=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const i="bigint"==typeof e?e:BigInt(e);if(i>n||i<t)throw new Error("int64 invalid: ".concat(e));return i},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>r||t<i)throw new Error("uint64 invalid: ".concat(e));return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}const t=e=>Ba(/^-?[0-9]+$/.test(e),"int64 invalid: ".concat(e)),n=e=>Ba(/^[0-9]+$/.test(e),"uint64 invalid: ".concat(e));return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),t(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),n(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),t(e),ec(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),n(e),ec(e)),dec:(e,t)=>function(e,t){let n=nc(e,t);const i=2147483648&n.hi;i&&(n=ic(n.lo,n.hi));const r=tc(n.lo,n.hi);return i?"-"+r:r}(e,t),uDec:(e,t)=>tc(e,t)}}();var cc,lc,uc;function dc(e,t,n){if(t===n)return!0;if(e==cc.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array))return!1;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}switch(e){case cc.UINT64:case cc.FIXED64:case cc.INT64:case cc.SFIXED64:case cc.SINT64:return t==n}return!1}function hc(e,t){switch(e){case cc.BOOL:return!1;case cc.UINT64:case cc.FIXED64:case cc.INT64:case cc.SFIXED64:case cc.SINT64:return 0==t?ac.zero:"0";case cc.DOUBLE:case cc.FLOAT:return 0;case cc.BYTES:return new Uint8Array(0);case cc.STRING:return"";default:return 0}}function pc(e,t){switch(e){case cc.BOOL:return!1===t;case cc.STRING:return""===t;case cc.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return 0==t}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(cc||(cc={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"}(lc||(lc={})),function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(uc||(uc={}));class fc{constructor(e){this.stack=[],this.textEncoder=null!==e&&void 0!==e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),n=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],n),n+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Va(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return za(e),oc(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Wa(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Va(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){za(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return za(e),oc(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=ac.enc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=ac.uEnc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=ac.enc(e);return Xa(t.lo,t.hi,this.buf),this}sint64(e){let t=ac.enc(e),n=t.hi>>31;return Xa(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=ac.uEnc(e);return Xa(t.lo,t.hi,this.buf),this}}class mc{constructor(e,t){this.varint64=Ya,this.uint32=sc,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!==t&&void 0!==t?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case uc.Varint:for(;128&this.buf[this.pos++];);break;case uc.Bit64:this.pos+=4;case uc.Bit32:this.pos+=4;break;case uc.LengthDelimited:let n=this.uint32();this.pos+=n;break;case uc.StartGroup:for(;;){const[e,n]=this.tag();if(n===uc.EndGroup){if(void 0!==t&&e!==t)throw new Error("invalid end group tag");break}this.skip(n,e)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return ac.dec(...this.varint64())}uint64(){return ac.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,ac.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ac.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ac.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function gc(e){const t=e.field.localName,n=Object.create(null);return n[t]=function(e){const t=e.field;if(t.repeated)return[];if(void 0!==t.default)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return hc(t.T,t.L);case"message":const e=t.T,n=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(n):n;case"map":throw"map fields are not allowed to be extensions"}}(e),[n,()=>n[t]]}let vc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),yc=[];for(let n=0;n<vc.length;n++)yc[vc[n].charCodeAt(0)]=n;yc["-".charCodeAt(0)]=vc.indexOf("+"),yc["_".charCodeAt(0)]=vc.indexOf("/");const bc={dec(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,i=new Uint8Array(t),r=0,o=0,s=0;for(let a=0;a<e.length;a++){if(n=yc[e.charCodeAt(a)],void 0===n)switch(e[a]){case"=":o=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(o){case 0:s=n,o=1;break;case 1:i[r++]=s<<2|(48&n)>>4,s=n,o=2;break;case 2:i[r++]=(15&s)<<4|(60&n)>>2,s=n,o=3;break;case 3:i[r++]=(3&s)<<6|n,o=0}}if(1==o)throw Error("invalid base64 string.");return i.subarray(0,r)},enc(e){let t,n="",i=0,r=0;for(let o=0;o<e.length;o++)switch(t=e[o],i){case 0:n+=vc[t>>2],r=(3&t)<<4,i=1;break;case 1:n+=vc[r|t>>4],r=(15&t)<<2,i=2;break;case 2:n+=vc[r|t>>6],n+=vc[63&t],i=0}return i&&(n+=vc[r],n+="=",1==i&&(n+="=")),n}};function kc(e,t,n){Cc(t,e);const i=t.runtime.bin.makeReadOptions(n),r=function(e,t){if(!t.repeated&&("enum"==t.kind||"scalar"==t.kind)){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter((e=>e.no===t.no))}(e.getType().runtime.bin.listUnknownFields(e),t.field),[o,s]=gc(t);for(const a of r)t.runtime.bin.readField(o,i.readerFactory(a.data),t.field,a.wireType,i);return s()}function wc(e,t,n,i){Cc(t,e);const r=t.runtime.bin.makeReadOptions(i),o=t.runtime.bin.makeWriteOptions(i);if(Sc(e,t)){const n=e.getType().runtime.bin.listUnknownFields(e).filter((e=>e.no!=t.field.no));e.getType().runtime.bin.discardUnknownFields(e);for(const t of n)e.getType().runtime.bin.onUnknownField(e,t.no,t.wireType,t.data)}const s=o.writerFactory();let a=t.field;a.opt||a.repeated||"enum"!=a.kind&&"scalar"!=a.kind||(a=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(a,n,s,o);const c=r.readerFactory(s.finish());for(;c.pos<c.len;){const[t,n]=c.tag(),i=c.skip(n,t);e.getType().runtime.bin.onUnknownField(e,t,n,i)}}function Sc(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find((e=>e.no==t.field.no))}function Cc(e,t){Ba(e.extendee.typeName==t.getType().typeName,"extension ".concat(e.typeName," can only be applied to message ").concat(e.extendee.typeName))}function Tc(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?void 0!==t[n]:"enum"==e.kind?t[n]!==e.T.values[0].no:!pc(e.T,t[n]);case"message":return void 0!==t[n];case"map":return Object.keys(t[n]).length>0}}function xc(e,t){const n=e.localName,i=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=i?e.T.values[0].no:void 0;break;case"scalar":t[n]=i?hc(e.T,e.L):void 0;break;case"message":t[n]=void 0}}function Ec(e,t){if(null===e||"object"!=typeof e)return!1;if(!Object.getOwnPropertyNames(Qa.prototype).every((t=>t in e&&"function"==typeof e[t])))return!1;const n=e.getType();return null!==n&&"function"==typeof n&&"typeName"in n&&"string"==typeof n.typeName&&(void 0===t||n.typeName==t.typeName)}function Pc(e,t){return Ec(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}cc.DOUBLE,cc.FLOAT,cc.INT64,cc.UINT64,cc.INT32,cc.UINT32,cc.BOOL,cc.STRING,cc.BYTES;const Oc={ignoreUnknownFields:!1},Rc={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function _c(e){return e?Object.assign(Object.assign({},Oc),e):Oc}function Nc(e){return e?Object.assign(Object.assign({},Rc),e):Rc}const Ic=Symbol(),Lc=Symbol();function Ac(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function Mc(e,t,n,i,r){let o=n.localName;if(n.repeated){if(Ba("map"!=n.kind),null===t)return;if(!Array.isArray(t))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ac(t)));const s=e[o];for(const e of t){if(null===e)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ac(e)));switch(n.kind){case"message":s.push(n.T.fromJson(e,i));break;case"enum":const t=Uc(n.T,e,i.ignoreUnknownFields,!0);t!==Lc&&s.push(t);break;case"scalar":try{s.push(jc(n.T,e,n.L,!0))}catch(Be){let i="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ac(e));throw Be instanceof Error&&Be.message.length>0&&(i+=": ".concat(Be.message)),new Error(i)}}}}else if("map"==n.kind){if(null===t)return;if("object"!=typeof t||Array.isArray(t))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ac(t)));const s=e[o];for(const[e,o]of Object.entries(t)){if(null===o)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let a;try{a=Dc(n.K,e)}catch(Be){let i="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ac(t));throw Be instanceof Error&&Be.message.length>0&&(i+=": ".concat(Be.message)),new Error(i)}switch(n.V.kind){case"message":s[a]=n.V.T.fromJson(o,i);break;case"enum":const e=Uc(n.V.T,o,i.ignoreUnknownFields,!0);e!==Lc&&(s[a]=e);break;case"scalar":try{s[a]=jc(n.V.T,o,lc.BIGINT,!0)}catch(Be){let i="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ac(t));throw Be instanceof Error&&Be.message.length>0&&(i+=": ".concat(Be.message)),new Error(i)}}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:o},o="value"),n.kind){case"message":const s=n.T;if(null===t&&"google.protobuf.Value"!=s.typeName)return;let a=e[o];Ec(a)?a.fromJson(t,i):(e[o]=a=s.fromJson(t,i),s.fieldWrapper&&!n.oneof&&(e[o]=s.fieldWrapper.unwrapField(a)));break;case"enum":const c=Uc(n.T,t,i.ignoreUnknownFields,!1);switch(c){case Ic:xc(n,e);break;case Lc:break;default:e[o]=c}break;case"scalar":try{const i=jc(n.T,t,n.L,!1);if(i===Ic)xc(n,e);else e[o]=i}catch(Be){let i="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Ac(t));throw Be instanceof Error&&Be.message.length>0&&(i+=": ".concat(Be.message)),new Error(i)}}}function Dc(e,t){if(e===cc.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1}return jc(e,t,lc.BIGINT,!0).toString()}function jc(e,t,n,i){if(null===t)return i?hc(e,n):Ic;switch(e){case cc.DOUBLE:case cc.FLOAT:if("NaN"===t)return Number.NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if(""===t)break;if("string"==typeof t&&t.trim().length!==t.length)break;if("string"!=typeof t&&"number"!=typeof t)break;const i=Number(t);if(Number.isNaN(i))break;if(!Number.isFinite(i))break;return e==cc.FLOAT&&Wa(i),i;case cc.INT32:case cc.FIXED32:case cc.SFIXED32:case cc.SINT32:case cc.UINT32:let r;if("number"==typeof t?r=t:"string"==typeof t&&t.length>0&&t.trim().length===t.length&&(r=Number(t)),void 0===r)break;return e==cc.UINT32||e==cc.FIXED32?Va(r):za(r),r;case cc.INT64:case cc.SFIXED64:case cc.SINT64:if("number"!=typeof t&&"string"!=typeof t)break;const o=ac.parse(t);return n?o.toString():o;case cc.FIXED64:case cc.UINT64:if("number"!=typeof t&&"string"!=typeof t)break;const s=ac.uParse(t);return n?s.toString():s;case cc.BOOL:if("boolean"!==typeof t)break;return t;case cc.STRING:if("string"!==typeof t)break;try{encodeURIComponent(t)}catch(Be){throw new Error("invalid UTF8")}return t;case cc.BYTES:if(""===t)return new Uint8Array(0);if("string"!==typeof t)break;return bc.dec(t)}throw new Error}function Uc(e,t,n,i){if(null===t)return"google.protobuf.NullValue"==e.typeName?0:i?e.values[0].no:Ic;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const i=e.findName(t);if(void 0!==i)return i.no;if(n)return Lc}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(Ac(t)))}function Fc(e){return!(!e.repeated&&"map"!=e.kind)||!e.oneof&&("message"!=e.kind&&(!e.opt&&!e.req))}function Bc(e,t,n){if("map"==e.kind){Ba("object"==typeof t&&null!=t);const i={},r=Object.entries(t);switch(e.V.kind){case"scalar":for(const[n,o]of r)i[n.toString()]=Vc(e.V.T,o);break;case"message":for(const[e,o]of r)i[e.toString()]=o.toJson(n);break;case"enum":const t=e.V.T;for(const[e,o]of r)i[e.toString()]=zc(t,o,n.enumAsInteger)}return n.emitDefaultValues||r.length>0?i:void 0}if(e.repeated){Ba(Array.isArray(t));const i=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++)i.push(Vc(e.T,t[n]));break;case"enum":for(let r=0;r<t.length;r++)i.push(zc(e.T,t[r],n.enumAsInteger));break;case"message":for(let e=0;e<t.length;e++)i.push(t[e].toJson(n))}return n.emitDefaultValues||i.length>0?i:void 0}switch(e.kind){case"scalar":return Vc(e.T,t);case"enum":return zc(e.T,t,n.enumAsInteger);case"message":return Pc(e.T,t).toJson(n)}}function zc(e,t,n){var i;if(Ba("number"==typeof t),"google.protobuf.NullValue"==e.typeName)return null;if(n)return t;const r=e.findNumber(t);return null!==(i=null===r||void 0===r?void 0:r.name)&&void 0!==i?i:t}function Vc(e,t){switch(e){case cc.INT32:case cc.SFIXED32:case cc.SINT32:case cc.FIXED32:case cc.UINT32:return Ba("number"==typeof t),t;case cc.FLOAT:case cc.DOUBLE:return Ba("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case cc.STRING:return Ba("string"==typeof t),t;case cc.BOOL:return Ba("boolean"==typeof t),t;case cc.UINT64:case cc.FIXED64:case cc.INT64:case cc.SFIXED64:case cc.SINT64:return Ba("bigint"==typeof t||"string"==typeof t||"number"==typeof t),t.toString();case cc.BYTES:return Ba(t instanceof Uint8Array),bc.enc(t)}}const Wc=Symbol("@bufbuild/protobuf/unknown-fields"),Hc={readUnknownFields:!0,readerFactory:e=>new mc(e)},qc={writeUnknownFields:!0,writerFactory:()=>new fc};function Gc(e){return e?Object.assign(Object.assign({},Hc),e):Hc}function Kc(e){return e?Object.assign(Object.assign({},qc),e):qc}function Jc(e,t,n,i,r){let{repeated:o,localName:s}=n;switch(n.oneof&&((e=e[n.oneof.localName]).case!=s&&delete e.value,e.case=s,s="value"),n.kind){case"scalar":case"enum":const a="enum"==n.kind?cc.INT32:n.T;let c=Yc;if("scalar"==n.kind&&n.L>0&&(c=Qc),o){let n=e[s];if(i==uc.LengthDelimited&&a!=cc.STRING&&a!=cc.BYTES){let e=t.uint32()+t.pos;for(;t.pos<e;)n.push(c(t,a))}else n.push(c(t,a))}else e[s]=c(t,a);break;case"message":const l=n.T;o?e[s].push($c(t,new l,r,n)):Ec(e[s])?$c(t,e[s],r,n):(e[s]=$c(t,new l,r,n),!l.fieldWrapper||n.oneof||n.repeated||(e[s]=l.fieldWrapper.unwrapField(e[s])));break;case"map":let[u,d]=function(e,t,n){const i=t.uint32(),r=t.pos+i;let o,s;for(;t.pos<r;){const[i]=t.tag();switch(i){case 1:o=Yc(t,e.K);break;case 2:switch(e.V.kind){case"scalar":s=Yc(t,e.V.T);break;case"enum":s=t.int32();break;case"message":s=$c(t,new e.V.T,n,void 0)}}}void 0===o&&(o=hc(e.K,lc.BIGINT));"string"!=typeof o&&"number"!=typeof o&&(o=o.toString());if(void 0===s)switch(e.V.kind){case"scalar":s=hc(e.V.T,lc.BIGINT);break;case"enum":s=e.V.T.values[0].no;break;case"message":s=new e.V.T}return[o,s]}(n,t,r);e[s][u]=d}}function $c(e,t,n,i){const r=t.getType().runtime.bin,o=null===i||void 0===i?void 0:i.delimited;return r.readMessage(t,e,o?i.no:e.uint32(),n,o),t}function Qc(e,t){const n=Yc(e,t);return"bigint"==typeof n?n.toString():n}function Yc(e,t){switch(t){case cc.STRING:return e.string();case cc.BOOL:return e.bool();case cc.DOUBLE:return e.double();case cc.FLOAT:return e.float();case cc.INT32:return e.int32();case cc.INT64:return e.int64();case cc.UINT64:return e.uint64();case cc.FIXED64:return e.fixed64();case cc.BYTES:return e.bytes();case cc.FIXED32:return e.fixed32();case cc.SFIXED32:return e.sfixed32();case cc.SFIXED64:return e.sfixed64();case cc.SINT64:return e.sint64();case cc.UINT32:return e.uint32();case cc.SINT32:return e.sint32()}}function Xc(e,t,n,i){Ba(void 0!==t);const r=e.repeated;switch(e.kind){case"scalar":case"enum":let o="enum"==e.kind?cc.INT32:e.T;if(r)if(Ba(Array.isArray(t)),e.packed)!function(e,t,n,i){if(!i.length)return;e.tag(n,uc.LengthDelimited).fork();let[,r]=nl(t);for(let o=0;o<i.length;o++)e[r](i[o]);e.join()}(n,o,e.no,t);else for(const i of t)tl(n,o,e.no,i);else tl(n,o,e.no,t);break;case"message":if(r){Ba(Array.isArray(t));for(const r of t)el(n,i,e,r)}else el(n,i,e,t);break;case"map":Ba("object"==typeof t&&null!=t);for(const[r,s]of Object.entries(t))Zc(n,i,e,r,s)}}function Zc(e,t,n,i,r){e.tag(n.no,uc.LengthDelimited),e.fork();let o=i;switch(n.K){case cc.INT32:case cc.FIXED32:case cc.UINT32:case cc.SFIXED32:case cc.SINT32:o=Number.parseInt(i);break;case cc.BOOL:Ba("true"==i||"false"==i),o="true"==i}switch(tl(e,n.K,1,o),n.V.kind){case"scalar":tl(e,n.V.T,2,r);break;case"enum":tl(e,cc.INT32,2,r);break;case"message":Ba(void 0!==r),e.tag(2,uc.LengthDelimited).bytes(r.toBinary(t))}e.join()}function el(e,t,n,i){const r=Pc(n.T,i);n.delimited?e.tag(n.no,uc.StartGroup).raw(r.toBinary(t)).tag(n.no,uc.EndGroup):e.tag(n.no,uc.LengthDelimited).bytes(r.toBinary(t))}function tl(e,t,n,i){Ba(void 0!==i);let[r,o]=nl(t);e.tag(n,r)[o](i)}function nl(e){let t=uc.Varint;switch(e){case cc.BYTES:case cc.STRING:t=uc.LengthDelimited;break;case cc.DOUBLE:case cc.FIXED64:case cc.SFIXED64:t=uc.Bit64;break;case cc.FIXED32:case cc.SFIXED32:case cc.FLOAT:t=uc.Bit32}return[t,cc[e].toLowerCase()]}function il(e){if(void 0===e)return e;if(Ec(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function rl(e){return e instanceof Uint8Array?e:new Uint8Array(e)}class ol{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const e={};for(const t of this.list())e[t.jsonName]=e[t.name]=t;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){const e={};for(const t of this.list())e[t.no]=t;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(((e,t)=>e.no-t.no))),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function sl(e,t){const n=cl(e);return t?n:pl(hl(n))}const al=cl;function cl(e){let t=!1;const n=[];for(let i=0;i<e.length;i++){let r=e.charAt(i);switch(r){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),t=!1;break;default:t&&(t=!1,r=r.toUpperCase()),n.push(r)}}return n.join("")}const ll=new Set(["constructor","toString","toJSON","valueOf"]),ul=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),dl=e=>"".concat(e,"$"),hl=e=>ul.has(e)?dl(e):e,pl=e=>ll.has(e)?dl(e):e;class fl{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=sl(e,!1)}addField(e){Ba(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}const ml=(gl=e=>new ol(e,(e=>function(e){var t,n,i,r,o,s;const a=[];let c;for(const l of"function"==typeof e?e():e){const e=l;if(e.localName=sl(l.name,void 0!==l.oneof),e.jsonName=null!==(t=l.jsonName)&&void 0!==t?t:al(l.name),e.repeated=null!==(n=l.repeated)&&void 0!==n&&n,"scalar"==l.kind&&(e.L=null!==(i=l.L)&&void 0!==i?i:lc.BIGINT),e.delimited=null!==(r=l.delimited)&&void 0!==r&&r,e.req=null!==(o=l.req)&&void 0!==o&&o,e.opt=null!==(s=l.opt)&&void 0!==s&&s,void 0===l.packed&&(e.packed="enum"==l.kind||"scalar"==l.kind&&l.T!=cc.BYTES&&l.T!=cc.STRING),void 0!==l.oneof){const t="string"==typeof l.oneof?l.oneof:l.oneof.name;c&&c.name==t||(c=new fl(t)),e.oneof=c,c.addField(e)}a.push(e)}return a}(e))),vl=e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,i=e;if(t.repeated)i[n]=[];else switch(t.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=hc(t.T,t.L)}}},{syntax:"proto3",json:{makeReadOptions:_c,makeWriteOptions:Nc,readMessage(e,t,n,i){if(null==t||Array.isArray(t)||"object"!=typeof t)throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(Ac(t)));i=null!==i&&void 0!==i?i:new e;const r=new Map,o=n.typeRegistry;for(const[s,a]of Object.entries(t)){const t=e.fields.findJsonName(s);if(t){if(t.oneof){if(null===a&&"scalar"==t.kind)continue;const n=r.get(t.oneof);if(void 0!==n)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(t.oneof.name,'" present: "').concat(n,'", "').concat(s,'"'));r.set(t.oneof,s)}Mc(i,a,t,n,e)}else{let t=!1;if((null===o||void 0===o?void 0:o.findExtension)&&s.startsWith("[")&&s.endsWith("]")){const r=o.findExtension(s.substring(1,s.length-1));if(r&&r.extendee.typeName==e.typeName){t=!0;const[e,o]=gc(r);Mc(e,a,r.field,n,r),wc(i,r,o(),n)}}if(!t&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(s,'" is unknown'))}}return i},writeMessage(e,t){const n=e.getType(),i={};let r;try{for(r of n.fields.byNumber()){if(!Tc(r,e)){if(r.req)throw"required field not set";if(!t.emitDefaultValues)continue;if(!Fc(r))continue}const n=Bc(r,r.oneof?e[r.oneof.localName].value:e[r.localName],t);void 0!==n&&(i[t.useProtoFieldName?r.name:r.jsonName]=n)}const o=t.typeRegistry;if(null===o||void 0===o?void 0:o.findExtensionFor)for(const r of n.runtime.bin.listUnknownFields(e)){const s=o.findExtensionFor(n.typeName,r.no);if(s&&Sc(e,s)){const n=kc(e,s,t),r=Bc(s.field,n,t);void 0!==r&&(i[s.field.jsonName]=r)}}}catch(Be){const t=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),i=Be instanceof Error?Be.message:String(Be);throw new Error(t+(i.length>0?": ".concat(i):""))}return i},readScalar:(e,t,n)=>jc(e,t,null!==n&&void 0!==n?n:lc.BIGINT,!0),writeScalar(e,t,n){if(void 0!==t)return n||pc(e,t)?Vc(e,t):void 0},debug:Ac},bin:{makeReadOptions:Gc,makeWriteOptions:Kc,listUnknownFields(e){var t;return null!==(t=e[Wc])&&void 0!==t?t:[]},discardUnknownFields(e){delete e[Wc]},writeUnknownFields(e,t){const n=e[Wc];if(n)for(const i of n)t.tag(i.no,i.wireType).raw(i.data)},onUnknownField(e,t,n,i){const r=e;Array.isArray(r[Wc])||(r[Wc]=[]),r[Wc].push({no:t,wireType:n,data:i})},readMessage(e,t,n,i,r){const o=e.getType(),s=r?t.len:t.pos+n;let a,c;for(;t.pos<s&&([a,c]=t.tag(),!0!==r||c!=uc.EndGroup);){const n=o.fields.find(a);if(n)Jc(e,t,n,c,i);else{const n=t.skip(c,a);i.readUnknownFields&&this.onUnknownField(e,a,c,n)}}if(r&&(c!=uc.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:Jc,writeMessage(e,t,n){const i=e.getType();for(const r of i.fields.byNumber())if(Tc(r,e))Xc(r,r.oneof?e[r.oneof.localName].value:e[r.localName],t,n);else if(r.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(r.name," to binary: required field not set"));return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,i){void 0!==t&&Xc(e,t,n,i)}},util:Object.assign(Object.assign({},{setEnumType:Ga,initPartial(e,t){if(void 0===e)return;const n=t.getType();for(const i of n.fields.byMember()){const n=i.localName,r=t,o=e;if(null!=o[n])switch(i.kind){case"oneof":const e=o[n].case;if(void 0===e)continue;const t=i.findField(e);let s=o[n].value;t&&"message"==t.kind&&!Ec(s,t.T)?s=new t.T(s):t&&"scalar"===t.kind&&t.T===cc.BYTES&&(s=rl(s)),r[n]={case:e,value:s};break;case"scalar":case"enum":let a=o[n];i.T===cc.BYTES&&(a=i.repeated?a.map(rl):rl(a)),r[n]=a;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===cc.BYTES)for(const[t,i]of Object.entries(o[n]))r[n][t]=rl(i);else Object.assign(r[n],o[n]);break;case"message":const e=i.V.T;for(const t of Object.keys(o[n])){let i=o[n][t];e.fieldWrapper||(i=new e(i)),r[n][t]=i}}break;case"message":const c=i.T;if(i.repeated)r[n]=o[n].map((e=>Ec(e,c)?e:new c(e)));else{const e=o[n];c.fieldWrapper?"google.protobuf.BytesValue"===c.typeName?r[n]=rl(e):r[n]=e:r[n]=Ec(e,c)?e:new c(e)}}}},equals:(e,t,n)=>t===n||!(!t||!n)&&e.fields.byMember().every((e=>{const i=t[e.localName],r=n[e.localName];if(e.repeated){if(i.length!==r.length)return!1;switch(e.kind){case"message":return i.every(((t,n)=>e.T.equals(t,r[n])));case"scalar":return i.every(((t,n)=>dc(e.T,t,r[n])));case"enum":return i.every(((e,t)=>dc(cc.INT32,e,r[t])))}throw new Error("repeated cannot contain ".concat(e.kind))}switch(e.kind){case"message":let t=i,n=r;return e.T.fieldWrapper&&(void 0===t||Ec(t)||(t=e.T.fieldWrapper.wrapField(t)),void 0===n||Ec(n)||(n=e.T.fieldWrapper.wrapField(n))),e.T.equals(t,n);case"enum":return dc(cc.INT32,i,r);case"scalar":return dc(e.T,i,r);case"oneof":if(i.case!==r.case)return!1;const o=e.findField(i.case);if(void 0===o)return!0;switch(o.kind){case"message":return o.T.equals(i.value,r.value);case"enum":return dc(cc.INT32,i.value,r.value);case"scalar":return dc(o.T,i.value,r.value)}throw new Error("oneof cannot contain ".concat(o.kind));case"map":const s=Object.keys(i).concat(Object.keys(r));switch(e.V.kind){case"message":const t=e.V.T;return s.every((e=>t.equals(i[e],r[e])));case"enum":return s.every((e=>dc(cc.INT32,i[e],r[e])));case"scalar":const n=e.V.T;return s.every((e=>dc(n,i[e],r[e])))}}})),clone(e){const t=e.getType(),n=new t,i=n;for(const r of t.fields.byMember()){const t=e[r.localName];let n;if(r.repeated)n=t.map(il);else if("map"==r.kind){n=i[r.localName];for(const[e,i]of Object.entries(t))n[e]=il(i)}else n="oneof"==r.kind?r.findField(t.case)?{case:t.case,value:il(t.value)}:{case:void 0}:il(t);i[r.localName]=n}for(const r of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return n}}),{newFieldList:gl,initFields:vl}),makeMessageType(e,t,n){return function(e,t,n,i){var r;const o=null!==(r=null===i||void 0===i?void 0:i.localName)&&void 0!==r?r:t.substring(t.lastIndexOf(".")+1),s={[o]:function(t){e.util.initFields(this),e.util.initPartial(t,this)}}[o];return Object.setPrototypeOf(s.prototype,new Qa),Object.assign(s,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary:(e,t)=>(new s).fromBinary(e,t),fromJson:(e,t)=>(new s).fromJson(e,t),fromJsonString:(e,t)=>(new s).fromJsonString(e,t),equals:(t,n)=>e.util.equals(s,t,n)}),s}(this,e,t,n)},makeEnum:Ja,makeEnumType:Ka,getEnumType:qa,makeExtension(e,t,n){return function(e,t,n,i){let r;return{typeName:t,extendee:n,get field(){if(!r){const n="function"==typeof i?i():i;n.name=t.split(".").pop(),n.jsonName="[".concat(t,"]"),r=e.util.newFieldList([n]).list()[0]}return r},runtime:e}}(this,e,t,n)}});var gl,vl;class yl extends Qa{constructor(e){super(),this.seconds=ac.zero,this.nanos=0,ml.util.initPartial(e,this)}fromJson(e,t){if("string"!==typeof e)throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(ml.json.debug(e)));const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ac.parse(i/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(e){const t=1e3*Number(this.seconds);if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){const e=(this.nanos+1e9).toString().substring(1);n="000000"===e.substring(3)?"."+e.substring(0,3)+"Z":"000"===e.substring(6)?"."+e.substring(0,6)+"Z":"."+e+"Z"}return new Date(t).toISOString().replace(".000Z",n)}toDate(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}static now(){return yl.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new yl({seconds:ac.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return(new yl).fromBinary(e,t)}static fromJson(e,t){return(new yl).fromJson(e,t)}static fromJsonString(e,t){return(new yl).fromJsonString(e,t)}static equals(e,t){return ml.util.equals(yl,e,t)}}yl.runtime=ml,yl.typeName="google.protobuf.Timestamp",yl.fields=ml.util.newFieldList((()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]));const bl=ml.makeMessageType("livekit.MetricsBatch",(()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:yl},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:kl,repeated:!0},{no:5,name:"events",kind:"message",T:Sl,repeated:!0}])),kl=ml.makeMessageType("livekit.TimeSeriesMetric",(()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:wl,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}])),wl=ml.makeMessageType("livekit.MetricSample",(()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:yl},{no:3,name:"value",kind:"scalar",T:2}])),Sl=ml.makeMessageType("livekit.EventMetric",(()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:yl},{no:7,name:"normalized_end_timestamp",kind:"message",T:yl,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}])),Cl=ml.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Tl=ml.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),xl=ml.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),El=ml.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Pl=ml.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Ol=ml.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Rl=ml.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),_l=ml.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),Nl=ml.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Il=ml.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),Ll=ml.makeMessageType("livekit.Room",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Al,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:du}])),Al=ml.makeMessageType("livekit.Codec",(()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}])),Ml=ml.makeMessageType("livekit.ParticipantPermission",(()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:ml.getEnumType(xl),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}])),Dl=ml.makeMessageType("livekit.ParticipantInfo",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ml.getEnumType(jl)},{no:4,name:"tracks",kind:"message",T:Vl,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:Ml},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:ml.getEnumType(Ul)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:ml.getEnumType(Rl)},{no:18,name:"kind_details",kind:"enum",T:ml.getEnumType(Fl),repeated:!0}])),jl=ml.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Ul=ml.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),Fl=ml.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Bl=ml.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),zl=ml.makeMessageType("livekit.SimulcastCodecInfo",(()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Wl,repeated:!0}])),Vl=ml.makeMessageType("livekit.TrackInfo",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:ml.getEnumType(Tl)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:ml.getEnumType(xl)},{no:10,name:"layers",kind:"message",T:Wl,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:zl,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:ml.getEnumType(Bl)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:du},{no:19,name:"audio_features",kind:"enum",T:ml.getEnumType(Il),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:ml.getEnumType(Cl)}])),Wl=ml.makeMessageType("livekit.VideoLayer",(()=>[{no:1,name:"quality",kind:"enum",T:ml.getEnumType(El)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}])),Hl=ml.makeMessageType("livekit.DataPacket",(()=>[{no:1,name:"kind",kind:"enum",T:ml.getEnumType(ql)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:Jl,oneof:"value"},{no:3,name:"speaker",kind:"message",T:Gl,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:$l,oneof:"value"},{no:7,name:"transcription",kind:"message",T:Ql,oneof:"value"},{no:8,name:"metrics",kind:"message",T:bl,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Xl,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Zl,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:eu,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:tu,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:mu,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:gu,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:vu,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}])),ql=ml.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),Gl=ml.makeMessageType("livekit.ActiveSpeakerUpdate",(()=>[{no:1,name:"speakers",kind:"message",T:Kl,repeated:!0}])),Kl=ml.makeMessageType("livekit.SpeakerInfo",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}])),Jl=ml.makeMessageType("livekit.UserPacket",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}])),$l=ml.makeMessageType("livekit.SipDTMF",(()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}])),Ql=ml.makeMessageType("livekit.Transcription",(()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:Yl,repeated:!0}])),Yl=ml.makeMessageType("livekit.TranscriptionSegment",(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}])),Xl=ml.makeMessageType("livekit.ChatMessage",(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}])),Zl=ml.makeMessageType("livekit.RpcRequest",(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}])),eu=ml.makeMessageType("livekit.RpcAck",(()=>[{no:1,name:"request_id",kind:"scalar",T:9}])),tu=ml.makeMessageType("livekit.RpcResponse",(()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:nu,oneof:"value"}])),nu=ml.makeMessageType("livekit.RpcError",(()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}])),iu=ml.makeMessageType("livekit.ParticipantTracks",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}])),ru=ml.makeMessageType("livekit.ServerInfo",(()=>[{no:1,name:"edition",kind:"enum",T:ml.getEnumType(ou)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}])),ou=ml.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),su=ml.makeMessageType("livekit.ClientInfo",(()=>[{no:1,name:"sdk",kind:"enum",T:ml.getEnumType(au)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}])),au=ml.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"}]),cu=ml.makeMessageType("livekit.ClientConfiguration",(()=>[{no:1,name:"video",kind:"message",T:lu},{no:2,name:"screen",kind:"message",T:lu},{no:3,name:"resume_connection",kind:"enum",T:ml.getEnumType(Ol)},{no:4,name:"disabled_codecs",kind:"message",T:uu},{no:5,name:"force_relay",kind:"enum",T:ml.getEnumType(Ol)}])),lu=ml.makeMessageType("livekit.VideoConfiguration",(()=>[{no:1,name:"hardware_encoder",kind:"enum",T:ml.getEnumType(Ol)}])),uu=ml.makeMessageType("livekit.DisabledCodecs",(()=>[{no:1,name:"codecs",kind:"message",T:Al,repeated:!0},{no:2,name:"publish",kind:"message",T:Al,repeated:!0}])),du=ml.makeMessageType("livekit.TimedVersion",(()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}])),hu=ml.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),pu=ml.makeMessageType("livekit.DataStream.TextHeader",(()=>[{no:1,name:"operation_type",kind:"enum",T:ml.getEnumType(hu)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}]),{localName:"DataStream_TextHeader"}),fu=ml.makeMessageType("livekit.DataStream.ByteHeader",(()=>[{no:1,name:"name",kind:"scalar",T:9}]),{localName:"DataStream_ByteHeader"}),mu=ml.makeMessageType("livekit.DataStream.Header",(()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:ml.getEnumType(Bl)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:pu,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:fu,oneof:"content_header"}]),{localName:"DataStream_Header"}),gu=ml.makeMessageType("livekit.DataStream.Chunk",(()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}]),{localName:"DataStream_Chunk"}),vu=ml.makeMessageType("livekit.DataStream.Trailer",(()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]),{localName:"DataStream_Trailer"}),yu=ml.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),bu=ml.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),ku=ml.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),wu=ml.makeMessageType("livekit.SignalRequest",(()=>[{no:1,name:"offer",kind:"message",T:Nu,oneof:"message"},{no:2,name:"answer",kind:"message",T:Nu,oneof:"message"},{no:3,name:"trickle",kind:"message",T:xu,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Tu,oneof:"message"},{no:5,name:"mute",kind:"message",T:Eu,oneof:"message"},{no:6,name:"subscription",kind:"message",T:Lu,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Au,oneof:"message"},{no:8,name:"leave",kind:"message",T:ju,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:Fu,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:Xu,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:td,oneof:"message"},{no:13,name:"simulate",kind:"message",T:rd,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:Bu,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:od,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:Mu,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:Du,oneof:"message"}])),Su=ml.makeMessageType("livekit.SignalResponse",(()=>[{no:1,name:"join",kind:"message",T:Pu,oneof:"message"},{no:2,name:"answer",kind:"message",T:Nu,oneof:"message"},{no:3,name:"offer",kind:"message",T:Nu,oneof:"message"},{no:4,name:"trickle",kind:"message",T:xu,oneof:"message"},{no:5,name:"update",kind:"message",T:Iu,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Ru,oneof:"message"},{no:8,name:"leave",kind:"message",T:ju,oneof:"message"},{no:9,name:"mute",kind:"message",T:Eu,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:Vu,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Wu,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:qu,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Ku,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:Qu,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:Zu,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:_u,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:Ou,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:sd,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:ld,oneof:"message"},{no:22,name:"request_response",kind:"message",T:ud,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:hd,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:ed,oneof:"message"}])),Cu=ml.makeMessageType("livekit.SimulcastCodec",(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}])),Tu=ml.makeMessageType("livekit.AddTrackRequest",(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:ml.getEnumType(Tl)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:ml.getEnumType(xl)},{no:9,name:"layers",kind:"message",T:Wl,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Cu,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:ml.getEnumType(Bl)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:ml.getEnumType(Cl)},{no:17,name:"audio_features",kind:"enum",T:ml.getEnumType(Il),repeated:!0}])),xu=ml.makeMessageType("livekit.TrickleRequest",(()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:ml.getEnumType(yu)},{no:3,name:"final",kind:"scalar",T:8}])),Eu=ml.makeMessageType("livekit.MuteTrackRequest",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}])),Pu=ml.makeMessageType("livekit.JoinResponse",(()=>[{no:1,name:"room",kind:"message",T:Ll},{no:2,name:"participant",kind:"message",T:Dl},{no:3,name:"other_participants",kind:"message",T:Dl,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:zu,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:cu},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:ru},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Al,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}])),Ou=ml.makeMessageType("livekit.ReconnectResponse",(()=>[{no:1,name:"ice_servers",kind:"message",T:zu,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:cu},{no:3,name:"server_info",kind:"message",T:ru},{no:4,name:"last_message_seq",kind:"scalar",T:13}])),Ru=ml.makeMessageType("livekit.TrackPublishedResponse",(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Vl}])),_u=ml.makeMessageType("livekit.TrackUnpublishedResponse",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}])),Nu=ml.makeMessageType("livekit.SessionDescription",(()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}])),Iu=ml.makeMessageType("livekit.ParticipantUpdate",(()=>[{no:1,name:"participants",kind:"message",T:Dl,repeated:!0}])),Lu=ml.makeMessageType("livekit.UpdateSubscription",(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:iu,repeated:!0}])),Au=ml.makeMessageType("livekit.UpdateTrackSettings",(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:ml.getEnumType(El)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}])),Mu=ml.makeMessageType("livekit.UpdateLocalAudioTrack",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:ml.getEnumType(Il),repeated:!0}])),Du=ml.makeMessageType("livekit.UpdateLocalVideoTrack",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}])),ju=ml.makeMessageType("livekit.LeaveRequest",(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:ml.getEnumType(Rl)},{no:3,name:"action",kind:"enum",T:ml.getEnumType(Uu)},{no:4,name:"regions",kind:"message",T:ad}])),Uu=ml.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),Fu=ml.makeMessageType("livekit.UpdateVideoLayers",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Wl,repeated:!0}])),Bu=ml.makeMessageType("livekit.UpdateParticipantMetadata",(()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}])),zu=ml.makeMessageType("livekit.ICEServer",(()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}])),Vu=ml.makeMessageType("livekit.SpeakersChanged",(()=>[{no:1,name:"speakers",kind:"message",T:Kl,repeated:!0}])),Wu=ml.makeMessageType("livekit.RoomUpdate",(()=>[{no:1,name:"room",kind:"message",T:Ll}])),Hu=ml.makeMessageType("livekit.ConnectionQualityInfo",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:ml.getEnumType(Pl)},{no:3,name:"score",kind:"scalar",T:2}])),qu=ml.makeMessageType("livekit.ConnectionQualityUpdate",(()=>[{no:1,name:"updates",kind:"message",T:Hu,repeated:!0}])),Gu=ml.makeMessageType("livekit.StreamStateInfo",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ml.getEnumType(bu)}])),Ku=ml.makeMessageType("livekit.StreamStateUpdate",(()=>[{no:1,name:"stream_states",kind:"message",T:Gu,repeated:!0}])),Ju=ml.makeMessageType("livekit.SubscribedQuality",(()=>[{no:1,name:"quality",kind:"enum",T:ml.getEnumType(El)},{no:2,name:"enabled",kind:"scalar",T:8}])),$u=ml.makeMessageType("livekit.SubscribedCodec",(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Ju,repeated:!0}])),Qu=ml.makeMessageType("livekit.SubscribedQualityUpdate",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Ju,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:$u,repeated:!0}])),Yu=ml.makeMessageType("livekit.TrackPermission",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}])),Xu=ml.makeMessageType("livekit.SubscriptionPermission",(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:Yu,repeated:!0}])),Zu=ml.makeMessageType("livekit.SubscriptionPermissionUpdate",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}])),ed=ml.makeMessageType("livekit.RoomMovedResponse",(()=>[{no:1,name:"room",kind:"message",T:Ll},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:Dl},{no:4,name:"other_participants",kind:"message",T:Dl,repeated:!0}])),td=ml.makeMessageType("livekit.SyncState",(()=>[{no:1,name:"answer",kind:"message",T:Nu},{no:2,name:"subscription",kind:"message",T:Lu},{no:3,name:"publish_tracks",kind:"message",T:Ru,repeated:!0},{no:4,name:"data_channels",kind:"message",T:id,repeated:!0},{no:5,name:"offer",kind:"message",T:Nu},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:nd,repeated:!0}])),nd=ml.makeMessageType("livekit.DataChannelReceiveState",(()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}])),id=ml.makeMessageType("livekit.DataChannelInfo",(()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:ml.getEnumType(yu)}])),rd=ml.makeMessageType("livekit.SimulateScenario",(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:ml.getEnumType(ku),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}])),od=ml.makeMessageType("livekit.Ping",(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}])),sd=ml.makeMessageType("livekit.Pong",(()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}])),ad=ml.makeMessageType("livekit.RegionSettings",(()=>[{no:1,name:"regions",kind:"message",T:cd,repeated:!0}])),cd=ml.makeMessageType("livekit.RegionInfo",(()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}])),ld=ml.makeMessageType("livekit.SubscriptionResponse",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:ml.getEnumType(Nl)}])),ud=ml.makeMessageType("livekit.RequestResponse",(()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:ml.getEnumType(dd)},{no:3,name:"message",kind:"scalar",T:9}])),dd=ml.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),hd=ml.makeMessageType("livekit.TrackSubscribed",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]));function pd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fd,md={exports:{}},gd=md.exports;var vd,yd,bd=function(){return fd||(fd=1,e=md,function(t,n){e.exports?e.exports=n():t.log=n()}(gd,(function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],r={},o=null;function s(e,t){var n=e[t];if("function"===typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(Be){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(){for(var n=this.getLevel(),r=0;r<i.length;r++){var o=i[r];this[o]=r<n?e:this.methodFactory(o,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function l(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function u(i,r,o){return function(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?a:void 0!==console[i]?s(console,i):void 0!==console.log?s(console,"log"):e)}(i)||l.apply(this,arguments)}function d(e,n){var s,a,l,d=this,h="loglevel";function p(){var e;if(typeof window!==t&&h){try{e=window.localStorage[h]}catch(o){}if(typeof e===t)try{var n=window.document.cookie,i=encodeURIComponent(h),r=n.indexOf(i+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r+i.length+1))[1])}catch(o){}return void 0===d.levels[e]&&(e=void 0),e}}function f(e){var t=e;if("string"===typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"===typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"===typeof e?h+=":"+e:"symbol"===typeof e&&(h=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||u,d.getLevel=function(){return null!=l?l:null!=a?a:s},d.setLevel=function(e,n){return l=f(e),!1!==n&&function(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&h){try{return void(window.localStorage[h]=n)}catch(r){}try{window.document.cookie=encodeURIComponent(h)+"="+n+";"}catch(r){}}}(l),c.call(d)},d.setDefaultLevel=function(e){a=f(e),p()||d.setLevel(e,!1)},d.resetLevel=function(){l=null,function(){if(typeof window!==t&&h){try{window.localStorage.removeItem(h)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),c.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(o!==d&&(s=f(o.getLevel())),c.call(d),o===d)for(var e in r)r[e].rebuild()},s=f(o?o.getLevel():"WARN");var m=p();null!=m&&(l=f(m)),c.call(d)}(o=new d).getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new d(e,o.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=h),o},o.getLoggers=function(){return r},o.default=o,o}))),md.exports;var e}();!function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"}(vd||(vd={})),function(e){e.Default="livekit",e.Room="livekit-room",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"}(yd||(yd={}));let kd=bd.getLogger("livekit");Object.values(yd).map((e=>bd.getLogger(e)));function wd(e){const t=bd.getLogger(e);return t.setDefaultLevel(kd.getLevel()),t}kd.setDefaultLevel(vd.info);const Sd=bd.getLogger("lk-e2ee"),Cd=7e3,Td=[0,300,1200,2700,4800,Cd,Cd,Cd,Cd,Cd];function xd(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(Be){o(Be)}}function a(e){try{c(i.throw(e))}catch(Be){o(Be)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function Ed(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pd(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Ed(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}}"function"===typeof SuppressedError&&SuppressedError;var Od,Rd={exports:{}};var _d=function(){if(Od)return Rd.exports;Od=1;var e,t="object"===typeof Reflect?Reflect:null,n=t&&"function"===typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};e=t&&"function"===typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function r(){r.init.call(this)}Rd.exports=r,Rd.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}f(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&f(e,"error",t,n)}(e,r,{once:!0})}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var r,o,c;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),c=o[t]),void 0===c)c=o[t]=n,++e._eventsCount;else if("function"===typeof c?c=o[t]=i?[n,c]:[c,n]:i?c.unshift(n):c.push(n),(r=a(e))>0&&c.length>r&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,function(e){console&&console.warn&&console.warn(e)}(l)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=l.bind(i);return r.listener=n,i.wrapFn=r,r}function d(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):p(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function f(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}return Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"===typeof c)n(c,this,t);else{var l=c.length,u=p(c,l);for(i=0;i<l;++i)n(u[i],this,t)}return!0},r.prototype.addListener=function(e,t){return c(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return c(this,e,t,!0)},r.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,i,r,o,a;if(s(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},r.prototype.listenerCount=h,r.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},Rd.exports}();let Nd=!0,Id=!0;function Ld(e,t,n){const i=e.match(t);return i&&i.length>=n&&parseFloat(i[n],10)}function Ad(e,t,n){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return r.apply(this,arguments);const o=e=>{const t=n(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,o),r.apply(this,[e,o])};const o=i.removeEventListener;i.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const i=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function Md(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Nd=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Dd(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Id=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function jd(){if("object"===typeof window){if(Nd)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function Ud(e,t){Id&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Fd(e){return"[object Object]"===Object.prototype.toString.call(e)}function Bd(e){return Fd(e)?Object.keys(e).reduce((function(t,n){const i=Fd(e[n]),r=i?Bd(e[n]):e[n],o=i&&!Object.keys(r).length;return void 0===r||o?t:Object.assign(t,{[n]:r})}),{}):e}function zd(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((i=>{i.endsWith("Id")?zd(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach((t=>{zd(e,e.get(t),n)}))})))}function Vd(e,t,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===i&&n.trackId===t.id&&zd(e,n,r)}))})),r}const Wd=jd;function Hd(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const i=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const i="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"===typeof i.exact&&(i.min=i.max=i.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];let e={};"number"===typeof i.ideal?(e[r("min",n)]=i.ideal,t.optional.push(e),e={},e[r("max",n)]=i.ideal,t.optional.push(e)):(e[r("",n)]=i.ideal,t.optional.push(e))}void 0!==i.exact&&"number"!==typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach((e=>{void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===typeof e.video){let o=e.video.facingMode;o=o&&("object"===typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{n=n.filter((e=>"videoinput"===e.kind));let s=n.find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!s&&n.length&&t.includes("back")&&(s=n[n.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=i(e.video),Wd("chrome: "+JSON.stringify(e)),r(e)}))}e.video=i(e.video)}return Wd("chrome: "+JSON.stringify(e)),r(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,i){r(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{i&&i(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return r(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function qd(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Gd(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const r=new Event("track");r.track=n.track,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)})),t.stream.getTracks().forEach((n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const r=new Event("track");r.track=n,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Ad(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Kd(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let r=n.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Jd(e){if(!("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Vd(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Ad(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Vd(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,i;return this.getSenders().forEach((n=>{n.track===e&&(t?i=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?i=!0:n=t),t.track===e))),i||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function $d(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{const t=this.getSenders().find((t=>t.track===e));if(t)throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const i=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(i)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),r.apply(this,arguments)}}function Qd(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return $d(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{const t=this.getSenders().find((t=>t.track===e));if(t)throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}i.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const r=this.getSenders().find((e=>e.track===t));if(r)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const i=new e.MediaStream([t]);this._streams[n.id]=i,this._reverseStreams[i.id]=n,this.addStream(i)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){const e=arguments;return arguments.length&&"function"===typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=i[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Yd(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}))}function Xd(e,t){Ad(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var Zd=Object.freeze({__proto__:null,fixNegotiationNeeded:Xd,shimAddTrackRemoveTrack:Qd,shimAddTrackRemoveTrackWithNative:$d,shimGetSendersWithDtmf:Kd,shimGetUserMedia:Hd,shimMediaStream:qd,shimOnTrack:Gd,shimPeerConnection:Yd,shimSenderReceiverGetStats:Jd});function eh(e,t){const n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){Ud("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"===typeof n&&"object"===typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"===typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function th(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function nh(e,t){if("object"!==typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,o]=arguments;return i.apply(this,[e||null]).then((e=>{if(t.version<53&&!r)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(Be){if("TypeError"!==Be.name)throw Be;e.forEach(((t,i)=>{e.set(i,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(r,o)}}function ih(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function rh(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Ad(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function oh(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){Ud("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function sh(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function ah(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const i=t.apply(this,arguments);if(n){const{sender:t}=i,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return i})}function ch(e){if("object"!==typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function lh(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function uh(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var dh=Object.freeze({__proto__:null,shimAddTransceiver:ah,shimCreateAnswer:uh,shimCreateOffer:lh,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:ch,shimGetUserMedia:eh,shimOnTrack:th,shimPeerConnection:nh,shimRTCDataChannel:sh,shimReceiverGetStats:rh,shimRemoveStream:oh,shimSenderGetStats:ih});function hh(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i&&i.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function ph(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function fh(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};let a=function(e,t,n){const i=r.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=a,a=function(e,t,n){const i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=a,a=function(e,t,n){const i=s.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=a}function mh(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(gh(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t))}function gh(e){return e&&void 0!==e.video?Object.assign({},e,{video:Bd(e.video)}):e}function vh(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let i=e.iceServers[n];void 0===i.urls&&i.url?(Ud("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function yh(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function bh(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function kh(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var wh,Sh=Object.freeze({__proto__:null,shimAudioContext:kh,shimCallbacksAPI:fh,shimConstraints:gh,shimCreateOfferLegacy:bh,shimGetUserMedia:mh,shimLocalStreamsAPI:hh,shimRTCIceServerUrls:vh,shimRemoteStreamsAPI:ph,shimTrackEventTransceiver:yh}),Ch={exports:{}};var Th=(wh||(wh=1,function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:void 0===n[t[i]]&&(n[t[i]]=t[i+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const i=e.substring(e.indexOf(" ")+1).split(";");for(let r=0;r<i.length;r++)n=i[r].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const i=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substring(t+1,i),n.value=e.substring(i+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const i=t.matchPrefix(e+n,"a=ice-ufrag:")[0],r=t.matchPrefix(e+n,"a=ice-pwd:")[0];return i&&r?{usernameFragment:i.substring(12),password:r.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(" ");n.profile=i[2];for(let o=3;o<i.length;o++){const r=i[o],s=t.matchPrefix(e,"a=rtpmap:"+r+" ")[0];if(s){const i=t.parseRtpMap(s),o=t.matchPrefix(e,"a=fmtp:"+r+" ");switch(i.parameters=o.length?t.parseFmtp(o[0]):{},i.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+r+" ").map(t.parseRtcpFb),n.codecs.push(i),i.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(i.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const r=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{r.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let i="";i+="m="+e+" ",i+=n.codecs.length>0?"9":"0",i+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{i+=t.writeRtpMap(e),i+=t.writeFmtp(e),i+=t.writeRtcpFb(e)}));let r=0;return n.codecs.forEach((e=>{e.maxptime>r&&(r=e.maxptime)})),r>0&&(i+="a=maxptime:"+r+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{i+=t.writeExtmap(e)})),i},t.parseRtpEncodingParameters=function(e){const n=[],i=t.parseRtpParameters(e),r=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=s.length>0&&s[0].ssrc;let c;const l=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));l.length>0&&l[0].length>1&&l[0][0]===a&&(c=l[0][1]),i.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),n.push(t),r&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=u}))),n},t.parseRtcpParameters=function(e){const n={},i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);const r=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=r.length>0,n.compound=0===r.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const i=t.matchPrefix(e,"a=msid:");if(1===i.length)return n=i[0].substring(7).split(" "),{stream:n[0],track:n[1]};const r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return r.length>0?(n=r[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");let r;i.length>0&&(r=parseInt(i[0].substring(19),10)),isNaN(r)&&(r=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:r};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,i){let r;const o=void 0!==n?n:2;return r=e||t.generateSessionId(),"v=0\r\no="+(i||"thisisadapterortc")+" "+r+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const i=t.splitLines(e);for(let t=0;t<i.length;t++)switch(i[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}(Ch)),Ch.exports),xh=pd(Th),Eh=Da({__proto__:null,default:xh},[Th]);function Ph(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const n=new t(e),i=xh.parseCandidate(e.candidate);for(const e in i)e in n||Object.defineProperty(n,e,{value:i[e]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Ad(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function Oh(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Ad(e,"icecandidate",(e=>{if(e.candidate){const t=xh.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function Rh(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=xh.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=xh.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!==n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),i=function(e,n){let i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);const r=xh.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?i=parseInt(r[0].substring(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i}(arguments[0],e);let r;r=0===n&&0===i?Number.POSITIVE_INFINITY:0===n||0===i?Math.max(n,i):Math.min(n,i);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>r}),this._sctp=o}return n.apply(this,arguments)}}function _h(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const i=arguments[0],r=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Ad(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Nh(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Ih(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function Lh(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ah(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!==typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);return("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}var Mh=Object.freeze({__proto__:null,removeExtmapAllowMixed:Ih,shimAddIceCandidateNullOrEmpty:Lh,shimConnectionState:Nh,shimMaxMessageSize:Rh,shimParameterlessSetLocalDescription:Ah,shimRTCIceCandidate:Ph,shimRTCIceCandidateRelayProtocol:Oh,shimSendThrowTypeError:_h});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=jd,i=function(e){const t={browser:null,version:null};if("undefined"===typeof e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const e=n.userAgentData.brands.find((e=>"Chromium"===e.brand));if(e)return{browser:"chrome",version:parseInt(e.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Ld(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Ld(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=parseInt(Ld(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Ld(n.userAgent,/Version\/(\d+(\.?\d+))/,1)}return t}(e),r={browserDetails:i,commonShim:Mh,extractVersion:Ld,disableLog:Md,disableWarnings:Dd,sdp:Eh};switch(i.browser){case"chrome":if(!Zd||!Yd||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(null===i.version)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=Zd,Lh(e,i),Ah(e),Hd(e,i),qd(e),Yd(e,i),Gd(e),Qd(e,i),Kd(e),Jd(e),Xd(e,i),Ph(e),Oh(e),Nh(e),Rh(e,i),_h(e),Ih(e,i);break;case"firefox":if(!dh||!nh||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=dh,Lh(e,i),Ah(e),eh(e,i),nh(e,i),th(e),oh(e),ih(e),rh(e),sh(e),ah(e),ch(e),lh(e),uh(e),Ph(e),Nh(e),Rh(e,i),_h(e);break;case"safari":if(!Sh||!t.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=Sh,Lh(e,i),Ah(e),vh(e),bh(e),fh(e),hh(e),ph(e),yh(e),mh(e),kh(e),Ph(e),Oh(e),Rh(e,i),_h(e),Ih(e,i);break;default:n("Unsupported browser!")}}({window:"undefined"===typeof window?void 0:window});const Dh="lk_e2ee";var jh,Uh,Fh,Bh;function zh(){return"undefined"!==typeof window.RTCRtpSender&&"undefined"!==typeof window.RTCRtpSender.prototype.createEncodedStreams||Vh()}function Vh(){return"undefined"!==typeof window.RTCRtpScriptTransform}!function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"}(jh||(jh={})),function(e){e.KeyRatcheted="keyRatcheted"}(Uh||(Uh={})),function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"}(Fh||(Fh={})),function(e){e.Error="cryptorError"}(Bh||(Bh={}));_d.EventEmitter;class Wh extends Error{constructor(e,t){super(t||"an error has occured"),this.name="LiveKitError",this.code=e}}var Hh,qh,Gh,Kh,Jh,$h,Qh;!function(e){e[e.NotAllowed=0]="NotAllowed",e[e.ServerUnreachable=1]="ServerUnreachable",e[e.InternalError=2]="InternalError",e[e.Cancelled=3]="Cancelled",e[e.LeaveRequest=4]="LeaveRequest",e[e.Timeout=5]="Timeout"}(Hh||(Hh={}));class Yh extends Wh{constructor(e,t,n,i){super(1,e),this.name="ConnectionError",this.status=n,this.reason=t,this.context=i,this.reasonName=Hh[t]}}class Xh extends Wh{constructor(e){super(21,null!==e&&void 0!==e?e:"device is unsupported"),this.name="DeviceUnsupportedError"}}class Zh extends Wh{constructor(e){super(20,null!==e&&void 0!==e?e:"track is invalid"),this.name="TrackInvalidError"}}class ep extends Wh{constructor(e){super(10,null!==e&&void 0!==e?e:"unsupported server"),this.name="UnsupportedServer"}}class tp extends Wh{constructor(e){super(12,null!==e&&void 0!==e?e:"unexpected connection state"),this.name="UnexpectedConnectionState"}}class np extends Wh{constructor(e){super(13,null!==e&&void 0!==e?e:"unable to negotiate"),this.name="NegotiationError"}}class ip extends Wh{constructor(e,t){super(15,e),this.name="PublishTrackError",this.status=t}}class rp extends Wh{constructor(e,t){super(15,e),this.reason=t,this.reasonName="string"===typeof t?t:dd[t]}}!function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"}(qh||(qh={})),function(e){e.getFailure=function(t){if(t&&"name"in t)return"NotFoundError"===t.name||"DevicesNotFoundError"===t.name?e.NotFound:"NotAllowedError"===t.name||"PermissionDeniedError"===t.name?e.PermissionDenied:"NotReadableError"===t.name||"TrackStartError"===t.name?e.DeviceInUse:e.Other}}(qh||(qh={})),function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"}(Gh||(Gh={}));function op(e){return"undefined"===typeof e?e:"function"===typeof structuredClone?"object"===typeof e&&null!==e?structuredClone(Object.assign({},e)):structuredClone(e):JSON.parse(JSON.stringify(e))}!function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.Moved="moved",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.ParticipantAttributesChanged="participantAttributesChanged",e.ParticipantActive="participantActive",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged",e.ChatMessage="chatMessage",e.LocalTrackSubscribed="localTrackSubscribed",e.MetricsReceived="metricsReceived"}(Kh||(Kh={})),function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded",e.AttributesChanged="attributesChanged",e.LocalTrackSubscribed="localTrackSubscribed",e.ChatMessage="chatMessage",e.Active="active"}(Jh||(Jh={})),function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackSubscribed="localTrackSubscribed",e.Offline="offline",e.SignalRequestResponse="signalRequestResponse",e.SignalConnected="signalConnected",e.RoomMoved="roomMoved"}($h||($h={})),function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed",e.TrackProcessorUpdate="trackProcessorUpdate",e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",e.TranscriptionReceived="transcriptionReceived",e.TimeSyncUpdate="timeSyncUpdate",e.PreConnectBufferFlushed="preConnectBufferFlushed"}(Qh||(Qh={}));const sp=/version\/(\d+(\.?_?\d+)+)/i;let ap;function cp(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("undefined"===typeof e&&"undefined"===typeof navigator)return;const n=(null!==e&&void 0!==e?e:navigator.userAgent).toLowerCase();if(void 0===ap||t){const e=lp.find((e=>{let{test:t}=e;return t.test(n)}));ap=null===e||void 0===e?void 0:e.describe(n)}return ap}const lp=[{test:/firefox|iceweasel|fxios/i,describe:e=>({name:"Firefox",version:up(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:dp(e)})},{test:/chrom|crios|crmo/i,describe:e=>({name:"Chrome",version:up(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:dp(e)})},{test:/safari|applewebkit/i,describe:e=>({name:"Safari",version:up(sp,e),os:e.includes("mobile/")?"iOS":"macOS",osVersion:dp(e)})}];function up(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const i=t.match(e);return i&&i.length>=n&&i[n]||""}function dp(e){return e.includes("mac os")?up(/\(.+?(\d+_\d+(:?_\d+)?)/,e,1).replace(/_/g,"."):void 0}class hp{}hp.setTimeout=function(){return setTimeout(...arguments)},hp.setInterval=function(){return setInterval(...arguments)},hp.clearTimeout=function(){return clearTimeout(...arguments)},hp.clearInterval=function(){return clearInterval(...arguments)};const pp=[];var fp;!function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH"}(fp||(fp={}));class mp extends _d.EventEmitter{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=mp.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=kd,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),"hidden"===document.visibilityState?this.backgroundTimeout=setTimeout((()=>this.handleAppVisibilityChanged()),5e3):this.handleAppVisibilityChanged()},this.log=wd(null!==(i=n.loggerName)&&void 0!==i?i:yd.Track),this.loggerContextCb=n.loggerContextCb,this.setMaxListeners(100),this.kind=t,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=mp.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},null===(e=this.loggerContextCb)||void 0===e?void 0:e.call(this)),xf(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let t="audio";this.kind===mp.Kind.Video&&(t="video"),0===this.attachedElements.length&&this.kind===mp.Kind.Video&&this.addAppVisibilityListener(),e||("audio"===t&&(pp.forEach((t=>{null!==t.parentElement||e||(e=t)})),e&&pp.splice(pp.indexOf(e),1)),e||(e=document.createElement(t))),this.attachedElements.includes(e)||this.attachedElements.push(e),gp(this.mediaStreamTrack,e);const n=e.srcObject.getTracks(),i=n.some((e=>"audio"===e.kind));return e.play().then((()=>{this.emit(i?Qh.AudioPlaybackStarted:Qh.VideoPlaybackStarted)})).catch((t=>{"NotAllowedError"===t.name?this.emit(i?Qh.AudioPlaybackFailed:Qh.VideoPlaybackFailed,t):"AbortError"===t.name?kd.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):kd.warn("could not playback ".concat(i?"audio":"video"),t),i&&e&&n.some((e=>"video"===e.kind))&&"NotAllowedError"===t.name&&(e.muted=!0,e.play().catch((()=>{})))})),this.emit(Qh.ElementAttached,e),e}detach(e){try{if(e){vp(this.mediaStreamTrack,e);const t=this.attachedElements.indexOf(e);return t>=0&&(this.attachedElements.splice(t,1),this.recycleElement(e),this.emit(Qh.ElementDetached,e)),e}const t=[];return this.attachedElements.forEach((e=>{vp(this.mediaStreamTrack,e),t.push(e),this.recycleElement(e),this.emit(Qh.ElementDetached,e)})),this.attachedElements=[],t}finally{0===this.attachedElements.length&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=wd(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let t=!0;e.pause(),pp.forEach((e=>{e.parentElement||(t=!1)})),t&&pp.push(e)}}handleAppVisibilityChanged(){return xd(this,void 0,void 0,(function*(){this.isInBackground="hidden"===document.visibilityState,this.isInBackground||this.kind!==mp.Kind.Video||setTimeout((()=>this.attachedElements.forEach((e=>e.play().catch((()=>{}))))),0)}))}addAppVisibilityListener(){Up()?(this.isInBackground="hidden"===document.visibilityState,document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Up()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function gp(e,t){let n,i;n=t.srcObject instanceof MediaStream?t.srcObject:new MediaStream,i="audio"===e.kind?n.getAudioTracks():n.getVideoTracks(),i.includes(e)||(i.forEach((e=>{n.removeTrack(e)})),n.addTrack(e)),Ap()&&t instanceof HTMLVideoElement||(t.autoplay=!0),t.muted=0===n.getAudioTracks().length,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(Ap()||Lp())&&t instanceof HTMLVideoElement&&setTimeout((()=>{t.srcObject=n,t.play().catch((()=>{}))}),0))}function vp(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}!function(e){let t,n,i;!function(e){e.Audio="audio",e.Video="video",e.Unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){e.Camera="camera",e.Microphone="microphone",e.ScreenShare="screen_share",e.ScreenShareAudio="screen_share_audio",e.Unknown="unknown"}(n=e.Source||(e.Source={})),function(e){e.Active="active",e.Paused="paused",e.Unknown="unknown"}(i=e.StreamState||(e.StreamState={})),e.kindToProto=function(e){switch(e){case t.Audio:return Tl.AUDIO;case t.Video:return Tl.VIDEO;default:return Tl.DATA}},e.kindFromProto=function(e){switch(e){case Tl.AUDIO:return t.Audio;case Tl.VIDEO:return t.Video;default:return t.Unknown}},e.sourceToProto=function(e){switch(e){case n.Camera:return xl.CAMERA;case n.Microphone:return xl.MICROPHONE;case n.ScreenShare:return xl.SCREEN_SHARE;case n.ScreenShareAudio:return xl.SCREEN_SHARE_AUDIO;default:return xl.UNKNOWN}},e.sourceFromProto=function(e){switch(e){case xl.CAMERA:return n.Camera;case xl.MICROPHONE:return n.Microphone;case xl.SCREEN_SHARE:return n.ScreenShare;case xl.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}},e.streamStateFromProto=function(e){switch(e){case bu.ACTIVE:return i.Active;case bu.PAUSED:return i.Paused;default:return i.Unknown}}}(mp||(mp={}));class yp{constructor(e,t,n,i,r){if("object"===typeof e)this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else{if(void 0===t||void 0===n)throw new TypeError("Unsupported options: provide at least width, height and maxBitrate");this.width=e,this.height=t,this.aspectRatio=e/t,this.encoding={maxBitrate:n,maxFramerate:i,priority:r}}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const bp=["vp8","h264"],kp=["vp8","h264","vp9","av1"];function wp(e){return!!bp.find((t=>t===e))}var Sp,Cp;!function(e){e[e.PREFER_REGRESSION=0]="PREFER_REGRESSION",e[e.SIMULCAST=1]="SIMULCAST",e[e.REGRESSION=2]="REGRESSION"}(Sp||(Sp={})),function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:24e3},e.music={maxBitrate:48e3},e.musicStereo={maxBitrate:64e3},e.musicHighQuality={maxBitrate:96e3},e.musicHighQualityStereo={maxBitrate:128e3}}(Cp||(Cp={}));const Tp={h90:new yp(160,90,9e4,20),h180:new yp(320,180,16e4,20),h216:new yp(384,216,18e4,20),h360:new yp(640,360,45e4,20),h540:new yp(960,540,8e5,25),h720:new yp(1280,720,17e5,30),h1080:new yp(1920,1080,3e6,30),h1440:new yp(2560,1440,5e6,30),h2160:new yp(3840,2160,8e6,30)},xp={h120:new yp(160,120,7e4,20),h180:new yp(240,180,125e3,20),h240:new yp(320,240,14e4,20),h360:new yp(480,360,33e4,20),h480:new yp(640,480,5e5,20),h540:new yp(720,540,6e5,25),h720:new yp(960,720,13e5,30),h1080:new yp(1440,1080,23e5,30),h1440:new yp(1920,1440,38e5,30)},Ep={h360fps3:new yp(640,360,2e5,3,"medium"),h360fps15:new yp(640,360,4e5,15,"medium"),h720fps5:new yp(1280,720,8e5,5,"medium"),h720fps15:new yp(1280,720,15e5,15,"medium"),h720fps30:new yp(1280,720,2e6,30,"medium"),h1080fps15:new yp(1920,1080,25e5,15,"medium"),h1080fps30:new yp(1920,1080,5e6,30,"medium"),original:new yp(0,0,7e6,30,"medium")},Pp="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function Op(e){return xd(this,void 0,void 0,(function*(){return new Promise((t=>hp.setTimeout(t,e)))}))}function Rp(){return"addTransceiver"in RTCPeerConnection.prototype}function _p(){return"addTrack"in RTCPeerConnection.prototype}function Np(e){return"av1"===e||"vp9"===e}function Ip(e){return!!document&&(e||(e=document.createElement("audio")),"setSinkId"in e)}function Lp(){var e;return"Firefox"===(null===(e=cp())||void 0===e?void 0:e.name)}function Ap(){var e;return"Safari"===(null===(e=cp())||void 0===e?void 0:e.name)}function Mp(){const e=cp();return"Safari"===(null===e||void 0===e?void 0:e.name)||"iOS"===(null===e||void 0===e?void 0:e.os)}function Dp(){const e=cp();return"Safari"===(null===e||void 0===e?void 0:e.name)&&e.version.startsWith("17.")}function jp(){var e,t;return!!Up()&&(null!==(t=null===(e=navigator.userAgentData)||void 0===e?void 0:e.mobile)&&void 0!==t?t:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent))}function Up(){return"undefined"!==typeof document}function Fp(){return"ReactNative"==navigator.product}function Bp(e){return e.hostname.endsWith(".livekit.cloud")||e.hostname.endsWith(".livekit.run")}function zp(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function Vp(){if(!Fp())return;let e=zp();return e?e.platform:void 0}function Wp(){if(Up())return window.devicePixelRatio;if(Fp()){let e=zp();if(e)return e.devicePixelRatio}return 1}function Hp(e,t){const n=e.split("."),i=t.split("."),r=Math.min(n.length,i.length);for(let o=0;o<r;++o){const e=parseInt(n[o],10),t=parseInt(i[o],10);if(e>t)return 1;if(e<t)return-1;if(o===r-1&&e===t)return 0}return""===e&&""!==t?-1:""===t?1:n.length==i.length?0:n.length<i.length?-1:1}function qp(e){for(const t of e)t.target.handleResize(t)}function Gp(e){for(const t of e)t.target.handleVisibilityChanged(t)}let Kp=null;const Jp=()=>(Kp||(Kp=new ResizeObserver(qp)),Kp);let $p=null;const Qp=()=>($p||($p=new IntersectionObserver(Gp,{root:null,rootMargin:"0px"})),$p);let Yp;function Xp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=document.createElement("canvas");r.width=e,r.height=t;const o=r.getContext("2d");null===o||void 0===o||o.fillRect(0,0,r.width,r.height),i&&o&&(o.beginPath(),o.arc(e/2,t/2,50,0,2*Math.PI,!0),o.closePath(),o.fillStyle="grey",o.fill());const s=r.captureStream(),[a]=s.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}function Zp(){if(!Yp){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();n.gain.setValueAtTime(0,0);const i=e.createMediaStreamDestination();if(t.connect(n),n.connect(i),t.start(),[Yp]=i.stream.getAudioTracks(),!Yp)throw Error("Could not get empty media stream audio track");Yp.enabled=!1}return Yp.clone()}class ef{constructor(e,t){this.onFinally=t,this.promise=new Promise(((t,n)=>xd(this,void 0,void 0,(function*(){this.resolve=t,this.reject=n,e&&(yield e(t,n))})))).finally((()=>{var e;return null===(e=this.onFinally)||void 0===e?void 0:e.call(this)}))}}function tf(e){if("string"===typeof e||"number"===typeof e)return e;if(Array.isArray(e))return e[0];if(e.exact)return Array.isArray(e.exact)?e.exact[0]:e.exact;if(e.ideal)return Array.isArray(e.ideal)?e.ideal[0]:e.ideal;throw Error("could not unwrap constraint")}function nf(e){return e.startsWith("ws")?e.replace(/^(ws)/,"http"):e}function rf(e){switch(e.reason){case Hh.LeaveRequest:return e.context;case Hh.Cancelled:return Rl.CLIENT_INITIATED;case Hh.NotAllowed:return Rl.USER_REJECTED;case Hh.ServerUnreachable:return Rl.JOIN_FAILURE;default:return Rl.UNKNOWN_REASON}}function of(e){return void 0!==e?Number(e):void 0}function sf(e){return void 0!==e?BigInt(e):void 0}function af(e){return!!e&&!(e instanceof MediaStreamTrack)&&e.isLocal}function cf(e){return!!e&&e.kind==mp.Kind.Audio}function lf(e){return!!e&&e.kind==mp.Kind.Video}function uf(e){return af(e)&&lf(e)}function df(e){return af(e)&&cf(e)}function hf(e){return!!e&&!e.isLocal}function pf(e){return!!e&&!e.isLocal}function ff(e){return hf(e)&&lf(e)}function mf(e,t,n){var i,r,o,s;const{optionsWithoutProcessor:a,audioProcessor:c,videoProcessor:l}=Ef(null!==e&&void 0!==e?e:{}),u=null===t||void 0===t?void 0:t.processor,d=null===n||void 0===n?void 0:n.processor,h=null!==a&&void 0!==a?a:{};return!0===h.audio&&(h.audio={}),!0===h.video&&(h.video={}),h.audio&&(gf(h.audio,t),null!==(i=(o=h.audio).deviceId)&&void 0!==i||(o.deviceId={ideal:"default"}),(c||u)&&(h.audio.processor=null!==c&&void 0!==c?c:u)),h.video&&(gf(h.video,n),null!==(r=(s=h.video).deviceId)&&void 0!==r||(s.deviceId={ideal:"default"}),(l||d)&&(h.video.processor=null!==l&&void 0!==l?l:d)),h}function gf(e,t){return Object.keys(t).forEach((n=>{void 0===e[n]&&(e[n]=t[n])})),e}function vf(e){var t,n,i,r;const o={};if(e.video)if("object"===typeof e.video){const n={},r=n,s=e.video;Object.keys(s).forEach((e=>{if("resolution"===e)gf(r,s.resolution);else r[e]=s[e]})),o.video=n,null!==(t=(i=o.video).deviceId)&&void 0!==t||(i.deviceId={ideal:"default"})}else o.video=!!e.video&&{deviceId:{ideal:"default"}};else o.video=!1;return e.audio?"object"===typeof e.audio?(o.audio=e.audio,null!==(n=(r=o.audio).deviceId)&&void 0!==n||(r.deviceId={ideal:"default"})):o.audio={deviceId:{ideal:"default"}}:o.audio=!1,o}function yf(e){return xd(this,arguments,void 0,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return function*(){const n=bf();if(n){const i=n.createAnalyser();i.fftSize=2048;const r=i.frequencyBinCount,o=new Uint8Array(r);n.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),yield Op(t),i.getByteTimeDomainData(o);const s=o.some((e=>128!==e&&0!==e));return n.close(),!s}return!1}()}))}function bf(){var e;const t="undefined"!==typeof window&&(window.AudioContext||window.webkitAudioContext);if(t){const n=new t({latencyHint:"interactive"});if("suspended"===n.state&&"undefined"!==typeof window&&(null===(e=window.document)||void 0===e?void 0:e.body)){const e=()=>xd(this,void 0,void 0,(function*(){var t;try{"suspended"===n.state&&(yield n.resume())}catch(Be){console.warn("Error trying to auto-resume audio context",Be)}null===(t=window.document.body)||void 0===t||t.removeEventListener("click",e)}));window.document.body.addEventListener("click",e)}return n}}function kf(e){return"audioinput"===e?mp.Source.Microphone:"videoinput"===e?mp.Source.Camera:mp.Source.Unknown}function wf(e){return e===mp.Source.Microphone?"audioinput":e===mp.Source.Camera?"videoinput":void 0}function Sf(e){var t,n;let i=null===(t=e.video)||void 0===t||t;return e.resolution&&e.resolution.width>0&&e.resolution.height>0&&(i="boolean"===typeof i?{}:i,i=Ap()?Object.assign(Object.assign({},i),{width:{max:e.resolution.width},height:{max:e.resolution.height},frameRate:e.resolution.frameRate}):Object.assign(Object.assign({},i),{width:{ideal:e.resolution.width},height:{ideal:e.resolution.height},frameRate:e.resolution.frameRate})),{audio:null!==(n=e.audio)&&void 0!==n&&n,video:i,controller:e.controller,selfBrowserSurface:e.selfBrowserSurface,surfaceSwitching:e.surfaceSwitching,systemAudio:e.systemAudio,preferCurrentTab:e.preferCurrentTab}}function Cf(e){return e.split("/")[1].toLowerCase()}function Tf(e){const t=[];return e.forEach((e=>{void 0!==e.track&&t.push(new Ru({cid:e.track.mediaStreamID,track:e.trackInfo}))})),t}function xf(e){return"mediaStreamTrack"in e?{trackID:e.sid,source:e.source,muted:e.isMuted,enabled:e.mediaStreamTrack.enabled,kind:e.kind,streamID:e.mediaStreamID,streamTrackID:e.mediaStreamTrack.id}:{trackID:e.trackSid,enabled:e.isEnabled,muted:e.isMuted,trackInfo:Object.assign({mimeType:e.mimeType,name:e.trackName,encrypted:e.isEncrypted,kind:e.kind,source:e.source},e.track?xf(e.track):{})}}function Ef(e){const t=Object.assign({},e);let n,i;return"object"===typeof t.audio&&t.audio.processor&&(n=t.audio.processor,t.audio=Object.assign(Object.assign({},t.audio),{processor:void 0})),"object"===typeof t.video&&t.video.processor&&(i=t.video.processor,t.video=Object.assign(Object.assign({},t.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:op(t)}}class Pf extends _d.EventEmitter{constructor(e){super(),this.onWorkerMessage=e=>{var t,n;const{kind:i,data:r}=e.data;switch(i){case"error":kd.error(r.error.message),this.emit(Fh.EncryptionError,r.error);break;case"initAck":r.enabled&&this.keyProvider.getKeys().forEach((e=>{this.postKey(e)}));break;case"enable":if(r.enabled&&this.keyProvider.getKeys().forEach((e=>{this.postKey(e)})),this.encryptionEnabled!==r.enabled&&r.participantIdentity===(null===(t=this.room)||void 0===t?void 0:t.localParticipant.identity))this.emit(Fh.ParticipantEncryptionStatusChanged,r.enabled,this.room.localParticipant),this.encryptionEnabled=r.enabled;else if(r.participantIdentity){const e=null===(n=this.room)||void 0===n?void 0:n.getParticipantByIdentity(r.participantIdentity);if(!e)throw TypeError("couldn't set encryption status, participant not found".concat(r.participantIdentity));this.emit(Fh.ParticipantEncryptionStatusChanged,r.enabled,e)}break;case"ratchetKey":this.keyProvider.emit(jh.KeyRatcheted,r.ratchetResult,r.participantIdentity,r.keyIndex)}},this.onWorkerError=e=>{kd.error("e2ee worker encountered an error:",{error:e.error}),this.emit(Fh.EncryptionError,e.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!zh())throw new Xh("tried to setup end-to-end encryption on an unsupported browser");if(kd.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const t={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:Sd.getLevel()}};this.worker&&(kd.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(t))}}setParticipantCryptorEnabled(e,t){kd.debug("set e2ee to ".concat(e," for participant ").concat(t)),this.postEnable(e,t)}setSifTrailer(e){e&&0!==e.length?this.postSifTrailer(e):kd.warn("ignoring server sent trailer as it's empty")}setupEngine(e){e.on($h.RTPVideoMapUpdate,(e=>{this.postRTPMap(e)}))}setupEventListeners(e,t){e.on(Kh.TrackPublished,((e,t)=>this.setParticipantCryptorEnabled(e.trackInfo.encryption!==Bl.NONE,t.identity))),e.on(Kh.ConnectionStateChanged,(t=>{t===dg.Connected&&e.remoteParticipants.forEach((e=>{e.trackPublications.forEach((t=>{this.setParticipantCryptorEnabled(t.trackInfo.encryption!==Bl.NONE,e.identity)}))}))})).on(Kh.TrackUnsubscribed,((e,t,n)=>{var i;const r={kind:"removeTransform",data:{participantIdentity:n.identity,trackId:e.mediaStreamID}};null===(i=this.worker)||void 0===i||i.postMessage(r)})).on(Kh.TrackSubscribed,((e,t,n)=>{this.setupE2EEReceiver(e,n.identity,t.trackInfo)})).on(Kh.SignalConnected,(()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");t.getKeys().forEach((e=>{this.postKey(e)})),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)})),e.localParticipant.on(Jh.LocalTrackPublished,(e=>xd(this,void 0,void 0,(function*(){this.setupE2EESender(e.track,e.track.sender)})))),t.on(jh.SetKey,(e=>this.postKey(e))).on(jh.RatchetRequest,((e,t)=>this.postRatchetRequest(e,t)))}postRatchetRequest(e,t){if(!this.worker)throw Error("could not ratchet key, worker is missing");const n={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:t}};this.worker.postMessage(n)}postKey(e){let{key:t,participantIdentity:n,keyIndex:i}=e;var r;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:n,isPublisher:n===(null===(r=this.room)||void 0===r?void 0:r.localParticipant.identity),key:t,keyIndex:i}};this.worker.postMessage(o)}postEnable(e,t){if(!this.worker)throw new ReferenceError("failed to enable e2ee, worker is not ready");{const n={kind:"enable",data:{enabled:e,participantIdentity:t}};this.worker.postMessage(n)}}postRTPMap(e){var t;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(null===(t=this.room)||void 0===t?void 0:t.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const n={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(n)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const t={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(t)}setupE2EEReceiver(e,t,n){if(e.receiver){if(!(null===n||void 0===n?void 0:n.mimeType)||""===n.mimeType)throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,t,"video"===e.kind?Cf(n.mimeType):void 0)}}setupE2EESender(e,t){af(e)&&t?this.handleSender(t,e.mediaStreamID,void 0):t||kd.warn("early return because sender is not ready")}handleReceiver(e,t,n,i){return xd(this,void 0,void 0,(function*(){if(this.worker){if(Vh()){const r={kind:"decode",participantIdentity:n,trackId:t,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,r)}else{if(Dh in e&&i){const e={kind:"updateCodec",data:{trackId:t,codec:i,participantIdentity:n}};return void this.worker.postMessage(e)}let r=e.writableStream,o=e.readableStream;if(!r||!o){const t=e.createEncodedStreams();e.writableStream=t.writable,r=t.writable,e.readableStream=t.readable,o=t.readable}const s={kind:"decode",data:{readableStream:o,writableStream:r,trackId:t,codec:i,participantIdentity:n}};this.worker.postMessage(s,[o,r])}e[Dh]=!0}}))}handleSender(e,t,n){var i;if(!(Dh in e)&&this.worker){if(!(null===(i=this.room)||void 0===i?void 0:i.localParticipant.identity)||""===this.room.localParticipant.identity)throw TypeError("local identity needs to be known in order to set up encrypted sender");if(Vh()){kd.info("initialize script transform");const i={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:t,codec:n};e.transform=new RTCRtpScriptTransform(this.worker,i)}else{kd.info("initialize encoded streams");const i=e.createEncodedStreams(),r={kind:"encode",data:{readableStream:i.readable,writableStream:i.writable,codec:n,trackId:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r,[i.readable,i.writable])}e[Dh]=!0}}}const Of="default";class Rf{constructor(){this._previousDevices=[]}static getInstance(){return void 0===this.instance&&(this.instance=new Rf),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return xd(this,arguments,void 0,(function(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){var i;if((null===(i=Rf.userMediaPromiseMap)||void 0===i?void 0:i.size)>0){kd.debug("awaiting getUserMedia promise");try{e?yield Rf.userMediaPromiseMap.get(e):yield Promise.all(Rf.userMediaPromiseMap.values())}catch(Be){kd.warn("error waiting for media permissons")}}let r=yield navigator.mediaDevices.enumerateDevices();if(n&&(!Ap()||!t.hasDeviceInUse(e))){const t=0===r.filter((t=>t.kind===e)).length||r.some((t=>{const n=""===t.label,i=!e||t.kind===e;return n&&i}));if(t){const t={video:"audioinput"!==e&&"audiooutput"!==e,audio:"videoinput"!==e&&{deviceId:{ideal:"default"}}},n=yield navigator.mediaDevices.getUserMedia(t);r=yield navigator.mediaDevices.enumerateDevices(),n.getTracks().forEach((e=>{e.stop()}))}}return t._previousDevices=r,e&&(r=r.filter((t=>t.kind===e))),r}()}))}normalizeDeviceId(e,t,n){return xd(this,void 0,void 0,(function*(){if(t!==Of)return t;const i=yield this.getDevices(e),r=i.find((e=>e.deviceId===Of));if(!r)return void kd.warn("could not reliably determine default device");const o=i.find((e=>e.deviceId!==Of&&e.groupId===(null!==n&&void 0!==n?n:r.groupId)));if(o)return null===o||void 0===o?void 0:o.deviceId;kd.warn("could not reliably determine default device")}))}hasDeviceInUse(e){return e?Rf.userMediaPromiseMap.has(e):Rf.userMediaPromiseMap.size>0}}var _f;Rf.mediaDeviceKinds=["audioinput","audiooutput","videoinput"],Rf.userMediaPromiseMap=new Map,function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"}(_f||(_f={}));class Nf{constructor(){this.pendingTasks=new Map,this.taskMutex=new Fa,this.nextTaskIndex=0}run(e){return xd(this,void 0,void 0,(function*(){const t={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:_f.WAITING};this.pendingTasks.set(t.id,t);const n=yield this.taskMutex.lock();try{return t.executedAt=Date.now(),t.status=_f.RUNNING,yield e()}finally{t.status=_f.COMPLETED,this.pendingTasks.delete(t.id),n()}}))}flush(){return xd(this,void 0,void 0,(function*(){return this.run((()=>xd(this,void 0,void 0,(function*(){}))))}))}snapshot(){return Array.from(this.pendingTasks.values())}}function If(e,t){return e.pathname="".concat(function(e){return e.endsWith("/")?e:"".concat(e,"/")}(e.pathname)).concat(t),e.toString()}const Lf=["syncState","trickle","offer","answer","simulate","leave"];var Af;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e[e.DISCONNECTING=3]="DISCONNECTING",e[e.DISCONNECTED=4]="DISCONNECTED"}(Af||(Af={}));class Mf{get currentState(){return this.state}get isDisconnected(){return this.state===Af.DISCONNECTING||this.state===Af.DISCONNECTED}get isEstablishingConnection(){return this.state===Af.CONNECTING||this.state===Af.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;this.rtt=0,this.state=Af.DISCONNECTED,this.log=kd,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=wd(null!==(n=t.loggerName)&&void 0!==n?n:yd.Signal),this.loggerContextCb=t.loggerContextCb,this.useJSON=e,this.requestQueue=new Nf,this.queuedRequests=[],this.closingLock=new Fa,this.connectionLock=new Fa,this.state=Af.DISCONNECTED}get logContext(){var e,t;return null!==(t=null===(e=this.loggerContextCb)||void 0===e?void 0:e.call(this))&&void 0!==t?t:{}}join(e,t,n,i){return xd(this,void 0,void 0,(function*(){this.state=Af.CONNECTING,this.options=n;return yield this.connect(e,t,n,i)}))}reconnect(e,t,n,i){return xd(this,void 0,void 0,(function*(){if(!this.options)return void this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);this.state=Af.RECONNECTING,this.clearPingInterval();const r=yield this.connect(e,t,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:n,reconnectReason:i}));return r instanceof Ou?r:void 0}))}connect(e,t,n,i){this.connectOptions=n;const r=function(e,t,n){var i;const r=new URLSearchParams;r.set("access_token",e),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid));r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",Fp()?"reactnative":"js"),r.set("version",t.version),r.set("protocol",t.protocol.toString()),t.deviceModel&&r.set("device_model",t.deviceModel);t.os&&r.set("os",t.os);t.osVersion&&r.set("os_version",t.osVersion);t.browser&&r.set("browser",t.browser);t.browserVersion&&r.set("browser_version",t.browserVersion);n.adaptiveStream&&r.set("adaptive_stream","1");n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString());(null===(i=navigator.connection)||void 0===i?void 0:i.type)&&r.set("network",navigator.connection.type);return r}(t,function(){var e;const t=new su({sdk:au.JS,protocol:16,version:"2.13.5"});return Fp()&&(t.os=null!==(e=Vp())&&void 0!==e?e:""),t}(),n),o=function(e,t){const n=new URL(function(e){return e.startsWith("http")?e.replace(/^(http)/,"ws"):e}(e));return t.forEach(((e,t)=>{n.searchParams.set(t,e)})),If(n,"rtc")}(e,r),s=If(new URL(nf(o)),"validate");return new Promise(((e,t)=>xd(this,void 0,void 0,(function*(){const r=yield this.connectionLock.lock();try{const r=()=>xd(this,void 0,void 0,(function*(){this.close(),clearTimeout(a),t(new Yh("room connection has been cancelled (signal)",Hh.Cancelled))})),a=setTimeout((()=>{this.close(),t(new Yh("room connection has timed out (signal)",Hh.ServerUnreachable))}),n.websocketTimeout);(null===i||void 0===i?void 0:i.aborted)&&r(),null===i||void 0===i||i.addEventListener("abort",r);const c=new URL(o);c.searchParams.has("access_token")&&c.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(c),Object.assign({reconnect:n.reconnect,reconnectReason:n.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(o),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(a)},this.ws.onerror=e=>xd(this,void 0,void 0,(function*(){if(this.state===Af.CONNECTED)this.handleWSError(e);else{this.state=Af.DISCONNECTED,clearTimeout(a);try{const n=yield fetch(s);if(n.status.toFixed(0).startsWith("4")){const e=yield n.text();t(new Yh(e,Hh.NotAllowed,n.status))}else t(new Yh("Encountered unknown websocket error during connection: ".concat(e.toString()),Hh.InternalError,n.status))}catch(Be){t(new Yh(Be instanceof Error?Be.message:"server was not reachable",Hh.ServerUnreachable))}}})),this.ws.onmessage=o=>xd(this,void 0,void 0,(function*(){var s,a,c;let l;if("string"===typeof o.data){const e=JSON.parse(o.data);l=Su.fromJson(e,{ignoreUnknownFields:!0})}else{if(!(o.data instanceof ArrayBuffer))return void this.log.error("could not decode websocket message: ".concat(typeof o.data),this.logContext);l=Su.fromBinary(new Uint8Array(o.data))}if(this.state!==Af.CONNECTED){let o=!1;if("join"===(null===(s=l.message)||void 0===s?void 0:s.case)?(this.state=Af.CONNECTED,null===i||void 0===i||i.removeEventListener("abort",r),this.pingTimeoutDuration=l.message.value.pingTimeout,this.pingIntervalDuration=l.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),e(l.message.value)):this.state===Af.RECONNECTING&&"leave"!==l.message.case?(this.state=Af.CONNECTED,null===i||void 0===i||i.removeEventListener("abort",r),this.startPingInterval(),"reconnect"===(null===(a=l.message)||void 0===a?void 0:a.case)?e(l.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),e(void 0),o=!0)):this.isEstablishingConnection&&"leave"===l.message.case?t(new Yh("Received leave request while trying to (re)connect",Hh.LeaveRequest,void 0,l.message.value.reason)):n.reconnect||t(new Yh("did not receive join response, got ".concat(null===(c=l.message)||void 0===c?void 0:c.case," instead"),Hh.InternalError)),!o)return}this.signalLatency&&(yield Op(this.signalLatency)),this.handleSignalResponse(l)})),this.ws.onclose=e=>{this.isEstablishingConnection&&t(new Yh("Websocket got closed during a (re)connection attempt",Hh.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:e.reason,code:e.code,wasClean:e.wasClean,state:this.state})),this.handleOnClose(e.reason)}}finally{r()}}))))}close(){return xd(this,arguments,void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){const n=yield e.closingLock.lock();try{if(e.clearPingInterval(),t&&(e.state=Af.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const t=new Promise((t=>{e.ws?e.ws.onclose=()=>{t()}:t()}));e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([t,Op(250)])),e.ws=void 0}}finally{t&&(e.state=Af.DISCONNECTED),n()}}()}))}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:jf(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:jf(e)})}sendIceCandidate(e,t){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new xu({candidateInit:JSON.stringify(e),target:t})})}sendMuteTrack(e,t){return this.sendRequest({case:"mute",value:new Eu({sid:e,muted:t})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,t){return xd(this,arguments,void 0,(function(e,t){var n=this;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){const r=n.getNextRequestId();return yield n.sendRequest({case:"updateMetadata",value:new Bu({requestId:r,metadata:e,name:t,attributes:i})}),r}()}))}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,t){return this.sendRequest({case:"updateLayers",value:new Fu({trackSid:e,layers:t})})}sendUpdateSubscriptionPermissions(e,t){return this.sendRequest({case:"subscriptionPermission",value:new Xu({allParticipants:e,trackPermissions:t})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:ac.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new od({timestamp:ac.parse(Date.now()),rtt:ac.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,t){return this.sendRequest({case:"updateAudioTrack",value:new Mu({trackSid:e,features:t})})}sendLeave(){return this.sendRequest({case:"leave",value:new ju({reason:Rl.CLIENT_INITIATED,action:Uu.DISCONNECT})})}sendRequest(e){return xd(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){const i=!n&&!function(e){const t=Lf.indexOf(e.case)>=0;return kd.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}(e);if(i&&t.state===Af.RECONNECTING)return void t.queuedRequests.push((()=>xd(t,void 0,void 0,(function*(){yield this.sendRequest(e,!0)}))));if(n||(yield t.requestQueue.flush()),t.signalLatency&&(yield Op(t.signalLatency)),!t.ws||t.ws.readyState!==t.ws.OPEN)return void t.log.error("cannot send signal request before connected, type: ".concat(null===e||void 0===e?void 0:e.case),t.logContext);const r=new wu({message:e});try{t.useJSON?t.ws.send(r.toJsonString()):t.ws.send(r.toBinary())}catch(Be){t.log.error("error sending signal message",Object.assign(Object.assign({},t.logContext),{error:Be}))}}()}))}handleSignalResponse(e){var t,n;const i=e.message;if(void 0==i)return void this.log.debug("received unsupported message",this.logContext);let r=!1;if("answer"===i.case){const e=Df(i.value);this.onAnswer&&this.onAnswer(e)}else if("offer"===i.case){const e=Df(i.value);this.onOffer&&this.onOffer(e)}else if("trickle"===i.case){const e=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(e,i.value.target)}else"update"===i.case?this.onParticipantUpdate&&this.onParticipantUpdate(null!==(t=i.value.participants)&&void 0!==t?t:[]):"trackPublished"===i.case?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):"speakersChanged"===i.case?this.onSpeakersChanged&&this.onSpeakersChanged(null!==(n=i.value.speakers)&&void 0!==n?n:[]):"leave"===i.case?this.onLeave&&this.onLeave(i.value):"mute"===i.case?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):"roomUpdate"===i.case?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):"connectionQuality"===i.case?this.onConnectionQuality&&this.onConnectionQuality(i.value):"streamStateUpdate"===i.case?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):"subscribedQualityUpdate"===i.case?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):"subscriptionPermissionUpdate"===i.case?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):"refreshToken"===i.case?this.onTokenRefresh&&this.onTokenRefresh(i.value):"trackUnpublished"===i.case?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):"subscriptionResponse"===i.case?this.onSubscriptionError&&this.onSubscriptionError(i.value):"pong"===i.case||("pongResp"===i.case?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),r=!0):"requestResponse"===i.case?this.onRequestResponse&&this.onRequestResponse(i.value):"trackSubscribed"===i.case?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):"roomMoved"===i.case?(this.onTokenRefresh&&this.onTokenRefresh(i.value.token),this.onRoomMoved&&this.onRoomMoved(i.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));r||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return xd(this,void 0,void 0,(function*(){if(this.state===Af.DISCONNECTED)return;const t=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),t&&t(e)}))}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){this.clearPingTimeout(),this.pingTimeoutDuration?this.pingTimeout=hp.setTimeout((()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-1e3*this.pingTimeoutDuration).toUTCString()),this.logContext),this.handleOnClose("ping timeout")}),1e3*this.pingTimeoutDuration):this.log.warn("ping timeout duration not set",this.logContext)}clearPingTimeout(){this.pingTimeout&&hp.clearTimeout(this.pingTimeout)}startPingInterval(){this.clearPingInterval(),this.resetPingTimeout(),this.pingIntervalDuration?(this.log.debug("start ping interval",this.logContext),this.pingInterval=hp.setInterval((()=>{this.sendPing()}),1e3*this.pingIntervalDuration)):this.log.warn("ping interval duration not set",this.logContext)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&hp.clearInterval(this.pingInterval)}}function Df(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type}return t}function jf(e){return new Nu({sdp:e.sdp,type:e.type})}class Uf{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0;){if(!(this.buffer[0].sequence<=e))break;this.pop()}}alignBufferedAmount(e){for(;this.buffer.length>0;){const t=this.buffer[0];if(this._totalSize-t.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class Ff{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,t){const n=Date.now();n-this._lastCleanup>this.ttl/2&&this.cleanup();const i=n+this.ttl;return this._map.set(e,{value:t,expiresAt:i}),this}get(e){const t=this._map.get(e);if(t){if(!(t.expiresAt<Date.now()))return t.value;this._map.delete(e)}}has(e){const t=this._map.get(e);return!!t&&(!(t.expiresAt<Date.now())||(this._map.delete(e),!1))}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[t,n]of this._map.entries())n.expiresAt<e&&this._map.delete(t);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[t,n]of this._map.entries())n.expiresAt>=Date.now()&&e(n.value,t,this.asValueMap())}map(e){this.cleanup();const t=[],n=this.asValueMap();for(const[i,r]of n.entries())t.push(e(r,i,n));return t}asValueMap(){const e=new Map;for(const[t,n]of this._map.entries())n.expiresAt>=Date.now()&&e.set(t,n.value);return e}}var Bf,zf,Vf,Wf,Hf,qf={},Gf={},Kf={exports:{}};function Jf(){if(Bf)return Kf.exports;Bf=1;var e=Kf.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach((function(t){e[t].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))})),Kf.exports}function $f(){return zf||(zf=1,function(e){var t=function(e){return String(Number(e))===e?Number(e):e},n=function(e,n,i){var r=e.name&&e.names;e.push&&!n[e.push]?n[e.push]=[]:r&&!n[e.name]&&(n[e.name]={});var o=e.push?{}:r?n[e.name]:n;!function(e,n,i,r){if(r&&!i)n[r]=t(e[1]);else for(var o=0;o<i.length;o+=1)null!=e[o+1]&&(n[i[o]]=t(e[o+1]))}(i.match(e.reg),o,e.names,e.name),e.push&&n[e.push].push(o)},i=Jf(),r=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},o=[],s=t;return e.split(/(\r\n|\r|\n)/).filter(r).forEach((function(e){var t=e[0],r=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),s=o[o.length-1]);for(var a=0;a<(i[t]||[]).length;a+=1){var c=i[t][a];if(c.reg.test(r))return n(c,s,r)}})),t.media=o,t};var o=function(e,n){var i=n.split(/=(.+)/,2);return 2===i.length?e[i[0]]=t(i[1]):1===i.length&&n.length>1&&(e[i[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var n=[],i=e.split(" ").map(t),r=0;r<i.length;r+=3)n.push({component:i[r],ip:i[r+1],port:i[r+2]});return n},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var n,i=!1;return"~"!==e[0]?n=t(e):(n=t(e.substring(1,e.length)),i=!0),{scid:n,paused:i}}))}))}}(Gf)),Gf}function Qf(){if(Wf)return Vf;Wf=1;var e=Jf(),t=/%[sdv%]/g,n=function(e){var n=1,i=arguments,r=i.length;return e.replace(t,(function(e){if(n>=r)return e;var t=i[n];switch(n+=1,e){case"%%":return"%";case"%s":return String(t);case"%d":return Number(t);case"%v":return""}}))},i=function(e,t,i){var r=[e+"="+(t.format instanceof Function?t.format(t.push?i:i[t.name]):t.format)];if(t.names)for(var o=0;o<t.names.length;o+=1){var s=t.names[o];t.name?r.push(i[t.name][s]):r.push(i[t.names[o]])}else r.push(i[t.name]);return n.apply(null,r)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return Vf=function(t,n){n=n||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var s=n.outerOrder||r,a=n.innerOrder||o,c=[];return s.forEach((function(n){e[n].forEach((function(e){e.name in t&&null!=t[e.name]?c.push(i(n,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){c.push(i(n,e,t))}))}))})),t.media.forEach((function(t){c.push(i("m",e.m[0],t)),a.forEach((function(n){e[n].forEach((function(e){e.name in t&&null!=t[e.name]?c.push(i(n,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){c.push(i(n,e,t))}))}))}))})),c.join("\r\n")+"\r\n"},Vf}var Yf=function(){if(Hf)return qf;Hf=1;var e=$f(),t=Qf(),n=Jf();return qf.grammar=n,qf.write=t,qf.parse=e.parse,qf.parseParams=e.parseParams,qf.parseFmtpConfig=e.parseFmtpConfig,qf.parsePayloads=e.parsePayloads,qf.parseRemoteCandidates=e.parseRemoteCandidates,qf.parseImageAttributes=e.parseImageAttributes,qf.parseSimulcastStreamList=e.parseSimulcastStreamList,qf}();function Xf(e,t,n){var i,r,o;void 0===t&&(t=50),void 0===n&&(n={});var s=null!=(i=n.isImmediate)&&i,a=null!=(r=n.callback)&&r,c=n.maxWait,l=Date.now(),u=[];function d(){if(void 0!==c){var e=Date.now()-l;if(e+t>=c)return c-e}return t}var h=function(){var t=[].slice.call(arguments),n=this;return new Promise((function(i,r){var c=s&&void 0===o;if(void 0!==o&&clearTimeout(o),o=setTimeout((function(){if(o=void 0,l=Date.now(),!s){var i=e.apply(n,t);a&&a(i),u.forEach((function(e){return(0,e.resolve)(i)})),u=[]}}),d()),c){var h=e.apply(n,t);return a&&a(h),i(h)}u.push({resolve:i,reject:r})}))};return h.cancel=function(e){void 0!==o&&clearTimeout(o),u.forEach((function(t){return(0,t.reject)(e)})),u=[]},h}const Zf="negotiationStarted",em="negotiationComplete",tm="rtpVideoPayloadTypes";class nm extends _d.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;super(),this.log=kd,this.ddExtID=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Xf((e=>xd(this,void 0,void 0,(function*(){this.emit(Zf);try{yield this.createAndSendOffer()}catch(Be){if(!e)throw Be;e(Be)}}))),20),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=wd(null!==(n=t.loggerName)&&void 0!==n?n:yd.PCTransport),this.loggerOptions=t,this.config=e,this._pc=this.createPC()}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=e=>{var t;e.candidate&&(null===(t=this.onIceCandidate)||void 0===t||t.call(this,e.candidate))},e.onicecandidateerror=e=>{var t;null===(t=this.onIceCandidateError)||void 0===t||t.call(this,e)},e.oniceconnectionstatechange=()=>{var t;null===(t=this.onIceConnectionStateChange)||void 0===t||t.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var t;null===(t=this.onSignalingStatechange)||void 0===t||t.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var t;null===(t=this.onConnectionStateChange)||void 0===t||t.call(this,e.connectionState)},e.ondatachannel=e=>{var t;null===(t=this.onDataChannel)||void 0===t||t.call(this,e)},e.ontrack=e=>{var t;null===(t=this.onTrack)||void 0===t||t.call(this,e)},e}get logContext(){var e,t;return Object.assign({},null===(t=(e=this.loggerOptions).loggerContextCb)||void 0===t?void 0:t.call(e))}get isICEConnected(){return null!==this._pc&&("connected"===this.pc.iceConnectionState||"completed"===this.pc.iceConnectionState)}addIceCandidate(e){return xd(this,void 0,void 0,(function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)}))}setRemoteDescription(e){return xd(this,void 0,void 0,(function*(){var t;let n;if("offer"===e.type){let{stereoMids:t,nackMids:n}=function(e){var t;const n=[],i=[],r=Yf.parse(null!==(t=e.sdp)&&void 0!==t?t:"");let o=0;return r.media.forEach((e=>{var t;"audio"===e.type&&(e.rtp.some((e=>"opus"===e.codec&&(o=e.payload,!0))),(null===(t=e.rtcpFb)||void 0===t?void 0:t.some((e=>e.payload===o&&"nack"===e.type)))&&i.push(e.mid),e.fmtp.some((t=>t.payload===o&&(t.config.includes("sprop-stereo=1")&&n.push(e.mid),!0))))})),{stereoMids:n,nackMids:i}}(e);this.remoteStereoMids=t,this.remoteNackMids=n}else if("answer"===e.type){const i=Yf.parse(null!==(t=e.sdp)&&void 0!==t?t:"");i.media.forEach((e=>{"audio"===e.type&&this.trackBitrates.some((t=>{if(!t.transceiver||e.mid!=t.transceiver.mid)return!1;let n=0;if(e.rtp.some((e=>e.codec.toUpperCase()===t.codec.toUpperCase()&&(n=e.payload,!0))),0===n)return!0;let i=!1;for(const r of e.fmtp)if(r.payload===n){r.config=r.config.split(";").filter((e=>!e.includes("maxaveragebitrate"))).join(";"),t.maxbr>0&&(r.config+=";maxaveragebitrate=".concat(1e3*t.maxbr)),i=!0;break}return i||t.maxbr>0&&e.fmtp.push({payload:n,config:"maxaveragebitrate=".concat(1e3*t.maxbr)}),!0}))})),n=Yf.write(i)}if(yield this.setMungedSDP(e,n,!0),this.pendingCandidates.forEach((e=>{this.pc.addIceCandidate(e)})),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate)this.renegotiate=!1,yield this.createAndSendOffer();else if("answer"===e.type&&(this.emit(em),e.sdp)){Yf.parse(e.sdp).media.forEach((e=>{"video"===e.type&&this.emit(tm,e.rtp)}))}}))}createAndSendOffer(e){return xd(this,void 0,void 0,(function*(){var t;if(void 0===this.onOffer)return;if((null===e||void 0===e?void 0:e.iceRestart)&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&"have-local-offer"===this._pc.signalingState){const t=this._pc.remoteDescription;if(!(null===e||void 0===e?void 0:e.iceRestart)||!t)return void(this.renegotiate=!0);yield this._pc.setRemoteDescription(t)}else if(!this._pc||"closed"===this._pc.signalingState)return void this.log.warn("could not createOffer with closed peer connection",this.logContext);this.log.debug("starting to negotiate",this.logContext);const n=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:n.sdp},this.logContext));const i=Yf.parse(null!==(t=n.sdp)&&void 0!==t?t:"");i.media.forEach((e=>{rm(e),"audio"===e.type?im(e,[],[]):"video"===e.type&&this.trackBitrates.some((t=>{if(!e.msid||!t.cid||!e.msid.includes(t.cid))return!1;let n=0;if(e.rtp.some((e=>e.codec.toUpperCase()===t.codec.toUpperCase()&&(n=e.payload,!0))),0===n)return!0;if(Np(t.codec)&&this.ensureVideoDDExtensionForSVC(e,i),"av1"!==t.codec)return!0;const r=Math.round(.7*t.maxbr);for(const i of e.fmtp)if(i.payload===n){i.config.includes("x-google-start-bitrate")||(i.config+=";x-google-start-bitrate=".concat(r));break}return!0}))})),yield this.setMungedSDP(n,Yf.write(i)),this.onOffer(n)}))}createAndSetAnswer(){return xd(this,void 0,void 0,(function*(){var e;const t=yield this.pc.createAnswer(),n=Yf.parse(null!==(e=t.sdp)&&void 0!==e?e:"");return n.media.forEach((e=>{rm(e),"audio"===e.type&&im(e,this.remoteStereoMids,this.remoteNackMids)})),yield this.setMungedSDP(t,Yf.write(n)),t}))}createDataChannel(e,t){return this.pc.createDataChannel(e,t)}addTransceiver(e,t){return this.pc.addTransceiver(e,t)}addTrack(e){if(!this._pc)throw new tp("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var t;if(!this._pc)throw new tp("PC closed, cannot configure");return null===(t=this._pc)||void 0===t?void 0:t.setConfiguration(e)}canRemoveTrack(){var e;return!!(null===(e=this._pc)||void 0===e?void 0:e.removeTrack)}removeTrack(e){var t;return null===(t=this._pc)||void 0===t?void 0:t.removeTrack(e)}getConnectionState(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.connectionState)&&void 0!==t?t:"closed"}getICEConnectionState(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.iceConnectionState)&&void 0!==t?t:"closed"}getSignallingState(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.signalingState)&&void 0!==t?t:"closed"}getTransceivers(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.getTransceivers())&&void 0!==t?t:[]}getSenders(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.getSenders())&&void 0!==t?t:[]}getLocalDescription(){var e;return null===(e=this._pc)||void 0===e?void 0:e.localDescription}getRemoteDescription(){var e;return null===(e=this.pc)||void 0===e?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return xd(this,void 0,void 0,(function*(){var e;if(!this._pc)return;let t="";const n=new Map,i=new Map;if((yield this._pc.getStats()).forEach((e=>{switch(e.type){case"transport":t=e.selectedCandidatePairId;break;case"candidate-pair":""===t&&e.selected&&(t=e.id),n.set(e.id,e);break;case"remote-candidate":i.set(e.id,"".concat(e.address,":").concat(e.port))}})),""===t)return;const r=null===(e=n.get(t))||void 0===e?void 0:e.remoteCandidateId;return void 0!==r?i.get(r):void 0}))}setMungedSDP(e,t,n){return xd(this,void 0,void 0,(function*(){if(t){const i=e.sdp;e.sdp=t;try{return this.log.debug("setting munged ".concat(n?"remote":"local"," description"),this.logContext),void(n?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e))}catch(Be){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:Be,sdp:t})),e.sdp=i}}try{n?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(Be){let i="unknown error";Be instanceof Error?i=Be.message:"string"===typeof Be&&(i=Be);const r={error:i,sdp:e.sdp};throw!n&&this.pc.remoteDescription&&(r.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:r})),new np(i)}}))}ensureVideoDDExtensionForSVC(e,t){var n,i;if(!(null===(n=e.ext)||void 0===n?void 0:n.some((e=>e.uri===Pp)))){if(0===this.ddExtID){let e=0;t.media.forEach((t=>{var n;"video"===t.type&&(null===(n=t.ext)||void 0===n||n.forEach((t=>{t.value>e&&(e=t.value)})))})),this.ddExtID=e+1}null===(i=e.ext)||void 0===i||i.push({value:this.ddExtID,uri:Pp})}}}function im(e,t,n){let i=0;e.rtp.some((e=>"opus"===e.codec&&(i=e.payload,!0))),i>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(e.mid)&&!e.rtcpFb.some((e=>e.payload===i&&"nack"===e.type))&&e.rtcpFb.push({payload:i,type:"nack"}),t.includes(e.mid)&&e.fmtp.some((e=>e.payload===i&&(e.config.includes("stereo=1")||(e.config+=";stereo=1"),!0))))}function rm(e){if(e.connection){const t=e.connection.ip.indexOf(":")>=0;(4===e.connection.version&&t||6===e.connection.version&&!t)&&(e.connection.ip="0.0.0.0",e.connection.version=4)}}const om="vp8",sm={audioPreset:Cp.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:Ep.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:om,backupCodec:!0,preConnectBuffer:!1},am={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},cm={deviceId:{ideal:"default"},resolution:Tp.h720.resolution},lm={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new class{constructor(e){this._retryDelays=void 0!==e?[...e]:Td}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const t=this._retryDelays[e.retryCount];return e.retryCount<=1?t:t+1e3*Math.random()}},disconnectOnPageLeave:!0,webAudioMix:!1},um={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var dm;!function(e){e[e.NEW=0]="NEW",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"}(dm||(dm={}));class hm{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,t,n){var i;this.peerConnectionTimeout=um.peerConnectionTimeout,this.log=kd,this.updateState=()=>{var e;const t=this.state,n=this.requiredTransports.map((e=>e.getConnectionState()));n.every((e=>"connected"===e))?this.state=dm.CONNECTED:n.some((e=>"failed"===e))?this.state=dm.FAILED:n.some((e=>"connecting"===e))?this.state=dm.CONNECTING:n.every((e=>"closed"===e))?this.state=dm.CLOSED:n.some((e=>"closed"===e))?this.state=dm.CLOSING:n.every((e=>"new"===e))&&(this.state=dm.NEW),t!==this.state&&(this.log.debug("pc state change: from ".concat(dm[t]," to ").concat(dm[this.state]),this.logContext),null===(e=this.onStateChange)||void 0===e||e.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=wd(null!==(i=n.loggerName)&&void 0!==i?i:yd.PCManager),this.loggerOptions=n,this.isPublisherConnectionRequired=!t,this.isSubscriberConnectionRequired=t,this.publisher=new nm(e,n),this.subscriber=new nm(e,n),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=e=>{var t;null===(t=this.onIceCandidate)||void 0===t||t.call(this,e,yu.PUBLISHER)},this.subscriber.onIceCandidate=e=>{var t;null===(t=this.onIceCandidate)||void 0===t||t.call(this,e,yu.SUBSCRIBER)},this.subscriber.onDataChannel=e=>{var t;null===(t=this.onDataChannel)||void 0===t||t.call(this,e)},this.subscriber.onTrack=e=>{var t;null===(t=this.onTrack)||void 0===t||t.call(this,e)},this.publisher.onOffer=e=>{var t;null===(t=this.onPublisherOffer)||void 0===t||t.call(this,e)},this.state=dm.NEW,this.connectionLock=new Fa,this.remoteOfferLock=new Fa}get logContext(){var e,t;return Object.assign({},null===(t=(e=this.loggerOptions).loggerContextCb)||void 0===t?void 0:t.call(e))}requirePublisher(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return xd(this,void 0,void 0,(function*(){if(this.publisher&&"closed"!==this.publisher.getSignallingState()){const e=this.publisher;for(const t of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(t)}catch(Be){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:Be}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()}))}triggerIceRestart(){return xd(this,void 0,void 0,(function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))}))}addIceCandidate(e,t){return xd(this,void 0,void 0,(function*(){t===yu.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)}))}createSubscriberAnswerFromOffer(e){return xd(this,void 0,void 0,(function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const t=yield this.remoteOfferLock.lock();try{yield this.subscriber.setRemoteDescription(e);return yield this.subscriber.createAndSetAnswer()}finally{t()}}))}updateConfiguration(e,t){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),t&&this.triggerIceRestart()}ensurePCTransportConnection(e,t){return xd(this,void 0,void 0,(function*(){var n;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&"connected"!==this.publisher.getConnectionState()&&"connecting"!==this.publisher.getConnectionState()&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all(null===(n=this.requiredTransports)||void 0===n?void 0:n.map((n=>this.ensureTransportConnected(n,e,t))))}finally{i()}}))}negotiate(e){return xd(this,void 0,void 0,(function*(){return new Promise(((t,n)=>xd(this,void 0,void 0,(function*(){const i=setTimeout((()=>{n("negotiation timed out")}),this.peerConnectionTimeout);e.signal.addEventListener("abort",(()=>{clearTimeout(i),n("negotiation aborted")})),this.publisher.once(Zf,(()=>{e.signal.aborted||this.publisher.once(em,(()=>{clearTimeout(i),t()}))})),yield this.publisher.negotiate((e=>{clearTimeout(i),n(e)}))}))))}))}addPublisherTransceiver(e,t){return this.publisher.addTransceiver(e,t)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,t){return this.publisher.createDataChannel(e,t)}getConnectedAddress(e){return e===yu.PUBLISHER||e===yu.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,t){return xd(this,arguments,void 0,(function(e,t){var n=this;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.peerConnectionTimeout;return function*(){if("connected"!==e.getConnectionState())return new Promise(((e,r)=>xd(n,void 0,void 0,(function*(){const n=()=>{this.log.warn("abort transport connection",this.logContext),hp.clearTimeout(o),r(new Yh("room connection has been cancelled",Hh.Cancelled))};(null===t||void 0===t?void 0:t.signal.aborted)&&n(),null===t||void 0===t||t.signal.addEventListener("abort",n);const o=hp.setTimeout((()=>{null===t||void 0===t||t.signal.removeEventListener("abort",n),r(new Yh("could not establish pc connection",Hh.InternalError))}),i);for(;this.state!==dm.CONNECTED;)if(yield Op(50),null===t||void 0===t?void 0:t.signal.aborted)return void r(new Yh("room connection has been cancelled",Hh.Cancelled));hp.clearTimeout(o),null===t||void 0===t||t.signal.removeEventListener("abort",n),e()}))))}()}))}}class pm extends Error{constructor(e,t,n){super(t),this.code=e,this.message=mm(t,pm.MAX_MESSAGE_BYTES),this.data=n?mm(n,pm.MAX_DATA_BYTES):void 0}static fromProto(e){return new pm(e.code,e.message,e.data)}toProto(){return new nu({code:this.code,message:this.message,data:this.data})}static builtIn(e,t){return new pm(pm.ErrorCode[e],pm.ErrorMessage[e],t)}}pm.MAX_MESSAGE_BYTES=256,pm.MAX_DATA_BYTES=15360,pm.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404},pm.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};function fm(e){return(new TextEncoder).encode(e).length}function mm(e,t){if(fm(e)<=t)return e;let n=0,i=e.length;const r=new TextEncoder;for(;n<i;){const o=Math.floor((n+i+1)/2);r.encode(e.slice(0,o)).length<=t?n=o:i=o-1}return e.slice(0,n)}const gm=2e3;function vm(e,t){if(!t)return 0;let n,i;return"bytesReceived"in e?(n=e.bytesReceived,i=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,i=t.bytesSent),void 0===n||void 0===i||void 0===e.timestamp||void 0===t.timestamp?0:8*(n-i)*1e3/(e.timestamp-t.timestamp)}const ym="undefined"!==typeof MediaRecorder;const bm=ym?MediaRecorder:class{constructor(){throw new Error("MediaRecorder is not available in this environment")}};class km extends bm{constructor(e,t){if(!ym)throw new Error("MediaRecorder is not available in this environment");let n,i;super(new MediaStream([e.mediaStreamTrack]),t);const r=()=>{this.removeEventListener("dataavailable",n),this.removeEventListener("stop",r),this.removeEventListener("error",o),null===i||void 0===i||i.close(),i=void 0},o=e=>{null===i||void 0===i||i.error(e),this.removeEventListener("dataavailable",n),this.removeEventListener("stop",r),this.removeEventListener("error",o),i=void 0};this.byteStream=new ReadableStream({start:e=>{i=e,n=t=>xd(this,void 0,void 0,(function*(){const n=yield t.data.arrayBuffer();void 0!==i&&e.enqueue(new Uint8Array(n))})),this.addEventListener("dataavailable",n)},cancel:()=>{r()}}),this.addEventListener("stop",r),this.addEventListener("error",o)}}class wm extends mp{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(e,t,arguments.length>4?arguments[4]:void 0),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch((()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext))),this.debouncedTrackMuteHandler=Xf((()=>xd(this,void 0,void 0,(function*(){yield this.pauseUpstream()}))),5e3),this.handleTrackUnmuteEvent=()=>xd(this,void 0,void 0,(function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()})),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(Qh.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new Fa,this.pauseUpstreamLock=new Fa,this.processorLock=new Fa,this.restartLock=new Fa,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),n&&(this._constraints=n)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==mp.Kind.Video)return;const{width:e,height:t}=this._mediaStreamTrack.getSettings();return e&&t?{width:e,height:t}:void 0}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,t;return null!==(t=null===(e=this.processor)||void 0===e?void 0:e.processedTrack)&&void 0!==t?t:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,t){return xd(this,void 0,void 0,(function*(){var n;if(e===this._mediaStreamTrack&&!t)return;let i;if(this._mediaStreamTrack&&(this.attachedElements.forEach((e=>{vp(this._mediaStreamTrack,e)})),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints()),this.processor&&e){const t=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),"unknown"===this.kind)throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(gp(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}finally{t()}}this.sender&&"closed"!==(null===(n=this.sender.transport)||void 0===n?void 0:n.state)&&(yield this.sender.replaceTrack(null!==i&&void 0!==i?i:e)),this.providedByUser||this._mediaStreamTrack===e||this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach((t=>{gp(null!==i&&void 0!==i?i:e,t)})))}))}waitForDimensions(){return xd(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return function*(){var n;if(e.kind===mp.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");"iOS"===(null===(n=cp())||void 0===n?void 0:n.os)&&(yield Op(10));const i=Date.now();for(;Date.now()-i<t;){const t=e.dimensions;if(t)return t;yield Op(50)}throw new Zh("unable to get track dimensions after timeout")}()}))}setDeviceId(e){return xd(this,void 0,void 0,(function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===tf(e)||(this._constraints.deviceId=e,!!this.isMuted||(yield this.restartTrack(),tf(e)===this._mediaStreamTrack.getSettings().deviceId))}))}getDeviceId(){return xd(this,arguments,void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){if(e.source===mp.Source.ScreenShare)return;const{deviceId:n,groupId:i}=e._mediaStreamTrack.getSettings(),r=e.kind===mp.Kind.Audio?"audioinput":"videoinput";return t?Rf.getInstance().normalizeDeviceId(r,n,i):n}()}))}mute(){return xd(this,void 0,void 0,(function*(){return this.setTrackMuted(!0),this}))}unmute(){return xd(this,void 0,void 0,(function*(){return this.setTrackMuted(!1),this}))}replaceTrack(e,t){return xd(this,void 0,void 0,(function*(){if(!this.sender)throw new Zh("unable to replace an unpublished track");let n,i;return"boolean"===typeof t?n=t:void 0!==t&&(n=t.userProvidedTrack,i=t.stopProcessor),this.providedByUser=null===n||void 0===n||n,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),i&&this.processor&&(yield this.stopProcessor()),this}))}restart(e){return xd(this,void 0,void 0,(function*(){this.manuallyStopped=!1;const t=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:t,facingMode:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const r={audio:!1,video:!1};this.kind===mp.Kind.Video?r.video=!t&&!n||{deviceId:t,facingMode:n}:r.audio=!t||{deviceId:t},this.attachedElements.forEach((e=>{vp(this.mediaStreamTrack,e)})),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const o=(yield navigator.mediaDevices.getUserMedia(r)).getTracks()[0];return yield o.applyConstraints(i),o.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(o),this._constraints=e,this.emit(Qh.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{t()}}))}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),this.isMuted===e&&this._mediaStreamTrack.enabled!==e||(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Qh.Muted:Qh.Unmuted,this))}get needsReAcquisition(){return"live"!==this._mediaStreamTrack.readyState||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return xd(this,void 0,void 0,(function*(){yield e.handleAppVisibilityChanged.call(this),jp()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),this.isInBackground||!this.needsReAcquisition||this.isUserProvided||this.isMuted||(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))}))}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),null===(e=this.processor)||void 0===e||e.destroy(),this.processor=void 0}pauseUpstream(){return xd(this,void 0,void 0,(function*(){var e;const t=yield this.pauseUpstreamLock.lock();try{if(!0===this._isUpstreamPaused)return;if(!this.sender)return void this.log.warn("unable to pause upstream for an unpublished track",this.logContext);this._isUpstreamPaused=!0,this.emit(Qh.UpstreamPaused,this);const t=cp();if("Safari"===(null===t||void 0===t?void 0:t.name)&&Hp(t.version,"12.0")<0)throw new Xh("pauseUpstream is not supported on Safari < 12.");"closed"!==(null===(e=this.sender.transport)||void 0===e?void 0:e.state)&&(yield this.sender.replaceTrack(null))}finally{t()}}))}resumeUpstream(){return xd(this,void 0,void 0,(function*(){var e;const t=yield this.pauseUpstreamLock.lock();try{if(!1===this._isUpstreamPaused)return;if(!this.sender)return void this.log.warn("unable to resume upstream for an unpublished track",this.logContext);this._isUpstreamPaused=!1,this.emit(Qh.UpstreamResumed,this),"closed"!==(null===(e=this.sender.transport)||void 0===e?void 0:e.state)&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{t()}}))}getRTCStatsReport(){return xd(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.sender)||void 0===e?void 0:e.getStats))return;return yield this.sender.getStats()}))}setProcessor(e){return xd(this,arguments,void 0,(function(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){var i;const r=yield t.processorLock.lock();try{t.log.debug("setting up processor",t.logContext);const r=document.createElement(t.kind),o={kind:t.kind,track:t._mediaStreamTrack,element:r,audioContext:t.audioContext};if(yield e.init(o),t.log.debug("processor initialized",t.logContext),t.processor&&(yield t.stopProcessor()),"unknown"===t.kind)throw TypeError("cannot set processor on track of unknown kind");if(gp(t._mediaStreamTrack,r),r.muted=!0,r.play().catch((e=>t.log.error("failed to play processor element",Object.assign(Object.assign({},t.logContext),{error:e})))),t.processor=e,t.processorElement=r,t.processor.processedTrack){for(const e of t.attachedElements)e!==t.processorElement&&n&&(vp(t._mediaStreamTrack,e),gp(t.processor.processedTrack,e));yield null===(i=t.sender)||void 0===i?void 0:i.replaceTrack(t.processor.processedTrack)}t.emit(Qh.TrackProcessorUpdate,t.processor)}finally{r()}}()}))}getProcessor(){return this.processor}stopProcessor(){return xd(this,arguments,void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){var n,i;e.processor&&(e.log.debug("stopping processor",e.logContext),null===(n=e.processor.processedTrack)||void 0===n||n.stop(),yield e.processor.destroy(),e.processor=void 0,t||(null===(i=e.processorElement)||void 0===i||i.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(Qh.TrackProcessorUpdate))}()}))}startPreConnectBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;ym?this.localTrackRecorder?this.log.warn("preconnect buffer already started"):(this.localTrackRecorder=new km(this,{mimeType:"audio/webm;codecs=opus"}),this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout((()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()}),1e4)):this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return null===(e=this.localTrackRecorder)||void 0===e?void 0:e.byteStream}}class Sm extends wm{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;super(e,mp.Kind.Audio,t,n,r),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>xd(this,void 0,void 0,(function*(){if(!this.sender)return void(this._currentBitrate=0);let e;try{e=yield this.getSenderStats()}catch(Be){return void this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:Be}))}e&&this.prevStats&&(this._currentBitrate=vm(e,this.prevStats)),this.prevStats=e})),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(Qh.AudioTrackFeatureUpdate,this,Il.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(Qh.AudioTrackFeatureUpdate,this,Il.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return xd(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===mp.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{t()}}))}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return xd(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const t=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==tf(this._constraints.deviceId);return this.source!==mp.Source.Microphone||!this.stopOnMute&&"ended"!==this._mediaStreamTrack.readyState&&!t||this.isUserProvided||(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{t()}}))}restartTrack(e){return xd(this,void 0,void 0,(function*(){let t;if(e){const n=vf({audio:e});"boolean"!==typeof n.audio&&(t=n.audio)}yield this.restart(t)}))}restart(e){const t=Object.create(null,{restart:{get:()=>super.restart}});return xd(this,void 0,void 0,(function*(){const n=yield t.restart.call(this,e);return this.checkForSilence(),n}))}startMonitor(){Up()&&(this.monitorInterval||(this.monitorInterval=setInterval((()=>{this.monitorSender()}),gm)))}setProcessor(e){return xd(this,void 0,void 0,(function*(){var t;const n=yield this.processorLock.lock();try{if(!Fp()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const n={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(n),this.processor=e,this.processor.processedTrack&&(yield null===(t=this.sender)||void 0===t?void 0:t.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(Qh.TrackProcessorUpdate,this.processor)}finally{n()}}))}setAudioContext(e){this.audioContext=e}getSenderStats(){return xd(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.sender)||void 0===e?void 0:e.getStats))return;let t;return(yield this.sender.getStats()).forEach((e=>{"outbound-rtp"===e.type&&(t={type:"audio",streamId:e.id,packetsSent:e.packetsSent,packetsLost:e.packetsLost,bytesSent:e.bytesSent,timestamp:e.timestamp,roundTripTime:e.roundTripTime,jitter:e.jitter})})),t}))}checkForSilence(){return xd(this,void 0,void 0,(function*(){const e=yield yf(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(Qh.AudioSilenceDetected)),e}))}}const Cm=Object.values(Tp),Tm=Object.values(xp),xm=Object.values(Ep),Em=[Tp.h180,Tp.h360],Pm=[xp.h180,xp.h360],Om=["q","h","f"];function Rm(e,t,n,i){var r,o;let s=null===i||void 0===i?void 0:i.videoEncoding;e&&(s=null===i||void 0===i?void 0:i.screenShareEncoding);const a=null===i||void 0===i?void 0:i.simulcast,c=null===i||void 0===i?void 0:i.scalabilityMode,l=null===i||void 0===i?void 0:i.videoCodec;if(!s&&!a&&!c||!t||!n)return[{}];s||(s=function(e,t,n,i){const r=function(e,t,n){if(e)return xm;const i=t>n?t/n:n/t;if(Math.abs(i-16/9)<Math.abs(i-4/3))return Cm;return Tm}(e,t,n);let{encoding:o}=r[0];const s=Math.max(t,n);for(let a=0;a<r.length;a+=1){const e=r[a];if(o=e.encoding,e.width>=s)break}if(i)switch(i){case"av1":o=Object.assign({},o),o.maxBitrate=.7*o.maxBitrate;break;case"vp9":o=Object.assign({},o),o.maxBitrate=.85*o.maxBitrate}return o}(e,t,n,l),kd.debug("using video encoding",s));const u=s.maxFramerate,d=new yp(t,n,s.maxBitrate,s.maxFramerate,s.priority);if(c&&Np(l)){const e=new Lm(c),t=[];if(e.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));const n=cp();if(Ap()||Fp()||"Chrome"===(null===n||void 0===n?void 0:n.name)&&Hp(null===n||void 0===n?void 0:n.version,"113")<0){const i="h"==e.suffix?2:3,r=function(e){return e||(e=cp()),"Safari"===(null===e||void 0===e?void 0:e.name)&&Hp(e.version,"18.3")>0}(n);for(let n=0;n<e.spatial;n+=1)t.push({rid:Om[2-n],maxBitrate:s.maxBitrate/Math.pow(i,n),maxFramerate:d.encoding.maxFramerate,scaleResolutionDownBy:r?Math.pow(2,n):void 0});t[0].scalabilityMode=c}else t.push({maxBitrate:s.maxBitrate,maxFramerate:d.encoding.maxFramerate,scalabilityMode:c});return d.encoding.priority&&(t[0].priority=d.encoding.priority,t[0].networkPriority=d.encoding.priority),kd.debug("using svc encoding",{encodings:t}),t}if(!a)return[s];let h,p=[];if(p=e?null!==(r=Im(null===i||void 0===i?void 0:i.screenShareSimulcastLayers))&&void 0!==r?r:_m(e,d):null!==(o=Im(null===i||void 0===i?void 0:i.videoSimulcastLayers))&&void 0!==o?o:_m(e,d),p.length>0){const e=p[0];p.length>1&&([,h]=p);const i=Math.max(t,n);if(i>=960&&h)return Nm(t,n,[e,h,d],u);if(i>=480)return Nm(t,n,[e,d],u)}return Nm(t,n,[d])}function _m(e,t){if(e)return[{scaleResolutionDownBy:2,fps:(n=t).encoding.maxFramerate}].map((e=>{var t,i;return new yp(Math.floor(n.width/e.scaleResolutionDownBy),Math.floor(n.height/e.scaleResolutionDownBy),Math.max(15e4,Math.floor(n.encoding.maxBitrate/(Math.pow(e.scaleResolutionDownBy,2)*((null!==(t=n.encoding.maxFramerate)&&void 0!==t?t:30)/(null!==(i=e.fps)&&void 0!==i?i:30))))),e.fps,n.encoding.priority)}));var n;const{width:i,height:r}=t,o=i>r?i/r:r/i;return Math.abs(o-16/9)<Math.abs(o-4/3)?Em:Pm}function Nm(e,t,n,i){const r=[];if(n.forEach(((n,o)=>{if(o>=Om.length)return;const s=Math.min(e,t),a={rid:Om[o],scaleResolutionDownBy:Math.max(1,s/Math.min(n.width,n.height)),maxBitrate:n.encoding.maxBitrate},c=i&&n.encoding.maxFramerate?Math.min(i,n.encoding.maxFramerate):n.encoding.maxFramerate;c&&(a.maxFramerate=c);const l=Lp()||0===o;n.encoding.priority&&l&&(a.priority=n.encoding.priority,a.networkPriority=n.encoding.priority),r.push(a)})),Fp()&&"ios"===Vp()){let e;r.forEach((t=>{e?t.maxFramerate&&t.maxFramerate>e&&(e=t.maxFramerate):e=t.maxFramerate}));let t=!0;r.forEach((n=>{var i;n.maxFramerate!=e&&(t&&(t=!1,kd.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),kd.info('Setting framerate of encoding "'.concat(null!==(i=n.rid)&&void 0!==i?i:"",'" to ').concat(e)),n.maxFramerate=e)}))}return r}function Im(e){if(e)return e.sort(((e,t)=>{const{encoding:n}=e,{encoding:i}=t;return n.maxBitrate>i.maxBitrate?1:n.maxBitrate<i.maxBitrate?-1:n.maxBitrate===i.maxBitrate&&n.maxFramerate&&i.maxFramerate?n.maxFramerate>i.maxFramerate?1:-1:0}))}class Lm{constructor(e){const t=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!t)throw new Error("invalid scalability mode");if(this.spatial=parseInt(t[1]),this.temporal=parseInt(t[2]),t.length>3)switch(t[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=t[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat(null!==(e=this.suffix)&&void 0!==e?e:"")}}class Am extends wm{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;super(e,mp.Kind.Video,t,n,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.monitorSender=()=>xd(this,void 0,void 0,(function*(){if(!this.sender)return void(this._currentBitrate=0);let e;try{e=yield this.getSenderStats()}catch(Be){return void this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:Be}))}const t=new Map(e.map((e=>[e.rid,e])));if(this.prevStats){let e=0;t.forEach(((t,n)=>{var i;const r=null===(i=this.prevStats)||void 0===i?void 0:i.get(n);e+=vm(t,r)})),this._currentBitrate=e}this.prevStats=t})),this.senderLock=new Fa}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var t;if(this.signalClient=e,!Up())return;const n=null===(t=this.sender)||void 0===t?void 0:t.getParameters();n&&(this.encodings=n.encodings),this.monitorInterval||(this.monitorInterval=setInterval((()=>{this.monitorSender()}),gm))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach((e=>{e.mediaStreamTrack.stop()})),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return xd(this,void 0,void 0,(function*(){var t,n,i,r,o;yield e.pauseUpstream.call(this);try{for(var s,a=!0,c=Pd(this.simulcastCodecs.values());!(t=(s=yield c.next()).done);a=!0){r=s.value,a=!1;const e=r;yield null===(o=e.sender)||void 0===o?void 0:o.replaceTrack(null)}}catch(l){n={error:l}}finally{try{a||t||!(i=c.return)||(yield i.call(c))}finally{if(n)throw n.error}}}))}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return xd(this,void 0,void 0,(function*(){var t,n,i,r,o;yield e.resumeUpstream.call(this);try{for(var s,a=!0,c=Pd(this.simulcastCodecs.values());!(t=(s=yield c.next()).done);a=!0){r=s.value,a=!1;const e=r;yield null===(o=e.sender)||void 0===o?void 0:o.replaceTrack(e.mediaStreamTrack)}}catch(l){n={error:l}}finally{try{a||t||!(i=c.return)||(yield i.call(c))}finally{if(n)throw n.error}}}))}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return xd(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source!==mp.Source.Camera||this.isUserProvided||(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{t()}}))}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return xd(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.source!==mp.Source.Camera||this.isUserProvided||(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{t()}}))}setTrackMuted(e){super.setTrackMuted(e);for(const t of this.simulcastCodecs.values())t.mediaStreamTrack.enabled=!e}getSenderStats(){return xd(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.sender)||void 0===e?void 0:e.getStats))return[];const t=[],n=yield this.sender.getStats();return n.forEach((e=>{var i;if("outbound-rtp"===e.type){const r={type:"video",streamId:e.id,frameHeight:e.frameHeight,frameWidth:e.frameWidth,framesPerSecond:e.framesPerSecond,framesSent:e.framesSent,firCount:e.firCount,pliCount:e.pliCount,nackCount:e.nackCount,packetsSent:e.packetsSent,bytesSent:e.bytesSent,qualityLimitationReason:e.qualityLimitationReason,qualityLimitationDurations:e.qualityLimitationDurations,qualityLimitationResolutionChanges:e.qualityLimitationResolutionChanges,rid:null!==(i=e.rid)&&void 0!==i?i:e.id,retransmittedPacketsSent:e.retransmittedPacketsSent,targetBitrate:e.targetBitrate,timestamp:e.timestamp},o=n.get(e.remoteId);o&&(r.jitter=o.jitter,r.packetsLost=o.packetsLost,r.roundTripTime=o.roundTripTime),t.push(r)}})),t.sort(((e,t)=>{var n,i;return(null!==(n=t.frameWidth)&&void 0!==n?n:0)-(null!==(i=e.frameWidth)&&void 0!==i?i:0)})),t}))}setPublishingQuality(e){const t=[];for(let n=fp.LOW;n<=fp.HIGH;n+=1)t.push(new Ju({quality:n,enabled:n<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(Np(this.codec),t)}restartTrack(e){return xd(this,void 0,void 0,(function*(){var t,n,i,r,o;let s;if(e){const t=vf({video:e});"boolean"!==typeof t.video&&(s=t.video)}yield this.restart(s);try{for(var a,c=!0,l=Pd(this.simulcastCodecs.values());!(t=(a=yield l.next()).done);c=!0){r=a.value,c=!1;const e=r;e.sender&&"closed"!==(null===(o=e.sender.transport)||void 0===o?void 0:o.state)&&(e.mediaStreamTrack=this.mediaStreamTrack.clone(),yield e.sender.replaceTrack(e.mediaStreamTrack))}}catch(u){n={error:u}}finally{try{c||t||!(i=l.return)||(yield i.call(l))}finally{if(n)throw n.error}}}))}setProcessor(e){const t=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return xd(this,arguments,void 0,(function(e){var n=this;let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){var r,o,s,a,c,l;if(yield t.setProcessor.call(n,e,i),null===(c=n.processor)||void 0===c?void 0:c.processedTrack)try{for(var u,d=!0,h=Pd(n.simulcastCodecs.values());!(r=(u=yield h.next()).done);d=!0){a=u.value,d=!1;const e=a;yield null===(l=e.sender)||void 0===l?void 0:l.replaceTrack(n.processor.processedTrack)}}catch(p){o={error:p}}finally{try{d||r||!(s=h.return)||(yield s.call(h))}finally{if(o)throw o.error}}}()}))}setDegradationPreference(e){return xd(this,void 0,void 0,(function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const t=this.sender.getParameters();t.degradationPreference=e,this.sender.setParameters(t)}catch(Be){this.log.warn("failed to set degradationPreference",Object.assign({error:Be},this.logContext))}}))}addSimulcastTrack(e,t){if(this.simulcastCodecs.has(e))return void this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);const n={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:t};return this.simulcastCodecs.set(e,n),n}setSimulcastTrackSender(e,t){const n=this.simulcastCodecs.get(e);n&&(n.sender=t,setTimeout((()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)}),5e3))}setPublishingCodecs(e){return xd(this,void 0,void 0,(function*(){var t,n,i,r,o,s,a;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(Np(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const c=[];try{for(t=!0,n=Pd(e);!(r=(i=yield n.next()).done);t=!0){a=i.value,t=!1;const e=a;if(this.codec&&this.codec!==e.codec){const t=this.simulcastCodecs.get(e.codec);if(this.log.debug("try setPublishingCodec for ".concat(e.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:t})),t&&t.sender)t.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(e.codec),this.logContext),yield Mm(t.sender,t.encodings,e.qualities,this.senderLock,Np(e.codec),this.log,this.logContext));else for(const n of e.qualities)if(n.enabled){c.push(e.codec);break}}else yield this.setPublishingLayers(Np(e.codec),e.qualities)}}catch(l){o={error:l}}finally{try{t||r||!(s=n.return)||(yield s.call(n))}finally{if(o)throw o.error}}return c}))}setPublishingLayers(e,t){return xd(this,void 0,void 0,(function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:t})),this.sender&&this.encodings&&(yield Mm(this.sender,this.encodings,t,this.senderLock,e,this.log,this.logContext))}))}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return xd(this,void 0,void 0,(function*(){yield e.handleAppVisibilityChanged.call(this),jp()&&this.isInBackground&&this.source===mp.Source.Camera&&(this._mediaStreamTrack.enabled=!1)}))}}function Mm(e,t,n,i,r,o,s){return xd(this,void 0,void 0,(function*(){const a=yield i.lock();o.debug("setPublishingLayersForSender",Object.assign(Object.assign({},s),{sender:e,qualities:n,senderEncodings:t}));try{const i=e.getParameters(),{encodings:a}=i;if(!a)return;if(a.length!==t.length)return void o.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},s),{encodings:a,senderEncodings:t}));let c=!1;const l=cp();if("Chrome"===(null===l||void 0===l?void 0:l.name)&&Hp(null===l||void 0===l?void 0:l.version,"133")>0&&a[0].scalabilityMode){const e=a[0],i=new Lm(e.scalabilityMode);let r=El.OFF;if(n.forEach((e=>{e.enabled&&(r===El.OFF||e.quality>r)&&(r=e.quality)})),r===El.OFF)e.active&&(e.active=!1,c=!0);else if(!e.active||i.spatial!==r+1){c=!0,e.active=!0;const n=new Lm(t[0].scalabilityMode);i.spatial=r+1,i.suffix=n.suffix,1===i.spatial&&(i.suffix=void 0),e.scalabilityMode=i.toString(),e.scaleResolutionDownBy=Math.pow(2,2-r),t[0].maxBitrate&&(e.maxBitrate=t[0].maxBitrate/(e.scaleResolutionDownBy*e.scaleResolutionDownBy))}}else{if(r){const e=n.some((e=>e.enabled));e&&n.forEach((e=>e.enabled=!0))}a.forEach(((e,i)=>{var r;let a=null!==(r=e.rid)&&void 0!==r?r:"";""===a&&(a="q");const l=Dm(a),u=n.find((e=>e.quality===l));u&&e.active!==u.enabled&&(c=!0,e.active=u.enabled,o.debug("setting layer ".concat(u.quality," to ").concat(e.active?"enabled":"disabled"),s),Lp()&&(u.enabled?(e.scaleResolutionDownBy=t[i].scaleResolutionDownBy,e.maxBitrate=t[i].maxBitrate,e.maxFrameRate=t[i].maxFrameRate):(e.scaleResolutionDownBy=4,e.maxBitrate=10,e.maxFrameRate=2)))}))}c&&(i.encodings=a,o.debug("setting encodings",Object.assign(Object.assign({},s),{encodings:i.encodings})),yield e.setParameters(i))}finally{a()}}))}function Dm(e){switch(e){case"f":default:return fp.HIGH;case"h":return fp.MEDIUM;case"q":return fp.LOW}}function jm(e,t,n,i){if(!n)return[new Wl({quality:fp.HIGH,width:e,height:t,bitrate:0,ssrc:0})];if(i){const i=n[0].scalabilityMode,r=new Lm(i),o=[],s="h"==r.suffix?1.5:2,a="h"==r.suffix?2:3;for(let c=0;c<r.spatial;c+=1)o.push(new Wl({quality:Math.min(fp.HIGH,r.spatial-1)-c,width:Math.ceil(e/Math.pow(s,c)),height:Math.ceil(t/Math.pow(s,c)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(a,c)):0,ssrc:0}));return o}return n.map((n=>{var i,r,o;const s=null!==(i=n.scaleResolutionDownBy)&&void 0!==i?i:1;let a=Dm(null!==(r=n.rid)&&void 0!==r?r:"");return new Wl({quality:a,width:Math.ceil(e/s),height:Math.ceil(t/s),bitrate:null!==(o=n.maxBitrate)&&void 0!==o?o:0,ssrc:0})}))}const Um="_lossy",Fm="_reliable",Bm="leave-reconnect";var zm;!function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"}(zm||(zm={}));class Vm extends _d.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var t;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=um.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=zm.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=kd,this.reliableDataSequence=1,this.reliableMessageBuffer=new Uf,this.reliableReceivedState=new Ff(3e4),this.handleDataChannel=e=>xd(this,[e],void 0,(function(e){var t=this;let{channel:n}=e;return function*(){if(n){if(n.label===Fm)t.reliableDCSub=n;else{if(n.label!==Um)return;t.lossyDCSub=n}t.log.debug("on data channel ".concat(n.id,", ").concat(n.label),t.logContext),n.onmessage=t.handleDataMessage}}()})),this.handleDataMessage=e=>xd(this,void 0,void 0,(function*(){var t,n;const i=yield this.dataProcessLock.lock();try{let i;if(e.data instanceof ArrayBuffer)i=e.data;else{if(!(e.data instanceof Blob))return void this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:e.data}));i=yield e.data.arrayBuffer()}const r=Hl.fromBinary(new Uint8Array(i));if(r.sequence>0&&""!==r.participantSid){const e=this.reliableReceivedState.get(r.participantSid);if(e&&r.sequence<=e)return;this.reliableReceivedState.set(r.participantSid,r.sequence)}"speaker"===(null===(t=r.value)||void 0===t?void 0:t.case)?this.emit($h.ActiveSpeakersUpdate,r.value.value.speakers):("user"===(null===(n=r.value)||void 0===n?void 0:n.case)&&function(e,t){const n=e.participantIdentity?e.participantIdentity:t.participantIdentity;e.participantIdentity=n,t.participantIdentity=n;const i=0!==e.destinationIdentities.length?e.destinationIdentities:t.destinationIdentities;e.destinationIdentities=i,t.destinationIdentities=i}(r,r.value.value),this.emit($h.DataPacketReceived,r))}finally{i()}})),this.handleDataError=e=>{const t=0===e.currentTarget.maxRetransmits?"lossy":"reliable";if(e instanceof ErrorEvent&&e.error){const{error:n}=e.error;this.log.error("DataChannel error on ".concat(t,": ").concat(e.message),Object.assign(Object.assign({},this.logContext),{error:n}))}else this.log.error("Unknown DataChannel error on ".concat(t),Object.assign(Object.assign({},this.logContext),{event:e}))},this.handleBufferedAmountLow=e=>{const t=0===e.currentTarget.maxRetransmits?ql.LOSSY:ql.RELIABLE;this.updateAndEmitDCBufferStatus(t)},this.handleDisconnect=(e,t)=>{if(this._isClosed)return;this.log.warn("".concat(e," disconnected"),this.logContext),0===this.reconnectAttempts&&(this.reconnectStart=Date.now());const n=e=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(e,"ms. giving up"),this.logContext),this.emit($h.Disconnected),this.close()},i=Date.now()-this.reconnectStart;let r=this.getNextRetryDelay({elapsedMs:i,retryCount:this.reconnectAttempts});null!==r?(e===Bm&&(r=0),this.log.debug("reconnecting in ".concat(r,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=hp.setTimeout((()=>this.attemptReconnect(t).finally((()=>this.reconnectTimeout=void 0))),r)):n(i)},this.waitForRestarted=()=>new Promise(((e,t)=>{this.pcState===zm.Connected&&e();const n=()=>{this.off($h.Disconnected,i),e()},i=()=>{this.off($h.Restarted,n),t()};this.once($h.Restarted,n),this.once($h.Disconnected,i)})),this.updateAndEmitDCBufferStatus=e=>{const t=this.isBufferStatusLow(e);"undefined"!==typeof t&&t!==this.dcBufferStatus.get(e)&&(this.dcBufferStatus.set(e,t),this.emit($h.DCBufferStatusChanged,t,e))},this.isBufferStatusLow=e=>{const t=this.dataChannelForKind(e);if(t)return e===ql.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(t.bufferedAmount),t.bufferedAmount<=t.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Af.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(_l.RR_SIGNAL_DISCONNECTED))},this.log=wd(null!==(t=e.loggerName)&&void 0!==t?t:yd.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new Mf(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Fa,this.dataProcessLock=new Fa,this.dcBufferStatus=new Map([[ql.LOSSY,!0],[ql.RELIABLE,!0]]),this.client.onParticipantUpdate=e=>this.emit($h.ParticipantUpdate,e),this.client.onConnectionQuality=e=>this.emit($h.ConnectionQualityUpdate,e),this.client.onRoomUpdate=e=>this.emit($h.RoomUpdate,e),this.client.onSubscriptionError=e=>this.emit($h.SubscriptionError,e),this.client.onSubscriptionPermissionUpdate=e=>this.emit($h.SubscriptionPermissionUpdate,e),this.client.onSpeakersChanged=e=>this.emit($h.SpeakersChanged,e),this.client.onStreamStateUpdate=e=>this.emit($h.StreamStateChanged,e),this.client.onRequestResponse=e=>this.emit($h.SignalRequestResponse,e)}get logContext(){var e,t,n,i,r,o;return{room:null===(t=null===(e=this.latestJoinResponse)||void 0===e?void 0:e.room)||void 0===t?void 0:t.name,roomID:null===(i=null===(n=this.latestJoinResponse)||void 0===n?void 0:n.room)||void 0===i?void 0:i.sid,participant:null===(o=null===(r=this.latestJoinResponse)||void 0===r?void 0:r.participant)||void 0===o?void 0:o.identity,pID:this.participantSid}}join(e,t,n,i){return xd(this,void 0,void 0,(function*(){this.url=e,this.token=t,this.signalOpts=n,this.maxJoinAttempts=n.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const r=yield this.client.join(e,t,n,i);return this._isClosed=!1,this.latestJoinResponse=r,this.subscriberPrimary=r.subscriberPrimary,this.pcManager||(yield this.configure(r)),this.subscriberPrimary&&!r.fastPublish||this.negotiate(),this.clientConfiguration=r.clientConfiguration,this.emit($h.SignalConnected,r),r}catch(Be){if(Be instanceof Yh&&Be.reason===Hh.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,t,n,i);throw Be}}))}close(){return xd(this,void 0,void 0,(function*(){const e=yield this.closingLock.lock();if(this.isClosed)e();else try{this._isClosed=!0,this.joinAttempts=0,this.emit($h.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}}))}cleanupPeerConnections(){return xd(this,void 0,void 0,(function*(){var e;yield null===(e=this.pcManager)||void 0===e?void 0:e.close(),this.pcManager=void 0;const t=e=>{e&&(e.close(),e.onbufferedamountlow=null,e.onclose=null,e.onclosing=null,e.onerror=null,e.onmessage=null,e.onopen=null)};t(this.lossyDC),t(this.lossyDCSub),t(this.reliableDC),t(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new Uf,this.reliableDataSequence=1,this.reliableReceivedState.clear()}))}cleanupClient(){return xd(this,void 0,void 0,(function*(){yield this.client.close(),this.client.resetCallbacks()}))}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Zh("a track with the same ID has already been published");return new Promise(((t,n)=>{const i=setTimeout((()=>{delete this.pendingTrackResolvers[e.cid],n(new Yh("publication of local track timed out, no response from server",Hh.Timeout))}),1e4);this.pendingTrackResolvers[e.cid]={resolve:e=>{clearTimeout(i),t(e)},reject:()=>{clearTimeout(i),n(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)}))}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:t}=this.pendingTrackResolvers[e.track.id];t&&t(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(Be){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:Be}))}return!1}updateMuteStatus(e,t){this.client.sendMuteTrack(e,t)}get dataSubscriberReadyState(){var e;return null===(e=this.reliableDCSub)||void 0===e?void 0:e.readyState}getConnectedServerAddress(){return xd(this,void 0,void 0,(function*(){var e;return null===(e=this.pcManager)||void 0===e?void 0:e.getConnectedAddress()}))}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return xd(this,void 0,void 0,(function*(){var t,n;if(this.pcManager&&this.pcManager.currentState!==dm.NEW)return;this.participantSid=null===(t=e.participant)||void 0===t?void 0:t.sid;const i=this.makeRTCConfiguration(e);this.pcManager=new hm(i,e.subscriberPrimary,this.loggerOptions),this.emit($h.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(e,t)=>{this.client.sendIceCandidate(e,t)},this.pcManager.onPublisherOffer=e=>{this.client.sendOffer(e)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(t,n,i)=>xd(this,void 0,void 0,(function*(){if(this.log.debug("primary PC state changed ".concat(t),this.logContext),["closed","disconnected","failed"].includes(n)&&(this.publisherConnectionPromise=void 0),t===dm.CONNECTED){const t=this.pcState===zm.New;this.pcState=zm.Connected,t&&this.emit($h.Connected,e)}else t===dm.FAILED&&this.pcState===zm.Connected&&(this.pcState=zm.Disconnected,this.handleDisconnect("peerconnection failed","failed"===i?_l.RR_SUBSCRIBER_FAILED:_l.RR_PUBLISHER_FAILED));const r=this.client.isDisconnected||this.client.currentState===Af.RECONNECTING,o=[dm.FAILED,dm.CLOSING,dm.CLOSED].includes(t);r&&o&&!this._isClosed&&this.emit($h.Offline)})),this.pcManager.onTrack=e=>{this.emit($h.MediaTrackAdded,e.track,e.streams[0],e.receiver)},function(e){return void 0!==e&&e>13}(null===(n=e.serverInfo)||void 0===n?void 0:n.protocol)||this.createDataChannels()}))}setupSignalClientCallbacks(){this.client.onAnswer=e=>xd(this,void 0,void 0,(function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))})),this.client.onTrickle=(e,t)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:t})),this.pcManager.addIceCandidate(e,t))},this.client.onOffer=e=>xd(this,void 0,void 0,(function*(){if(!this.pcManager)return;const t=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(t)})),this.client.onLocalTrackPublished=e=>{var t;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:null===(t=e.track)||void 0===t?void 0:t.sid})),!this.pendingTrackResolvers[e.cid])return void this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));const{resolve:n}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],n(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit($h.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit($h.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,t)=>{this.emit($h.RemoteMute,e,t)},this.client.onSubscribedQualityUpdate=e=>{this.emit($h.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var t;this.participantSid=null===(t=e.participant)||void 0===t?void 0:t.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit($h.RoomMoved,e)},this.client.onClose=()=>{this.handleDisconnect("signal",_l.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:null===e||void 0===e?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case Uu.DISCONNECT:this.emit($h.Disconnected,null===e||void 0===e?void 0:e.reason),this.close();break;case Uu.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Bm);break;case Uu.RESUME:this.handleDisconnect(Bm)}}}makeRTCConfiguration(e){var t;const n=Object.assign({},this.rtcConfig);if((null===(t=this.signalOpts)||void 0===t?void 0:t.e2eeEnabled)&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),n.encodedInsertableStreams=!0),e.iceServers&&!n.iceServers){const t=[];e.iceServers.forEach((e=>{const n={urls:e.urls};e.username&&(n.username=e.username),e.credential&&(n.credential=e.credential),t.push(n)})),n.iceServers=t}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Ol.ENABLED&&(n.iceTransportPolicy="relay"),n.sdpSemantics="unified-plan",n.continualGatheringPolicy="gather_continually",n}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(Um,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(Fm,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,t,n){return xd(this,void 0,void 0,(function*(){if(Rp()){return yield this.createTransceiverRTCRtpSender(e,t,n)}if(_p()){this.log.warn("using add-track fallback",this.logContext);return yield this.createRTCRtpSender(e.mediaStreamTrack)}throw new tp("Required webRTC APIs not supported on this device")}))}createSimulcastSender(e,t,n,i){return xd(this,void 0,void 0,(function*(){if(Rp())return this.createSimulcastTransceiverSender(e,t,n,i);if(_p())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new tp("Cannot stream on this device")}))}createTransceiverRTCRtpSender(e,t,n){return xd(this,void 0,void 0,(function*(){if(!this.pcManager)throw new tp("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream),lf(e)&&(e.codec=t.videoCodec);const r={direction:"sendonly",streams:i};n&&(r.sendEncodings=n);return(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,r)).sender}))}createSimulcastTransceiverSender(e,t,n,i){return xd(this,void 0,void 0,(function*(){if(!this.pcManager)throw new tp("publisher is closed");const r={direction:"sendonly"};i&&(r.sendEncodings=i);const o=yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,r);if(n.videoCodec)return e.setSimulcastTrackSender(n.videoCodec,o.sender),o.sender}))}createRTCRtpSender(e){return xd(this,void 0,void 0,(function*(){if(!this.pcManager)throw new tp("publisher is closed");return this.pcManager.addPublisherTrack(e)}))}attemptReconnect(e){return xd(this,void 0,void 0,(function*(){var t,n,i;if(!this._isClosed)if(this.attemptingReconnect)kd.warn("already attempting reconnect, returning early",this.logContext);else{(null===(t=this.clientConfiguration)||void 0===t?void 0:t.resumeConnection)!==Ol.DISABLED&&(null!==(i=null===(n=this.pcManager)||void 0===n?void 0:n.currentState)&&void 0!==i?i:dm.NEW)!==dm.NEW||(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(Be){this.reconnectAttempts+=1;let t=!0;Be instanceof tp?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:Be})),t=!1):Be instanceof Wm||(this.fullReconnectOnNext=!0),t?this.handleDisconnect("reconnect",_l.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit($h.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}}))}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(Be){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:Be}))}return null}restartConnection(e){return xd(this,void 0,void 0,(function*(){var t,n,i;try{if(!this.url||!this.token)throw new tp("could not reconnect, url or token not saved");let n;this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit($h.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Wm;n=yield this.join(null!==e&&void 0!==e?e:this.url,this.token,this.signalOpts)}catch(Be){if(Be instanceof Yh&&Be.reason===Hh.NotAllowed)throw new tp("could not reconnect, token might be expired");throw new Wm}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit($h.SignalRestarted,n),yield this.waitForPCReconnected(),this.client.currentState!==Af.CONNECTED)throw new Wm("Signal connection got severed during reconnect");null===(t=this.regionUrlProvider)||void 0===t||t.resetAttempts(),this.emit($h.Restarted)}catch(r){const e=yield null===(n=this.regionUrlProvider)||void 0===n?void 0:n.getNextBestRegionUrl();if(e)return void(yield this.restartConnection(e));throw null===(i=this.regionUrlProvider)||void 0===i||i.resetAttempts(),r}}))}resumeConnection(e){return xd(this,void 0,void 0,(function*(){var t;if(!this.url||!this.token)throw new tp("could not reconnect, url or token not saved");if(!this.pcManager)throw new tp("publisher and subscriber connections unset");let n;this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit($h.Resuming);try{this.setupSignalClientCallbacks(),n=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(i){let e="";if(i instanceof Error&&(e=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof Yh&&i.reason===Hh.NotAllowed)throw new tp("could not reconnect, token might be expired");if(i instanceof Yh&&i.reason===Hh.LeaveRequest)throw i;throw new Wm(e)}if(this.emit($h.SignalResumed),n){const e=this.makeRTCConfiguration(n);this.pcManager.updateConfiguration(e),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=n.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Af.CONNECTED)throw new Wm("Signal connection got severed during reconnect");this.client.setReconnected(),"open"===(null===(t=this.reliableDC)||void 0===t?void 0:t.readyState)&&null===this.reliableDC.id&&this.createDataChannels(),(null===n||void 0===n?void 0:n.lastMessageSeq)&&this.resendReliableMessagesForResume(n.lastMessageSeq),this.emit($h.Resumed)}))}waitForPCInitialConnection(e,t){return xd(this,void 0,void 0,(function*(){if(!this.pcManager)throw new tp("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(t,e)}))}waitForPCReconnected(){return xd(this,void 0,void 0,(function*(){this.pcState=zm.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Op(2e3),!this.pcManager)throw new tp("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=zm.Connected}catch(Be){throw this.pcState=zm.Disconnected,new Yh("could not establish PC connection, ".concat(Be.message),Hh.InternalError)}}))}publishRpcResponse(e,t,n,i){return xd(this,void 0,void 0,(function*(){const r=new Hl({destinationIdentities:[e],kind:ql.RELIABLE,value:{case:"rpcResponse",value:new tu({requestId:t,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:null!==n&&void 0!==n?n:""}})}});yield this.sendDataPacket(r,ql.RELIABLE)}))}publishRpcAck(e,t){return xd(this,void 0,void 0,(function*(){const n=new Hl({destinationIdentities:[e],kind:ql.RELIABLE,value:{case:"rpcAck",value:new eu({requestId:t})}});yield this.sendDataPacket(n,ql.RELIABLE)}))}sendDataPacket(e,t){return xd(this,void 0,void 0,(function*(){yield this.ensurePublisherConnected(t),t===ql.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const n=e.toBinary(),i=this.dataChannelForKind(t);if(i){if(t===ql.RELIABLE&&this.reliableMessageBuffer.push({data:n,sequence:e.sequence}),this.attemptingReconnect)return;i.send(n)}this.updateAndEmitDCBufferStatus(t)}))}resendReliableMessagesForResume(e){return xd(this,void 0,void 0,(function*(){yield this.ensurePublisherConnected(ql.RELIABLE);const t=this.dataChannelForKind(ql.RELIABLE);t&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach((e=>{t.send(e.data)}))),this.updateAndEmitDCBufferStatus(ql.RELIABLE)}))}waitForBufferStatusLow(e){return new Promise(((t,n)=>xd(this,void 0,void 0,(function*(){if(this.isBufferStatusLow(e))t();else{const i=()=>n("Engine closed");for(this.once($h.Closing,i);!this.dcBufferStatus.get(e);)yield Op(10);this.off($h.Closing,i),t()}}))))}ensureDataTransportConnected(e){return xd(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.subscriberPrimary;return function*(){var i;if(!t.pcManager)throw new tp("PC manager is closed");const r=n?t.pcManager.subscriber:t.pcManager.publisher,o=n?"Subscriber":"Publisher";if(!r)throw new Yh("".concat(o," connection not set"),Hh.InternalError);let s=!1;n||t.dataChannelForKind(e,n)||(t.createDataChannels(),s=!0),s||n||t.pcManager.publisher.isICEConnected||"checking"===t.pcManager.publisher.getICEConnectionState()||(s=!0),s&&t.negotiate();const a=t.dataChannelForKind(e,n);if("open"===(null===a||void 0===a?void 0:a.readyState))return;const c=(new Date).getTime()+t.peerConnectionTimeout;for(;(new Date).getTime()<c;){if(r.isICEConnected&&"open"===(null===(i=t.dataChannelForKind(e,n))||void 0===i?void 0:i.readyState))return;yield Op(50)}throw new Yh("could not establish ".concat(o," connection, state: ").concat(r.getICEConnectionState()),Hh.InternalError)}()}))}ensurePublisherConnected(e){return xd(this,void 0,void 0,(function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise}))}verifyTransport(){return!!this.pcManager&&(this.pcManager.currentState===dm.CONNECTED&&!(!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED))}negotiate(){return xd(this,void 0,void 0,(function*(){return new Promise(((e,t)=>xd(this,void 0,void 0,(function*(){if(!this.pcManager)return void t(new np("PC manager is closed"));this.pcManager.requirePublisher(),0!=this.pcManager.publisher.getTransceivers().length||this.lossyDC||this.reliableDC||this.createDataChannels();const n=new AbortController,i=()=>{n.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&t("cannot negotiate on closed engine"),this.on($h.Closing,i),this.pcManager.publisher.once(tm,(e=>{const t=new Map;e.forEach((e=>{const n=e.codec.toLowerCase();var i;i=n,kp.includes(i)&&t.set(e.payload,n)})),this.emit($h.RTPVideoMapUpdate,t)}));try{yield this.pcManager.negotiate(n),e()}catch(Be){Be instanceof np&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",_l.RR_UNKNOWN),t(Be)}finally{this.off($h.Closing,i)}}))))}))}dataChannelForKind(e,t){if(t){if(e===ql.LOSSY)return this.lossyDCSub;if(e===ql.RELIABLE)return this.reliableDCSub}else{if(e===ql.LOSSY)return this.lossyDC;if(e===ql.RELIABLE)return this.reliableDC}}sendSyncState(e,t){var n,i;if(!this.pcManager)return void this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);const r=this.pcManager.subscriber.getLocalDescription(),o=this.pcManager.subscriber.getRemoteDescription(),s=null===(i=null===(n=this.signalOpts)||void 0===n?void 0:n.autoSubscribe)||void 0===i||i,a=new Array,c=new Array;e.forEach((e=>{e.isDesired!==s&&a.push(e.trackSid),e.isEnabled||c.push(e.trackSid)})),this.client.sendSyncState(new td({answer:r?jf({sdp:r.sdp,type:r.type}):void 0,offer:o?jf({sdp:o.sdp,type:o.type}):void 0,subscription:new Lu({trackSids:a,subscribe:!s,participantTracks:[]}),publishTracks:Tf(t),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:c,datachannelReceiveStates:this.reliableReceivedState.map(((e,t)=>new nd({publisherSid:t,lastSeq:e})))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],t=(t,n)=>{void 0!==(null===t||void 0===t?void 0:t.id)&&null!==t.id&&e.push(new id({label:t.label,id:t.id,target:n}))};return t(this.dataChannelForKind(ql.LOSSY),yu.PUBLISHER),t(this.dataChannelForKind(ql.RELIABLE),yu.PUBLISHER),t(this.dataChannelForKind(ql.LOSSY,!0),yu.SUBSCRIBER),t(this.dataChannelForKind(ql.RELIABLE,!0),yu.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&hp.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Up()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Up()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class Wm extends Error{}class Hm{constructor(e,t){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=t}updateToken(e){this.token=e}isCloud(){return Bp(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return xd(this,void 0,void 0,(function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const t=this.regionSettings.regions.filter((e=>!this.attemptedRegions.find((t=>t.url===e.url))));if(t.length>0){const e=t[0];return this.attemptedRegions.push(e),kd.debug("next region: ".concat(e.region)),e.url}return null}))}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return xd(this,void 0,void 0,(function*(){const t=yield fetch("".concat((n=this.serverUrl,"".concat(n.protocol.replace("ws","http"),"//").concat(n.host,"/settings")),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});var n;if(t.ok){const e=yield t.json();return this.lastUpdateAt=Date.now(),e}throw new Yh("Could not fetch region settings: ".concat(t.statusText),401===t.status?Hh.NotAllowed:Hh.InternalError,t.status)}))}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}class qm{get info(){return this._info}constructor(e,t,n){this.reader=t,this.totalByteSize=n,this._info=e,this.bytesReceived=0}}class Gm extends qm{handleChunkReceived(e){var t;this.bytesReceived+=e.content.byteLength;const n=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;null===(t=this.onProgress)||void 0===t||t.call(this,n)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>xd(this,void 0,void 0,(function*(){try{const{done:t,value:n}=yield e.read();return t?{done:!0,value:void 0}:(this.handleChunkReceived(n),{done:!1,value:n.content})}catch(t){return{done:!0,value:void 0}}})),return(){return xd(this,void 0,void 0,(function*(){return e.releaseLock(),{done:!0,value:void 0}}))}}}readAll(){return xd(this,void 0,void 0,(function*(){var e,t,n,i;let r=new Set;try{for(var o,s=!0,a=Pd(this);!(e=(o=yield a.next()).done);s=!0){i=o.value,s=!1;const e=i;r.add(e)}}catch(c){t={error:c}}finally{try{s||e||!(n=a.return)||(yield n.call(a))}finally{if(t)throw t.error}}return Array.from(r)}))}}class Km extends qm{constructor(e,t,n){super(e,t,n),this.receivedChunks=new Map}handleChunkReceived(e){var t;const n=of(e.chunkIndex),i=this.receivedChunks.get(n);if(i&&i.version>e.version)return;this.receivedChunks.set(n,e),this.bytesReceived+=e.content.byteLength;const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;null===(t=this.onProgress)||void 0===t||t.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader(),t=new TextDecoder;return{next:()=>xd(this,void 0,void 0,(function*(){try{const{done:n,value:i}=yield e.read();return n?{done:!0,value:void 0}:(this.handleChunkReceived(i),{done:!1,value:t.decode(i.content)})}catch(n){return{done:!0,value:void 0}}})),return(){return xd(this,void 0,void 0,(function*(){return e.releaseLock(),{done:!0,value:void 0}}))}}}readAll(){return xd(this,void 0,void 0,(function*(){var e,t,n,i;let r="";try{for(var o,s=!0,a=Pd(this);!(e=(o=yield a.next()).done);s=!0){i=o.value,s=!1;r+=i}}catch(c){t={error:c}}finally{try{s||e||!(n=a.return)||(yield n.call(a))}finally{if(t)throw t.error}}return r}))}}class Jm{constructor(e,t,n){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=n,this.info=t}write(e){return this.defaultWriter.write(e)}close(){return xd(this,void 0,void 0,(function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),null===(e=this.onClose)||void 0===e||e.call(this)}))}}class $m extends Jm{}class Qm extends Jm{}class Ym extends mp{constructor(e,t,n,i,r){super(e,n,r),this.sid=t,this.receiver=i}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Qh.Muted:Qh.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const t=n=>{n.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",t),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(Qh.Ended,this))};e.addEventListener("removetrack",t)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return xd(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.receiver)||void 0===e?void 0:e.getStats))return;return yield this.receiver.getStats()}))}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval((()=>this.monitorReceiver()),gm)),"undefined"!==typeof RTCRtpReceiver&&"getSynchronizationSources"in RTCRtpReceiver&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var t;this.timeSyncHandle=requestAnimationFrame((()=>e()));const n=null===(t=this.receiver)||void 0===t?void 0:t.getSynchronizationSources()[0];if(n){const{timestamp:e,rtpTimestamp:t}=n;t&&this.rtpTimestamp!==t&&(this.emit(Qh.TimeSyncUpdate,{timestamp:e,rtpTimestamp:t}),this.rtpTimestamp=t)}};e()}}class Xm extends Ym{constructor(e,t,n,i,r,o){super(e,t,mp.Kind.Audio,n,o),this.monitorReceiver=()=>xd(this,void 0,void 0,(function*(){if(!this.receiver)return void(this._currentBitrate=0);const e=yield this.getReceiverStats();e&&this.prevStats&&this.receiver&&(this._currentBitrate=vm(e,this.prevStats)),this.prevStats=e})),this.audioContext=i,this.webAudioPluginNodes=[],r&&(this.sinkId=r.deviceId)}setVolume(e){var t;for(const n of this.attachedElements)this.audioContext?null===(t=this.gainNode)||void 0===t||t.gain.setTargetAtTime(e,0,.1):n.volume=e;Fp()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Fp())return 1;let e=0;return this.attachedElements.forEach((t=>{t.volume>e&&(e=t.volume)})),e}setSinkId(e){return xd(this,void 0,void 0,(function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map((t=>{if(Ip(t))return t.setSinkId(e)})))}))}attach(e){const t=0===this.attachedElements.length;return e?super.attach(e):e=super.attach(),this.sinkId&&Ip(e)&&e.setSinkId(this.sinkId).catch((e=>{this.log.error("Failed to set sink id on remote audio track",e,this.logContext)})),this.audioContext&&t&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let t;return e?(t=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(t=super.detach(),this.disconnectWebAudio()),t}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,t){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(t.srcObject);let n=this.sourceNode;this.webAudioPluginNodes.forEach((e=>{n.connect(e),n=e})),this.gainNode=e.createGain(),n.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),"running"!==e.state&&e.resume().then((()=>{"running"!==e.state&&this.emit(Qh.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))})).catch((e=>{this.emit(Qh.AudioPlaybackFailed,e)}))}disconnectWebAudio(){var e,t;null===(e=this.gainNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return xd(this,void 0,void 0,(function*(){if(!this.receiver||!this.receiver.getStats)return;let e;return(yield this.receiver.getStats()).forEach((t=>{"inbound-rtp"===t.type&&(e={type:"audio",streamId:t.id,timestamp:t.timestamp,jitter:t.jitter,bytesReceived:t.bytesReceived,concealedSamples:t.concealedSamples,concealmentEvents:t.concealmentEvents,silentConcealedSamples:t.silentConcealedSamples,silentConcealmentEvents:t.silentConcealmentEvents,totalAudioEnergy:t.totalAudioEnergy,totalSamplesDuration:t.totalSamplesDuration})})),e}))}}class Zm extends Ym{constructor(e,t,n,i,r){super(e,t,mp.Kind.Video,n,r),this.elementInfos=[],this.monitorReceiver=()=>xd(this,void 0,void 0,(function*(){if(!this.receiver)return void(this._currentBitrate=0);const e=yield this.getReceiverStats();e&&this.prevStats&&this.receiver&&(this._currentBitrate=vm(e,this.prevStats)),this.prevStats=e})),this.debouncedHandleResize=Xf((()=>{this.updateDimensions()}),100),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return void 0!==this.adaptiveStreamSettings}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach((t=>{e?vp(this._mediaStreamTrack,t):gp(this._mediaStreamTrack,t)}))}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&void 0===this.elementInfos.find((t=>t.element===e))){const t=new eg(e);this.observeElementInfo(t)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&void 0===this.elementInfos.find((t=>t===e))?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream)return void this.log.warn("stopObservingElementInfo ignored",this.logContext);const t=this.elementInfos.filter((t=>t===e));for(const n of t)n.stopObserving();this.elementInfos=this.elementInfos.filter((t=>t!==e)),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let t=[];if(e)return this.stopObservingElement(e),super.detach(e);t=super.detach();for(const n of t)this.stopObservingElement(n);return t}getDecoderImplementation(){var e;return null===(e=this.prevStats)||void 0===e?void 0:e.decoderImplementation}getReceiverStats(){return xd(this,void 0,void 0,(function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let t,n="",i=new Map;return e.forEach((e=>{"inbound-rtp"===e.type?(n=e.codecId,t={type:"video",streamId:e.id,framesDecoded:e.framesDecoded,framesDropped:e.framesDropped,framesReceived:e.framesReceived,packetsReceived:e.packetsReceived,packetsLost:e.packetsLost,frameWidth:e.frameWidth,frameHeight:e.frameHeight,pliCount:e.pliCount,firCount:e.firCount,nackCount:e.nackCount,jitter:e.jitter,timestamp:e.timestamp,bytesReceived:e.bytesReceived,decoderImplementation:e.decoderImplementation}):"codec"===e.type&&i.set(e.id,e)})),t&&""!==n&&i.get(n)&&(t.mimeType=i.get(n).mimeType),t}))}stopObservingElement(e){const t=this.elementInfos.filter((t=>t.element===e));for(const n of t)this.stopObservingElementInfo(n)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return xd(this,void 0,void 0,(function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()}))}updateVisibility(){var e,t;const n=this.elementInfos.reduce(((e,t)=>Math.max(e,t.visibilityChangedAt||0)),0),i=!(null!==(t=null===(e=this.adaptiveStreamSettings)||void 0===e?void 0:e.pauseVideoInBackground)&&void 0!==t&&!t)&&this.isInBackground,r=this.elementInfos.some((e=>e.pictureInPicture)),o=this.elementInfos.some((e=>e.visible))&&!i||r;this.lastVisible!==o&&(!o&&Date.now()-n<100?hp.setTimeout((()=>{this.updateVisibility()}),100):(this.lastVisible=o,this.emit(Qh.VisibilityChanged,o,this)))}updateDimensions(){var e,t;let n=0,i=0;const r=this.getPixelDensity();for(const o of this.elementInfos){const e=o.width()*r,t=o.height()*r;e+t>n+i&&(n=e,i=t)}(null===(e=this.lastDimensions)||void 0===e?void 0:e.width)===n&&(null===(t=this.lastDimensions)||void 0===t?void 0:t.height)===i||(this.lastDimensions={width:n,height:i},this.emit(Qh.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const t=null===(e=this.adaptiveStreamSettings)||void 0===e?void 0:e.pixelDensity;if("screen"===t)return Wp();if(!t){return Wp()>2?2:1}return t}}class eg{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,t){this.onVisibilityChanged=e=>{var t;const{target:n,isIntersecting:i}=e;n===this.element&&(this.isIntersecting=i,this.isPiP=tg(this.element),this.visibilityChangedAt=Date.now(),null===(t=this.handleVisibilityChanged)||void 0===t||t.call(this))},this.onEnterPiP=()=>{var e,t,n;null===(t=null===(e=window.documentPictureInPicture)||void 0===e?void 0:e.window)||void 0===t||t.addEventListener("pagehide",this.onLeavePiP),this.isPiP=tg(this.element),null===(n=this.handleVisibilityChanged)||void 0===n||n.call(this)},this.onLeavePiP=()=>{var e;this.isPiP=tg(this.element),null===(e=this.handleVisibilityChanged)||void 0===e||e.call(this)},this.element=e,this.isIntersecting=null!==t&&void 0!==t?t:ng(e),this.isPiP=Up()&&tg(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,t,n;this.isIntersecting=ng(this.element),this.isPiP=tg(this.element),this.element.handleResize=()=>{var e;null===(e=this.handleResize)||void 0===e||e.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,Qp().observe(this.element),Jp().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),null===(e=window.documentPictureInPicture)||void 0===e||e.addEventListener("enter",this.onEnterPiP),null===(n=null===(t=window.documentPictureInPicture)||void 0===t?void 0:t.window)||void 0===n||n.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,t,n,i,r;null===(e=Qp())||void 0===e||e.unobserve(this.element),null===(t=Jp())||void 0===t||t.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),null===(n=window.documentPictureInPicture)||void 0===n||n.removeEventListener("enter",this.onEnterPiP),null===(r=null===(i=window.documentPictureInPicture)||void 0===i?void 0:i.window)||void 0===r||r.removeEventListener("pagehide",this.onLeavePiP)}}function tg(e){var t,n;return document.pictureInPictureElement===e||!!(null===(t=window.documentPictureInPicture)||void 0===t?void 0:t.window)&&ng(e,null===(n=window.documentPictureInPicture)||void 0===n?void 0:n.window)}function ng(e,t){const n=t||window;let i=e.offsetTop,r=e.offsetLeft;const o=e.offsetWidth,s=e.offsetHeight,{hidden:a}=e,{display:c}=getComputedStyle(e);for(;e.offsetParent;)i+=(e=e.offsetParent).offsetTop,r+=e.offsetLeft;return i<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&i+s>n.pageYOffset&&r+o>n.pageXOffset&&!a&&"none"!==c}class ig extends _d.EventEmitter{constructor(e,t,n,i){var r;super(),this.metadataMuted=!1,this.encryption=Bl.NONE,this.log=kd,this.handleMuted=()=>{this.emit(Qh.Muted)},this.handleUnmuted=()=>{this.emit(Qh.Unmuted)},this.log=wd(null!==(r=null===i||void 0===i?void 0:i.loggerName)&&void 0!==r?r:yd.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=t,this.trackName=n,this.source=mp.Source.Unknown}setTrack(e){this.track&&(this.track.off(Qh.Muted,this.handleMuted),this.track.off(Qh.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(Qh.Muted,this.handleMuted),e.on(Qh.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},null===(e=this.loggerContextCb)||void 0===e?void 0:e.call(this)),xf(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return void 0!==this.track}get isEncrypted(){return this.encryption!==Bl.NONE}get audioTrack(){if(cf(this.track))return this.track}get videoTrack(){if(lf(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=mp.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===mp.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}!function(e){var t,n;(t=e.SubscriptionStatus||(e.SubscriptionStatus={})).Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",(n=e.PermissionStatus||(e.PermissionStatus={})).Allowed="allowed",n.NotAllowed="not_allowed"}(ig||(ig={}));class rg extends ig{get isUpstreamPaused(){var e;return null===(e=this.track)||void 0===e?void 0:e.isUpstreamPaused}constructor(e,t,n,i){super(e,t.sid,t.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(Qh.Ended)},this.updateInfo(t),this.setTrack(n)}setTrack(e){this.track&&this.track.off(Qh.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(Qh.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return xd(this,void 0,void 0,(function*(){var e;return null===(e=this.track)||void 0===e?void 0:e.mute()}))}unmute(){return xd(this,void 0,void 0,(function*(){var e;return null===(e=this.track)||void 0===e?void 0:e.unmute()}))}pauseUpstream(){return xd(this,void 0,void 0,(function*(){var e;yield null===(e=this.track)||void 0===e?void 0:e.pauseUpstream()}))}resumeUpstream(){return xd(this,void 0,void 0,(function*(){var e;yield null===(e=this.track)||void 0===e?void 0:e.resumeUpstream()}))}getTrackFeatures(){var e;if(cf(this.track)){const t=this.track.getSourceTrackSettings(),n=new Set;return t.autoGainControl&&n.add(Il.TF_AUTO_GAIN_CONTROL),t.echoCancellation&&n.add(Il.TF_ECHO_CANCELLATION),t.noiseSuppression&&n.add(Il.TF_NOISE_SUPPRESSION),t.channelCount&&t.channelCount>1&&n.add(Il.TF_STEREO),(null===(e=this.options)||void 0===e?void 0:e.dtx)||n.add(Il.TF_NO_DTX),this.track.enhancedNoiseCancellation&&n.add(Il.TF_ENHANCED_NOISE_CANCELLATION),Array.from(n.values())}return[]}}function og(e,t){return xd(this,void 0,void 0,(function*(){null!==e&&void 0!==e||(e={});let n=!1;const{audioProcessor:i,videoProcessor:r,optionsWithoutProcessor:o}=Ef(e);let s=o.audio,a=o.video;if(i&&"object"===typeof o.audio&&(o.audio.processor=i),r&&"object"===typeof o.video&&(o.video.processor=r),e.audio&&"object"===typeof o.audio&&"string"===typeof o.audio.deviceId){const e=o.audio.deviceId;o.audio.deviceId={exact:e},n=!0,s=Object.assign(Object.assign({},o.audio),{deviceId:{ideal:e}})}if(o.video&&"object"===typeof o.video&&"string"===typeof o.video.deviceId){const e=o.video.deviceId;o.video.deviceId={exact:e},n=!0,a=Object.assign(Object.assign({},o.video),{deviceId:{ideal:e}})}(!0===o.audio||"object"===typeof o.audio&&!o.audio.deviceId)&&(o.audio={deviceId:"default"}),!0===o.video?o.video={deviceId:"default"}:"object"!==typeof o.video||o.video.deviceId||(o.video.deviceId="default");const c=mf(o,am,cm),l=vf(c),u=navigator.mediaDevices.getUserMedia(l);o.audio&&(Rf.userMediaPromiseMap.set("audioinput",u),u.catch((()=>Rf.userMediaPromiseMap.delete("audioinput")))),o.video&&(Rf.userMediaPromiseMap.set("videoinput",u),u.catch((()=>Rf.userMediaPromiseMap.delete("videoinput"))));try{const e=yield u;return yield Promise.all(e.getTracks().map((n=>xd(this,void 0,void 0,(function*(){const o="audio"===n.kind;let s,a=o?c.audio:c.video;"boolean"!==typeof a&&a||(a={});const u=o?l.audio:l.video;"boolean"!==typeof u&&(s=u);const d=n.getSettings().deviceId;(null===s||void 0===s?void 0:s.deviceId)&&tf(s.deviceId)!==d?s.deviceId=d:s||(s={deviceId:d});const h=function(e,t,n){switch(e.kind){case"audio":return new Sm(e,t,!1,void 0,n);case"video":return new Am(e,t,!1,n);default:throw new Zh("unsupported track type: ".concat(e.kind))}}(n,s,t);return h.kind===mp.Kind.Video?h.source=mp.Source.Camera:h.kind===mp.Kind.Audio&&(h.source=mp.Source.Microphone),h.mediaStream=e,cf(h)&&i?yield h.setProcessor(i):lf(h)&&r&&(yield h.setProcessor(r)),h})))))}catch(Be){if(!n)throw Be;return og(Object.assign(Object.assign({},e),{audio:s,video:a}),t)}}))}var sg;!function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Lost="lost",e.Unknown="unknown"}(sg||(sg={}));class ag extends _d.EventEmitter{get logContext(){var e,t;return Object.assign({},null===(t=null===(e=this.loggerOptions)||void 0===e?void 0:e.loggerContextCb)||void 0===t?void 0:t.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every((e=>e.isEncrypted))}get isAgent(){var e;return(null===(e=this.permissions)||void 0===e?void 0:e.agent)||this.kind===Ul.AGENT}get isActive(){var e;return(null===(e=this.participantInfo)||void 0===e?void 0:e.state)===jl.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,t,n,i,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ul.STANDARD;var a;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=sg.Unknown,this.log=kd,this.log=wd(null!==(a=null===o||void 0===o?void 0:o.loggerName)&&void 0!==a?a:yd.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=t,this.name=n,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=s,this._attributes=null!==r&&void 0!==r?r:{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,t]of this.trackPublications)if(t.source===e)return t}getTrackPublicationByName(e){for(const[,t]of this.trackPublications)if(t.trackName===e)return t}waitUntilActive(){return this.isActive?Promise.resolve():(this.activeFuture||(this.activeFuture=new ef,this.once(Jh.Active,(()=>{var e,t;null===(t=null===(e=this.activeFuture)||void 0===e?void 0:e.resolve)||void 0===t||t.call(e),this.activeFuture=void 0}))),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const t=this.getTrackPublication(mp.Source.Camera);return!(null===(e=null===t||void 0===t?void 0:t.isMuted)||void 0===e||e)}get isMicrophoneEnabled(){var e;const t=this.getTrackPublication(mp.Source.Microphone);return!(null===(e=null===t||void 0===t?void 0:t.isMuted)||void 0===e||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(mp.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(1e3*Number.parseInt(this.participantInfo.joinedAt.toString())):new Date}updateInfo(e){var t;return!(this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version)&&(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===jl.ACTIVE&&(null===(t=this.participantInfo)||void 0===t?void 0:t.state)!==jl.ACTIVE&&this.emit(Jh.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const t=this.metadata!==e,n=this.metadata;this.metadata=e,t&&this.emit(Jh.ParticipantMetadataChanged,n)}_setName(e){const t=this.name!==e;this.name=e,t&&this.emit(Jh.ParticipantNameChanged,e)}_setAttributes(e){const t=function(e,t){var n;void 0===e&&(e={}),void 0===t&&(t={});const i=[...Object.keys(t),...Object.keys(e)],r={};for(const o of i)e[o]!==t[o]&&(r[o]=null!==(n=t[o])&&void 0!==n?n:"");return r}(this.attributes,e);this._attributes=e,Object.keys(t).length>0&&this.emit(Jh.AttributesChanged,t)}setPermissions(e){var t,n,i,r,o,s;const a=this.permissions,c=e.canPublish!==(null===(t=this.permissions)||void 0===t?void 0:t.canPublish)||e.canSubscribe!==(null===(n=this.permissions)||void 0===n?void 0:n.canSubscribe)||e.canPublishData!==(null===(i=this.permissions)||void 0===i?void 0:i.canPublishData)||e.hidden!==(null===(r=this.permissions)||void 0===r?void 0:r.hidden)||e.recorder!==(null===(o=this.permissions)||void 0===o?void 0:o.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some(((e,t)=>{var n;return e!==(null===(n=this.permissions)||void 0===n?void 0:n.canPublishSources[t])}))||e.canSubscribeMetrics!==(null===(s=this.permissions)||void 0===s?void 0:s.canSubscribeMetrics);return this.permissions=e,c&&this.emit(Jh.ParticipantPermissionsChanged,a),c}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(Jh.IsSpeakingChanged,e))}setConnectionQuality(e){const t=this._connectionQuality;this._connectionQuality=function(e){switch(e){case Pl.EXCELLENT:return sg.Excellent;case Pl.GOOD:return sg.Good;case Pl.POOR:return sg.Poor;case Pl.LOST:return sg.Lost;default:return sg.Unknown}}(e),t!==this._connectionQuality&&this.emit(Jh.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,t;this.activeFuture&&(null===(t=(e=this.activeFuture).reject)||void 0===t||t.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach((t=>cf(t.track)&&t.track.setAudioContext(e)))}addTrackPublication(e){e.on(Qh.Muted,(()=>{this.emit(Jh.TrackMuted,e)})),e.on(Qh.Unmuted,(()=>{this.emit(Jh.TrackUnmuted,e)}));const t=e;switch(t.track&&(t.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case mp.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case mp.Kind.Video:this.videoTrackPublications.set(e.trackSid,e)}}}class cg extends ag{constructor(e,t,n,i,r){super(e,t,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Bl.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new ef)},this.handleReconnected=()=>{var e,t;null===(t=null===(e=this.reconnectFuture)||void 0===e?void 0:e.resolve)||void 0===t||t.call(e),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var e,t,n,i,r,o;this.reconnectFuture&&(this.reconnectFuture.promise.catch((e=>this.log.warn(e.message,this.logContext))),null===(t=null===(e=this.reconnectFuture)||void 0===e?void 0:e.reject)||void 0===t||t.call(e,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&(null===(i=(n=this.signalConnectedFuture).reject)||void 0===i||i.call(n,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),null===(o=null===(r=this.activeAgentFuture)||void 0===r?void 0:r.reject)||void 0===o||o.call(r,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=e=>{var t,n;e.participant&&this.updateInfo(e.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new ef),null===(n=(t=this.signalConnectedFuture).resolve)||void 0===n||n.call(t)},this.handleSignalRequestResponse=e=>{const{requestId:t,reason:n,message:i}=e,r=this.pendingSignalRequests.get(t);r&&(n!==dd.OK&&r.reject(new rp(i,n)),this.pendingSignalRequests.delete(t))},this.handleDataPacket=e=>{switch(e.value.case){case"rpcResponse":let t=e.value.value,n=null,i=null;"payload"===t.value.case?n=t.value.value:"error"===t.value.case&&(i=pm.fromProto(t.value.value)),this.handleIncomingRpcResponse(t.requestId,n,i);break;case"rpcAck":let r=e.value.value;this.handleIncomingRpcAck(r.requestId)}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map((e=>function(e){var t,n,i;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new Yu({participantIdentity:null!==(t=e.participantIdentity)&&void 0!==t?t:"",participantSid:null!==(n=e.participantSid)&&void 0!==n?n:"",allTracks:null!==(i=e.allowAll)&&void 0!==i&&i,trackSids:e.allowedTrackSids||[]})}(e))))},this.onTrackUnmuted=e=>{this.onTrackMuted(e,e.isUpstreamPaused)},this.onTrackMuted=(e,t)=>{void 0===t&&(t=!0),e.sid?this.engine.updateMuteStatus(e.sid,t):this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),xf(e)))},this.onTrackUpstreamPaused=e=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),xf(e))),this.onTrackMuted(e,!0)},this.onTrackUpstreamResumed=e=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),xf(e))),this.onTrackMuted(e,e.isMuted)},this.onTrackFeatureUpdate=e=>{const t=this.audioTrackPublications.get(e.sid);t?this.engine.client.sendUpdateLocalAudioTrack(t.trackSid,t.getTrackFeatures()):this.log.warn("Could not update local audio track settings, missing publication for track ".concat(e.sid),this.logContext)},this.handleSubscribedQualityUpdate=e=>xd(this,void 0,void 0,(function*(){var t,n,i,r,o;if(!(null===(o=this.roomOptions)||void 0===o?void 0:o.dynacast))return;const s=this.videoTrackPublications.get(e.trackSid);if(!s)return void this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:e.trackSid}));if(!s.videoTrack)return;const a=yield s.videoTrack.setPublishingCodecs(e.subscribedCodecs);try{for(var c,l=!0,u=Pd(a);!(t=(c=yield u.next()).done);l=!0){r=c.value,l=!1;const e=r;wp(e)&&(this.log.debug("publish ".concat(e," for ").concat(s.videoTrack.sid),Object.assign(Object.assign({},this.logContext),xf(s))),yield this.publishAdditionalCodecForTrack(s.videoTrack,e,s.options))}}catch(d){n={error:d}}finally{try{l||t||!(i=u.return)||(yield i.call(u))}finally{if(n)throw n.error}}})),this.handleLocalTrackUnpublished=e=>{const t=this.trackPublications.get(e.trackSid);t?this.unpublishTrack(t.track):this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:e.trackSid}))},this.handleTrackEnded=e=>xd(this,void 0,void 0,(function*(){if(e.source===mp.Source.ScreenShare||e.source===mp.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),xf(e))),this.unpublishTrack(e);else if(e.isUserProvided)yield e.mute();else if(df(e)||uf(e))try{if(Up())try{const t=yield null===navigator||void 0===navigator?void 0:navigator.permissions.query({name:e.source===mp.Source.Camera?"camera":"microphone"});if(t&&"denied"===t.state)throw this.log.warn("user has revoked access to ".concat(e.source),Object.assign(Object.assign({},this.logContext),xf(e))),t.onchange=()=>{"denied"!==t.state&&(e.isMuted||e.restartTrack(),t.onchange=null)},new Error("GetUserMedia Permission denied")}catch(Be){}e.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),xf(e))),df(e)?yield e.restartTrack({deviceId:"default"}):yield e.restartTrack())}catch(Be){this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),xf(e))),yield e.mute()}})),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=n,this.roomOptions=i,this.setupEngine(n),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=r}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Bl.NONE}getTrackPublication(e){const t=super.getTrackPublication(e);if(t)return t}getTrackPublicationByName(e){const t=super.getTrackPublicationByName(e);if(t)return t}setupEngine(e){this.engine=e,this.engine.on($h.RemoteMute,((e,t)=>{const n=this.trackPublications.get(e);n&&n.track&&(t?n.mute():n.unmute())})),this.engine.on($h.Connected,this.handleReconnected).on($h.SignalConnected,this.handleSignalConnected).on($h.SignalRestarted,this.handleReconnected).on($h.SignalResumed,this.handleReconnected).on($h.Restarting,this.handleReconnecting).on($h.Resuming,this.handleReconnecting).on($h.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on($h.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on($h.Disconnected,this.handleDisconnected).on($h.SignalRequestResponse,this.handleSignalRequestResponse).on($h.DataPacketReceived,this.handleDataPacket),this.signalConnectedFuture=void 0}setMetadata(e){return xd(this,void 0,void 0,(function*(){yield this.requestMetadataUpdate({metadata:e})}))}setName(e){return xd(this,void 0,void 0,(function*(){yield this.requestMetadataUpdate({name:e})}))}setAttributes(e){return xd(this,void 0,void 0,(function*(){yield this.requestMetadataUpdate({attributes:e})}))}requestMetadataUpdate(e){return xd(this,arguments,void 0,(function(e){var t=this;let{metadata:n,name:i,attributes:r}=e;return function*(){return new Promise(((e,o)=>xd(t,void 0,void 0,(function*(){var t,s;try{let a=!1;const c=yield this.engine.client.sendUpdateLocalMetadata(null!==(t=null!==n&&void 0!==n?n:this.metadata)&&void 0!==t?t:"",null!==(s=null!==i&&void 0!==i?i:this.name)&&void 0!==s?s:"",r),l=performance.now();for(this.pendingSignalRequests.set(c,{resolve:e,reject:e=>{o(e),a=!0},values:{name:i,metadata:n,attributes:r}});performance.now()-l<5e3&&!a;){if((!i||this.name===i)&&(!n||this.metadata===n)&&(!r||Object.entries(r).every((e=>{let[t,n]=e;return this.attributes[t]===n||""===n&&!this.attributes[t]}))))return this.pendingSignalRequests.delete(c),void e();yield Op(50)}o(new rp("Request to update local metadata timed out","TimeoutError"))}catch(Be){Be instanceof Error&&o(Be)}}))))}()}))}setCameraEnabled(e,t,n){return this.setTrackEnabled(mp.Source.Camera,e,t,n)}setMicrophoneEnabled(e,t,n){return this.setTrackEnabled(mp.Source.Microphone,e,t,n)}setScreenShareEnabled(e,t,n){return this.setTrackEnabled(mp.Source.ScreenShare,e,t,n)}setPermissions(e){const t=this.permissions,n=super.setPermissions(e);return n&&t&&this.emit(Jh.ParticipantPermissionsChanged,t),n}setE2EEEnabled(e){return xd(this,void 0,void 0,(function*(){this.encryptionType=e?Bl.GCM:Bl.NONE,yield this.republishAllTracks(void 0,!1)}))}setTrackEnabled(e,t,n,i){return xd(this,void 0,void 0,(function*(){var r,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:t})),this.republishPromise&&(yield this.republishPromise);let s=this.getTrackPublication(e);if(t)if(s)yield s.unmute();else{let t;if(this.pendingPublishing.has(e)){const t=yield this.waitForPendingPublicationOfSource(e);return t||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield null===t||void 0===t?void 0:t.unmute(),t}this.pendingPublishing.add(e);try{switch(e){case mp.Source.Camera:t=yield this.createTracks({video:null===(r=n)||void 0===r||r});break;case mp.Source.Microphone:t=yield this.createTracks({audio:null===(o=n)||void 0===o||o});break;case mp.Source.ScreenShare:t=yield this.createScreenTracks(Object.assign({},n));break;default:throw new Zh(e)}}catch(Be){throw null===t||void 0===t||t.forEach((e=>{e.stop()})),Be instanceof Error&&this.emit(Jh.MediaDevicesError,Be,wf(e)),this.pendingPublishing.delete(e),Be}for(const n of t)e===mp.Source.Microphone&&cf(n)&&(null===i||void 0===i?void 0:i.preConnectBuffer)&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),n.startPreConnectBuffer());try{const e=[];for(const r of t)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),xf(r))),e.push(this.publishTrack(r,i));const n=yield Promise.all(e);[s]=n}catch(Be){throw null===t||void 0===t||t.forEach((e=>{e.stop()})),Be}finally{this.pendingPublishing.delete(e)}}else if(!(null===s||void 0===s?void 0:s.track)&&this.pendingPublishing.has(e)&&(s=yield this.waitForPendingPublicationOfSource(e),s||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),s&&s.track)if(e===mp.Source.ScreenShare){s=yield this.unpublishTrack(s.track);const e=this.getTrackPublication(mp.Source.ScreenShareAudio);e&&e.track&&this.unpublishTrack(e.track)}else yield s.mute();return s}))}enableCameraAndMicrophone(){return xd(this,void 0,void 0,(function*(){if(!this.pendingPublishing.has(mp.Source.Camera)&&!this.pendingPublishing.has(mp.Source.Microphone)){this.pendingPublishing.add(mp.Source.Camera),this.pendingPublishing.add(mp.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map((e=>this.publishTrack(e))))}finally{this.pendingPublishing.delete(mp.Source.Camera),this.pendingPublishing.delete(mp.Source.Microphone)}}}))}createTracks(e){return xd(this,void 0,void 0,(function*(){var t,n;null!==e&&void 0!==e||(e={});const i=mf(e,null===(t=this.roomOptions)||void 0===t?void 0:t.audioCaptureDefaults,null===(n=this.roomOptions)||void 0===n?void 0:n.videoCaptureDefaults);try{const e=yield og(i,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return e.map((e=>(cf(e)&&(this.microphoneError=void 0,e.setAudioContext(this.audioContext),e.source=mp.Source.Microphone,this.emit(Jh.AudioStreamAcquired)),lf(e)&&(this.cameraError=void 0,e.source=mp.Source.Camera),e)))}catch(bg){throw bg instanceof Error&&(e.audio&&(this.microphoneError=bg),e.video&&(this.cameraError=bg)),bg}}))}createScreenTracks(e){return xd(this,void 0,void 0,(function*(){if(void 0===e&&(e={}),void 0===navigator.mediaDevices.getDisplayMedia)throw new Xh("getDisplayMedia not supported");void 0!==e.resolution||Dp()||(e.resolution=Ep.h1080fps30.resolution);const t=Sf(e),n=yield navigator.mediaDevices.getDisplayMedia(t),i=n.getVideoTracks();if(0===i.length)throw new Zh("no video track found");const r=new Am(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});r.source=mp.Source.ScreenShare,e.contentHint&&(r.mediaStreamTrack.contentHint=e.contentHint);const o=[r];if(n.getAudioTracks().length>0){this.emit(Jh.AudioStreamAcquired);const e=new Sm(n.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});e.source=mp.Source.ScreenShareAudio,o.push(e)}return o}))}publishTrack(e,t){return xd(this,void 0,void 0,(function*(){return this.publishOrRepublishTrack(e,t)}))}publishOrRepublishTrack(e,t){return xd(this,arguments,void 0,(function(e,t){var n=this;let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){var r,o,s,a;let c,l;if(df(e)&&e.setAudioContext(n.audioContext),yield null===(r=n.reconnectFuture)||void 0===r?void 0:r.promise,n.republishPromise&&!i&&(yield n.republishPromise),af(e)&&n.pendingPublishPromises.has(e)&&(yield n.pendingPublishPromises.get(e)),e instanceof MediaStreamTrack)c=e.getConstraints();else{let t;switch(c=e.constraints,e.source){case mp.Source.Microphone:t="audioinput";break;case mp.Source.Camera:t="videoinput"}t&&n.activeDeviceMap.has(t)&&(c=Object.assign(Object.assign({},c),{deviceId:n.activeDeviceMap.get(t)}))}if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new Sm(e,c,!0,n.audioContext,{loggerName:n.roomOptions.loggerName,loggerContextCb:()=>n.logContext});break;case"video":e=new Am(e,c,!0,{loggerName:n.roomOptions.loggerName,loggerContextCb:()=>n.logContext});break;default:throw new Zh("unsupported MediaStreamTrack kind ".concat(e.kind))}else e.updateLoggerOptions({loggerName:n.roomOptions.loggerName,loggerContextCb:()=>n.logContext});if(n.trackPublications.forEach((t=>{t.track&&t.track===e&&(l=t)})),l)return n.log.warn("track has already been published, skipping",Object.assign(Object.assign({},n.logContext),xf(l))),l;const u="channelCount"in e.mediaStreamTrack.getSettings()&&2===e.mediaStreamTrack.getSettings().channelCount||2===e.mediaStreamTrack.getConstraints().channelCount,d=null!==(o=null===t||void 0===t?void 0:t.forceStereo)&&void 0!==o?o:u;d&&(t||(t={}),void 0===t.dtx&&n.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},n.logContext),xf(e))),void 0===t.red&&n.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),null!==(s=t.dtx)&&void 0!==s||(t.dtx=!1),null!==(a=t.red)&&void 0!==a||(t.red=!1));const h=Object.assign(Object.assign({},n.roomOptions.publishDefaults),t);!function(){const e=cp(),t="17.2";if(e)return"Safari"!==e.name&&"iOS"!==e.os||!!("iOS"===e.os&&e.osVersion&&Hp(t,e.osVersion)>=0)||"Safari"===e.name&&Hp(t,e.version)>=0}()&&n.roomOptions.e2ee&&(n.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},n.logContext)),h.simulcast=!1),h.source&&(e.source=h.source);const p=new Promise(((t,i)=>xd(n,void 0,void 0,(function*(){try{if(this.engine.client.currentState!==Af.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:xf(e)}));const n=setTimeout((()=>{i(new ip("publishing rejected as engine not connected within timeout",408))}),15e3);yield this.waitUntilEngineConnected(),clearTimeout(n);const r=yield this.publish(e,h,d);t(r)}else try{const n=yield this.publish(e,h,d);t(n)}catch(Be){i(Be)}}catch(Be){i(Be)}}))));n.pendingPublishPromises.set(e,p);try{return yield p}catch(Be){throw Be}finally{n.pendingPublishPromises.delete(e)}}()}))}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new ef),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),xf(e))),!1;const{canPublish:t,canPublishSources:n}=this.permissions;return!(!t||0!==n.length&&!n.map((e=>function(e){switch(e){case xl.CAMERA:return mp.Source.Camera;case xl.MICROPHONE:return mp.Source.Microphone;case xl.SCREEN_SHARE:return mp.Source.ScreenShare;case xl.SCREEN_SHARE_AUDIO:return mp.Source.ScreenShareAudio;default:return mp.Source.Unknown}}(e))).includes(e.source))||(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),xf(e))),!1)}publish(e,t,n){return xd(this,void 0,void 0,(function*(){var i,r,o,s,a,c,l,u,d,h;if(!this.hasPermissionsToPublish(e))throw new ip("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find((t=>af(e)&&t.source===e.source))&&e.source!==mp.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),xf(e))),t.stopMicTrackOnMute&&cf(e)&&(e.stopOnMute=!0),e.source===mp.Source.ScreenShare&&Lp()&&(t.simulcast=!1),"av1"!==t.videoCodec||function(){if(!("getCapabilities"in RTCRtpSender))return!1;if(Ap())return!1;const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e)for(const n of e.codecs)if("video/AV1"===n.mimeType){t=!0;break}return t}()||(t.videoCodec=void 0),"vp9"!==t.videoCodec||function(){if(!("getCapabilities"in RTCRtpSender))return!1;if(Lp())return!1;if(Ap()){const e=cp();if((null===e||void 0===e?void 0:e.version)&&Hp(e.version,"16")<0)return!1}const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e)for(const n of e.codecs)if("video/VP9"===n.mimeType){t=!0;break}return t}()||(t.videoCodec=void 0),void 0===t.videoCodec&&(t.videoCodec=om),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some((e=>t.videoCodec===Cf(e.mime)))||(t.videoCodec=Cf(this.enabledPublishVideoCodecs[0].mime)));const p=t.videoCodec;e.on(Qh.Muted,this.onTrackMuted),e.on(Qh.Unmuted,this.onTrackUnmuted),e.on(Qh.Ended,this.handleTrackEnded),e.on(Qh.UpstreamPaused,this.onTrackUpstreamPaused),e.on(Qh.UpstreamResumed,this.onTrackUpstreamResumed),e.on(Qh.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const f=[],m=!(null===(i=t.dtx)||void 0===i||i),g=e.getSourceTrackSettings();g.autoGainControl&&f.push(Il.TF_AUTO_GAIN_CONTROL),g.echoCancellation&&f.push(Il.TF_ECHO_CANCELLATION),g.noiseSuppression&&f.push(Il.TF_NOISE_SUPPRESSION),g.channelCount&&g.channelCount>1&&f.push(Il.TF_STEREO),m&&f.push(Il.TF_NO_DTX),df(e)&&e.hasPreConnectBuffer&&f.push(Il.TF_PRECONNECT_BUFFER);const v=new Tu({cid:e.mediaStreamTrack.id,name:t.name,type:mp.kindToProto(e.kind),muted:e.isMuted,source:mp.sourceToProto(e.source),disableDtx:m,encryption:this.encryptionType,stereo:n,disableRed:this.isE2EEEnabled||!(null===(r=t.red)||void 0===r||r),stream:null===t||void 0===t?void 0:t.stream,backupCodecPolicy:null===t||void 0===t?void 0:t.backupCodecPolicy,audioFeatures:f});let y;if(e.kind===mp.Kind.Video){let n={width:0,height:0};try{n=yield e.waitForDimensions()}catch(Be){const i=null!==(s=null===(o=this.roomOptions.videoCaptureDefaults)||void 0===o?void 0:o.resolution)&&void 0!==s?s:Tp.h720.resolution;n={width:i.width,height:i.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),xf(e)),{dims:n}))}v.width=n.width,v.height=n.height,uf(e)&&(Np(p)&&(e.source===mp.Source.ScreenShare&&(t.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),xf(e))))),t.scalabilityMode=null!==(a=t.scalabilityMode)&&void 0!==a?a:"L3T3_KEY"),v.simulcastCodecs=[new Cu({codec:p,cid:e.mediaStreamTrack.id})],!0===t.backupCodec&&(t.backupCodec={codec:om}),t.backupCodec&&p!==t.backupCodec.codec&&v.encryption===Bl.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),v.simulcastCodecs.push(new Cu({codec:t.backupCodec.codec,cid:""})))),y=Rm(e.source===mp.Source.ScreenShare,v.width,v.height,t),v.layers=jm(v.width,v.height,y,Np(t.videoCodec))}else e.kind===mp.Kind.Audio&&(y=[{maxBitrate:null===(c=t.audioPreset)||void 0===c?void 0:c.maxBitrate,priority:null!==(u=null===(l=t.audioPreset)||void 0===l?void 0:l.priority)&&void 0!==u?u:"high",networkPriority:null!==(h=null===(d=t.audioPreset)||void 0===d?void 0:d.priority)&&void 0!==h?h:"high"}]);if(!this.engine||this.engine.isClosed)throw new tp("cannot publish track when not connected");const b=()=>xd(this,void 0,void 0,(function*(){var n,i,r;if(!this.engine.pcManager)throw new tp("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,t,y),uf(e)&&(null!==(n=t.degradationPreference)&&void 0!==n||(t.degradationPreference=function(e){return e.source===mp.Source.ScreenShare||e.constraints.height&&tf(e.constraints.height)>=1080?"maintain-resolution":"balanced"}(e)),e.setDegradationPreference(t.degradationPreference)),y)if(Lp()&&e.kind===mp.Kind.Audio){let t;for(const n of this.engine.pcManager.publisher.getTransceivers())if(n.sender===e.sender){t=n;break}t&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:t,codec:"opus",maxbr:(null===(i=y[0])||void 0===i?void 0:i.maxBitrate)?y[0].maxBitrate/1e3:0})}else e.codec&&Np(e.codec)&&(null===(r=y[0])||void 0===r?void 0:r.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:v.cid,codec:e.codec,maxbr:y[0].maxBitrate/1e3});yield this.engine.negotiate()}));let k;const w=new Promise(((t,n)=>xd(this,void 0,void 0,(function*(){var i;try{k=yield this.engine.addTrack(v),t(k)}catch(bg){e.sender&&(null===(i=this.engine.pcManager)||void 0===i?void 0:i.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch((t=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),xf(e)),{error:t}))}))),n(bg)}}))));if(this.enabledPublishVideoCodecs.length>0){const e=yield Promise.all([w,b()]);k=e[0]}else{let n;if(k=yield w,k.codecs.forEach((e=>{void 0===n&&(n=e.mimeType)})),n&&e.kind===mp.Kind.Video){const i=Cf(n);i!==p&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),xf(e)),{codec:i})),t.videoCodec=i,y=Rm(e.source===mp.Source.ScreenShare,v.width,v.height,t))}yield b()}const S=new rg(e.kind,k,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(S.options=t,e.sid=k.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:y,trackInfo:k})),uf(e)?e.startMonitor(this.engine.client):df(e)&&e.startMonitor(),this.addTrackPublication(S),this.emit(Jh.LocalTrackPublished,S),df(e)&&k.audioFeatures.includes(Il.TF_PRECONNECT_BUFFER)){const t=e.getPreConnectBuffer();if(this.on(Jh.LocalTrackSubscribed,(t=>{if(t.trackSid===k.sid){if(!e.hasPreConnectBuffer)return void this.log.warn("subscribe event came to late, buffer already closed",this.logContext);this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),xf(e))),e.stopPreConnectBuffer()}})),t){const n=new Promise(((n,i)=>xd(this,void 0,void 0,(function*(){var r,o,s,a,c,l;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),xf(e)));const f=setTimeout((()=>{i(new Error("agent not active within 10 seconds"))}),1e4),m=yield this.waitUntilActiveAgentPresent();clearTimeout(f),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),xf(e)));const v=yield this.streamBytes({name:"preconnect-buffer",mimeType:"audio/opus",topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[m.identity],attributes:{trackId:S.trackSid,sampleRate:String(null!==(c=g.sampleRate)&&void 0!==c?c:"48000"),channels:String(null!==(l=g.channelCount)&&void 0!==l?l:"1")}});try{for(var u,d=!0,h=Pd(t);!(r=(u=yield h.next()).done);d=!0){a=u.value,d=!1;const e=a;yield v.write(e)}}catch(p){o={error:p}}finally{try{d||r||!(s=h.return)||(yield s.call(h))}finally{if(o)throw o.error}}yield v.close(),n()}catch(Be){i(Be)}}))));n.then((()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),xf(e)))})).catch((t=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),xf(e)),{error:t}))}))}}return S}))}get isLocal(){return!0}publishAdditionalCodecForTrack(e,t,n){return xd(this,void 0,void 0,(function*(){var i;if(this.encryptionType!==Bl.NONE)return;let r;if(this.trackPublications.forEach((t=>{t.track&&t.track===e&&(r=t)})),!r)throw new Zh("track is not published");if(!uf(e))throw new Zh("track is not a video track");const o=Object.assign(Object.assign({},null===(i=this.roomOptions)||void 0===i?void 0:i.publishDefaults),n),s=function(e,t,n){var i,r,o,s;if(!n.backupCodec||!0===n.backupCodec||n.backupCodec.codec===n.videoCodec)return;t!==n.backupCodec.codec&&kd.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;const a=e.mediaStreamTrack.getSettings(),c=null!==(i=a.width)&&void 0!==i?i:null===(r=e.dimensions)||void 0===r?void 0:r.width,l=null!==(o=a.height)&&void 0!==o?o:null===(s=e.dimensions)||void 0===s?void 0:s.height;return e.source===mp.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Rm(e.source===mp.Source.ScreenShare,c,l,n)}(e,t,o);if(!s)return void this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),xf(e)));const a=e.addSimulcastTrack(t,s);if(!a)return;const c=new Tu({cid:a.mediaStreamTrack.id,type:mp.kindToProto(e.kind),muted:e.isMuted,source:mp.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:o.videoCodec,cid:a.mediaStreamTrack.id}]});if(c.layers=jm(c.width,c.height,s),!this.engine||this.engine.isClosed)throw new tp("cannot publish track when not connected");const l=(yield Promise.all([this.engine.addTrack(c),(()=>xd(this,void 0,void 0,(function*(){yield this.engine.createSimulcastSender(e,a,o,s),yield this.engine.negotiate()})))()]))[0];this.log.debug("published ".concat(t," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:s,trackInfo:l}))}))}unpublishTrack(e,t){return xd(this,void 0,void 0,(function*(){var n,i;if(af(e)){const t=this.pendingPublishPromises.get(e);t&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),xf(e))),yield t)}const r=this.getPublicationForTrack(e),o=r?xf(r):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!r||!r.track)return void this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));(e=r.track).off(Qh.Muted,this.onTrackMuted),e.off(Qh.Unmuted,this.onTrackUnmuted),e.off(Qh.Ended,this.handleTrackEnded),e.off(Qh.UpstreamPaused,this.onTrackUpstreamPaused),e.off(Qh.UpstreamResumed,this.onTrackUpstreamResumed),e.off(Qh.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),void 0===t&&(t=null===(i=null===(n=this.roomOptions)||void 0===n?void 0:n.stopLocalTrackOnUnpublish)||void 0===i||i),t?e.stop():e.stopMonitor();let s=!1;const a=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<dm.FAILED&&a)try{for(const e of this.engine.pcManager.publisher.getTransceivers())e.sender===a&&(e.direction="inactive",s=!0);if(this.engine.removeTrack(a)&&(s=!0),uf(e)){for(const[,t]of e.simulcastCodecs)t.sender&&(this.engine.removeTrack(t.sender)&&(s=!0),t.sender=void 0);e.simulcastCodecs.clear()}}catch(Be){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:Be}))}switch(this.trackPublications.delete(r.trackSid),r.kind){case mp.Kind.Audio:this.audioTrackPublications.delete(r.trackSid);break;case mp.Kind.Video:this.videoTrackPublications.delete(r.trackSid)}return this.emit(Jh.LocalTrackUnpublished,r),r.setTrack(void 0),s&&(yield this.engine.negotiate()),r}))}unpublishTracks(e){return xd(this,void 0,void 0,(function*(){return(yield Promise.all(e.map((e=>this.unpublishTrack(e))))).filter((e=>!!e))}))}republishAllTracks(e){return xd(this,arguments,void 0,(function(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){t.republishPromise&&(yield t.republishPromise),t.republishPromise=new Promise(((i,r)=>xd(t,void 0,void 0,(function*(){try{const t=[];this.trackPublications.forEach((n=>{n.track&&(e&&(n.options=Object.assign(Object.assign({},n.options),e)),t.push(n))})),yield Promise.all(t.map((e=>xd(this,void 0,void 0,(function*(){const t=e.track;yield this.unpublishTrack(t,!1),!n||t.isMuted||t.source===mp.Source.ScreenShare||t.source===mp.Source.ScreenShareAudio||!df(t)&&!uf(t)||t.isUserProvided||(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:e.trackSid})),yield t.restartTrack()),yield this.publishOrRepublishTrack(t,e.options,!0)}))))),i()}catch(t){r(t)}finally{this.republishPromise=void 0}})))),yield t.republishPromise}()}))}publishData(e){return xd(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const i=n.reliable?ql.RELIABLE:ql.LOSSY,r=n.destinationIdentities,o=n.topic,s=new Hl({kind:i,value:{case:"user",value:new Jl({participantIdentity:t.identity,payload:e,destinationIdentities:r,topic:o})}});yield t.engine.sendDataPacket(s,i)}()}))}publishDtmf(e,t){return xd(this,void 0,void 0,(function*(){const n=new Hl({kind:ql.RELIABLE,value:{case:"sipDtmf",value:new $l({code:e,digit:t})}});yield this.engine.sendDataPacket(n,ql.RELIABLE)}))}sendChatMessage(e,t){return xd(this,void 0,void 0,(function*(){const n={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:null===t||void 0===t?void 0:t.attachments},i=new Hl({value:{case:"chatMessage",value:new Xl(Object.assign(Object.assign({},n),{timestamp:ac.parse(n.timestamp)}))}});return yield this.engine.sendDataPacket(i,ql.RELIABLE),this.emit(Jh.ChatMessage,n),n}))}editChatMessage(e,t){return xd(this,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},t),{message:e,editTimestamp:Date.now()}),i=new Hl({value:{case:"chatMessage",value:new Xl(Object.assign(Object.assign({},n),{timestamp:ac.parse(n.timestamp),editTimestamp:ac.parse(n.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,ql.RELIABLE),this.emit(Jh.ChatMessage,n),n}))}sendText(e,t){return xd(this,void 0,void 0,(function*(){var n;const i=crypto.randomUUID(),r=(new TextEncoder).encode(e).byteLength,o=null===(n=null===t||void 0===t?void 0:t.attachments)||void 0===n?void 0:n.map((()=>crypto.randomUUID())),s=new Array(o?o.length+1:1).fill(0),a=(e,n)=>{var i;s[n]=e;const r=s.reduce(((e,t)=>e+t),0);null===(i=null===t||void 0===t?void 0:t.onProgress)||void 0===i||i.call(t,r)},c=yield this.streamText({streamId:i,totalSize:r,destinationIdentities:null===t||void 0===t?void 0:t.destinationIdentities,topic:null===t||void 0===t?void 0:t.topic,attachedStreamIds:o,attributes:null===t||void 0===t?void 0:t.attributes});return yield c.write(e),a(1,0),yield c.close(),(null===t||void 0===t?void 0:t.attachments)&&o&&(yield Promise.all(t.attachments.map(((e,n)=>xd(this,void 0,void 0,(function*(){return this._sendFile(o[n],e,{topic:t.topic,mimeType:e.type,onProgress:e=>{a(e,n+1)}})})))))),c.info}))}streamText(e){return xd(this,void 0,void 0,(function*(){var t,n;const i=null!==(t=null===e||void 0===e?void 0:e.streamId)&&void 0!==t?t:crypto.randomUUID(),r={id:i,mimeType:"text/plain",timestamp:Date.now(),topic:null!==(n=null===e||void 0===e?void 0:e.topic)&&void 0!==n?n:"",size:null===e||void 0===e?void 0:e.totalSize,attributes:null===e||void 0===e?void 0:e.attributes},o=new mu({streamId:i,mimeType:r.mimeType,topic:r.topic,timestamp:sf(r.timestamp),totalLength:sf(null===e||void 0===e?void 0:e.totalSize),attributes:r.attributes,contentHeader:{case:"textHeader",value:new pu({version:null===e||void 0===e?void 0:e.version,attachedStreamIds:null===e||void 0===e?void 0:e.attachedStreamIds,replyToStreamId:null===e||void 0===e?void 0:e.replyToStreamId,operationType:"update"===(null===e||void 0===e?void 0:e.type)?hu.UPDATE:hu.CREATE})}}),s=null===e||void 0===e?void 0:e.destinationIdentities,a=new Hl({destinationIdentities:s,value:{case:"streamHeader",value:o}});yield this.engine.sendDataPacket(a,ql.RELIABLE);let c=0;const l=this,u=new WritableStream({write(e){return xd(this,void 0,void 0,(function*(){for(const t of function(e,t){const n=[];let i=(new TextEncoder).encode(e);for(;i.length>t;){let e=t;for(;e>0;){const t=i[e];if(void 0!==t&&128!==(192&t))break;e--}n.push(i.slice(0,e)),i=i.slice(e)}return i.length>0&&n.push(i),n}(e,15e3)){yield l.engine.waitForBufferStatusLow(ql.RELIABLE);const e=new gu({content:t,streamId:i,chunkIndex:sf(c)}),n=new Hl({destinationIdentities:s,value:{case:"streamChunk",value:e}});yield l.engine.sendDataPacket(n,ql.RELIABLE),c+=1}}))},close(){return xd(this,void 0,void 0,(function*(){const e=new vu({streamId:i}),t=new Hl({destinationIdentities:s,value:{case:"streamTrailer",value:e}});yield l.engine.sendDataPacket(t,ql.RELIABLE)}))},abort(e){console.log("Sink error:",e)}});let d=()=>xd(this,void 0,void 0,(function*(){yield h.close()}));l.engine.once($h.Closing,d);const h=new $m(u,r,(()=>this.engine.off($h.Closing,d)));return h}))}sendFile(e,t){return xd(this,void 0,void 0,(function*(){const n=crypto.randomUUID();return yield this._sendFile(n,e,t),{id:n}}))}_sendFile(e,t,n){return xd(this,void 0,void 0,(function*(){var i;const r=yield this.streamBytes({streamId:e,totalSize:t.size,name:t.name,mimeType:null!==(i=null===n||void 0===n?void 0:n.mimeType)&&void 0!==i?i:t.type,topic:null===n||void 0===n?void 0:n.topic,destinationIdentities:null===n||void 0===n?void 0:n.destinationIdentities}),o=t.stream().getReader();for(;;){const{done:e,value:t}=yield o.read();if(e)break;yield r.write(t)}return yield r.close(),r.info}))}streamBytes(e){return xd(this,void 0,void 0,(function*(){var t,n,i,r,o;const s=null!==(t=null===e||void 0===e?void 0:e.streamId)&&void 0!==t?t:crypto.randomUUID(),a=null===e||void 0===e?void 0:e.destinationIdentities,c={id:s,mimeType:null!==(n=null===e||void 0===e?void 0:e.mimeType)&&void 0!==n?n:"application/octet-stream",topic:null!==(i=null===e||void 0===e?void 0:e.topic)&&void 0!==i?i:"",timestamp:Date.now(),attributes:null===e||void 0===e?void 0:e.attributes,size:null===e||void 0===e?void 0:e.totalSize,name:null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:"unknown"},l=new mu({totalLength:sf(null!==(o=c.size)&&void 0!==o?o:0),mimeType:c.mimeType,streamId:s,topic:c.topic,timestamp:sf(Date.now()),attributes:c.attributes,contentHeader:{case:"byteHeader",value:new fu({name:c.name})}}),u=new Hl({destinationIdentities:a,value:{case:"streamHeader",value:l}});yield this.engine.sendDataPacket(u,ql.RELIABLE);let d=0;const h=new Fa,p=this.engine,f=this.log,m=new WritableStream({write(e){return xd(this,void 0,void 0,(function*(){const t=yield h.lock();let n=0;try{for(;n<e.byteLength;){const t=e.slice(n,n+15e3);yield p.waitForBufferStatusLow(ql.RELIABLE);const i=new Hl({destinationIdentities:a,value:{case:"streamChunk",value:new gu({content:t,streamId:s,chunkIndex:sf(d)})}});yield p.sendDataPacket(i,ql.RELIABLE),d+=1,n+=t.byteLength}}finally{t()}}))},close(){return xd(this,void 0,void 0,(function*(){const e=new vu({streamId:s}),t=new Hl({destinationIdentities:a,value:{case:"streamTrailer",value:e}});yield p.sendDataPacket(t,ql.RELIABLE)}))},abort(e){f.error("Sink error:",e)}});return new Qm(m,c)}))}performRpc(e){return xd(this,arguments,void 0,(function(e){var t=this;let{destinationIdentity:n,method:i,payload:r,responseTimeout:o=1e4}=e;return function*(){return new Promise(((e,s)=>xd(t,void 0,void 0,(function*(){var t,a,c,l;if(fm(r)>15360)return void s(pm.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));if((null===(a=null===(t=this.engine.latestJoinResponse)||void 0===t?void 0:t.serverInfo)||void 0===a?void 0:a.version)&&Hp(null===(l=null===(c=this.engine.latestJoinResponse)||void 0===c?void 0:c.serverInfo)||void 0===l?void 0:l.version,"1.8.0")<0)return void s(pm.builtIn("UNSUPPORTED_SERVER"));const u=crypto.randomUUID();yield this.publishRpcRequest(n,u,i,r,o-2e3);const d=setTimeout((()=>{this.pendingAcks.delete(u),s(pm.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(u),clearTimeout(h)}),2e3);this.pendingAcks.set(u,{resolve:()=>{clearTimeout(d)},participantIdentity:n});const h=setTimeout((()=>{this.pendingResponses.delete(u),s(pm.builtIn("RESPONSE_TIMEOUT"))}),o);this.pendingResponses.set(u,{resolve:(t,n)=>{clearTimeout(h),this.pendingAcks.has(u)&&(console.warn("RPC response received before ack",u),this.pendingAcks.delete(u),clearTimeout(d)),n?s(n):e(null!==t&&void 0!==t?t:"")},participantIdentity:n})}))))}()}))}registerRpcMethod(e,t){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,t)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.participantTrackPermissions=t,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const t=this.pendingAcks.get(e);t?(t.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,t,n){const i=this.pendingResponses.get(e);i?(i.resolve(t,n),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,t,n,i,r){return xd(this,void 0,void 0,(function*(){const o=new Hl({destinationIdentities:[e],kind:ql.RELIABLE,value:{case:"rpcRequest",value:new Zl({id:t,method:n,payload:i,responseTimeoutMs:r,version:1})}});yield this.engine.sendDataPacket(o,ql.RELIABLE)}))}handleParticipantDisconnected(e){for(const[t,{participantIdentity:n}]of this.pendingAcks)n===e&&this.pendingAcks.delete(t);for(const[t,{participantIdentity:n,resolve:i}]of this.pendingResponses)n===e&&(i(null,pm.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(t))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter((e=>"video"===e.mime.split("/")[0].toLowerCase()))}updateInfo(e){return!!super.updateInfo(e)&&(e.tracks.forEach((e=>{var t,n;const i=this.trackPublications.get(e.sid);if(i){const r=i.isMuted||null!==(n=null===(t=i.track)||void 0===t?void 0:t.isUpstreamPaused)&&void 0!==n&&n;r!==e.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),xf(i)),{mutedOnServer:r})),this.engine.client.sendMuteTrack(e.sid,r))}})),!0)}setActiveAgent(e){var t,n,i,r;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?null===(n=null===(t=this.activeAgentFuture)||void 0===t?void 0:t.resolve)||void 0===n||n.call(t,e):null===(r=null===(i=this.activeAgentFuture)||void 0===i?void 0:i.reject)||void 0===r||r.call(i,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new ef),this.activeAgentFuture.promise)}getPublicationForTrack(e){let t;return this.trackPublications.forEach((n=>{const i=n.track;i&&(e instanceof MediaStreamTrack?(df(i)||uf(i))&&i.mediaStreamTrack===e&&(t=n):e===i&&(t=n))})),t}waitForPendingPublicationOfSource(e){return xd(this,void 0,void 0,(function*(){const t=Date.now();for(;Date.now()<t+1e4;){const t=Array.from(this.pendingPublishPromises.entries()).find((t=>{let[n]=t;return n.source===e}));if(t)return t[1];yield Op(20)}}))}}class lg extends ig{constructor(e,t,n,i){super(e,t.sid,t.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=fp.HIGH,this.handleEnded=e=>{this.setTrack(void 0),this.emit(Qh.Ended,e)},this.handleVisibilityChange=e=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(e),this.logContext),this.disabled=!e,this.emitTrackUpdate()},this.handleVideoDimensionsChange=e=>{this.log.debug("adaptivestream video dimensions ".concat(e.width,"x").concat(e.height),this.logContext),this.videoDimensions=e,this.emitTrackUpdate()},this.subscribed=n,this.updateInfo(t)}setSubscribed(e){const t=this.subscriptionStatus,n=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new Lu({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new iu({participantSid:"",trackSids:[this.trackSid]})]});this.emit(Qh.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(t),this.emitPermissionUpdateIfChanged(n)}get subscriptionStatus(){return!1===this.subscribed?ig.SubscriptionStatus.Unsubscribed:super.isSubscribed?ig.SubscriptionStatus.Subscribed:ig.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?ig.PermissionStatus.Allowed:ig.PermissionStatus.NotAllowed}get isSubscribed(){return!1!==this.subscribed&&super.isSubscribed}get isDesired(){return!1!==this.subscribed}get isEnabled(){return!this.disabled}get isLocal(){return!1}setEnabled(e){this.isManualOperationAllowed()&&this.disabled!==!e&&(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){this.isManualOperationAllowed()&&this.currentVideoQuality!==e&&(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var t,n;this.isManualOperationAllowed()&&((null===(t=this.videoDimensions)||void 0===t?void 0:t.width)===e.width&&(null===(n=this.videoDimensions)||void 0===n?void 0:n.height)===e.height||(ff(this.track)&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&ff(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const t=this.subscriptionStatus,n=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(Qh.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(Qh.VisibilityChanged,this.handleVisibilityChange),i.off(Qh.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(Qh.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(Qh.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(Qh.VisibilityChanged,this.handleVisibilityChange),e.on(Qh.Ended,this.handleEnded),this.emit(Qh.Subscribed,e)),this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t))}setAllowed(e){const t=this.subscriptionStatus,n=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t)}setSubscriptionError(e){this.emit(Qh.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const t=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):t!==e.muted&&this.emit(e.muted?Qh.Muted:Qh.Unmuted)}emitSubscriptionUpdateIfChanged(e){const t=this.subscriptionStatus;e!==t&&this.emit(Qh.SubscriptionStatusChanged,t,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(Qh.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===mp.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):!!this.isDesired||(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return ff(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new Au({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):void 0!==this.currentVideoQuality?e.quality=this.currentVideoQuality:e.quality=fp.HIGH,this.emit(Qh.UpdateSettings,e)}}class ug extends ag{static fromParticipantInfo(e,t,n){return new ug(e,t.sid,t.identity,t.name,t.metadata,t.attributes,n,t.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,t,n,i,r,o,s){super(t,n||"",i,r,o,s,arguments.length>7&&void 0!==arguments[7]?arguments[7]:Ul.STANDARD),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(Qh.UpdateSettings,(t=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),xf(e))),this.signalClient.sendUpdateTrackSettings(t)})),e.on(Qh.UpdateSubscription,(e=>{e.participantTracks.forEach((e=>{e.participantSid=this.sid})),this.signalClient.sendUpdateSubscription(e)})),e.on(Qh.SubscriptionPermissionChanged,(t=>{this.emit(Jh.TrackSubscriptionPermissionChanged,e,t)})),e.on(Qh.SubscriptionStatusChanged,(t=>{this.emit(Jh.TrackSubscriptionStatusChanged,e,t)})),e.on(Qh.Subscribed,(t=>{this.emit(Jh.TrackSubscribed,t,e)})),e.on(Qh.Unsubscribed,(t=>{this.emit(Jh.TrackUnsubscribed,t,e)})),e.on(Qh.SubscriptionFailed,(t=>{this.emit(Jh.TrackSubscriptionFailed,e.trackSid,t)}))}getTrackPublication(e){const t=super.getTrackPublication(e);if(t)return t}getTrackPublicationByName(e){const t=super.getTrackPublicationByName(e);if(t)return t}setVolume(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mp.Source.Microphone;this.volumeMap.set(t,e);const n=this.getTrackPublication(t);n&&n.track&&n.track.setVolume(e)}getVolume(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mp.Source.Microphone;const t=this.getTrackPublication(e);return t&&t.track?t.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,t,n,i,r,o){let s=this.getTrackPublicationBySid(t);if(s||t.startsWith("TR")||this.trackPublications.forEach((t=>{s||e.kind!==t.kind.toString()||(s=t)})),!s)return 0===o?(this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:t})),void this.emit(Jh.TrackSubscriptionFailed,t)):(void 0===o&&(o=20),void setTimeout((()=>{this.addSubscribedMediaTrack(e,t,n,i,r,o-1)}),150));if("ended"===e.readyState)return this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),xf(s))),void this.emit(Jh.TrackSubscriptionFailed,t);let a;return a="video"===e.kind?new Zm(e,t,i,r):new Xm(e,t,i,this.audioContext,this.audioOutput),a.source=s.source,a.isMuted=s.isMuted,a.setMediaStream(n),a.start(),s.setTrack(a),this.volumeMap.has(s.source)&&hf(a)&&cf(a)&&a.setVolume(this.volumeMap.get(s.source)),s}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const t=new Map,n=new Map;return e.tracks.forEach((e=>{var i,r;let o=this.getTrackPublicationBySid(e.sid);if(o)o.updateInfo(e);else{const t=mp.kindFromProto(e.type);if(!t)return;o=new lg(t,e,null===(i=this.signalClient.connectOptions)||void 0===i?void 0:i.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:null===(r=this.loggerOptions)||void 0===r?void 0:r.loggerName}),o.updateInfo(e),n.set(e.sid,o);const s=Array.from(this.trackPublications.values()).find((e=>e.source===(null===o||void 0===o?void 0:o.source)));s&&o.source!==mp.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(o.source),Object.assign(Object.assign({},this.logContext),{oldTrack:xf(s),newTrack:xf(o)})),this.addTrackPublication(o)}t.set(e.sid,o)})),this.trackPublications.forEach((e=>{t.has(e.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),xf(e))),this.unpublishTrack(e.trackSid,!0))})),n.forEach((e=>{this.emit(Jh.TrackPublished,e)})),!0}unpublishTrack(e,t){const n=this.trackPublications.get(e);if(!n)return;const{track:i}=n;switch(i&&(i.stop(),n.setTrack(void 0)),this.trackPublications.delete(e),n.kind){case mp.Kind.Audio:this.audioTrackPublications.delete(e);break;case mp.Kind.Video:this.videoTrackPublications.delete(e)}t&&this.emit(Jh.TrackUnpublished,n)}setAudioOutput(e){return xd(this,void 0,void 0,(function*(){this.audioOutput=e;const t=[];this.audioTrackPublications.forEach((n=>{var i;cf(n.track)&&hf(n.track)&&t.push(n.track.setSinkId(null!==(i=e.deviceId)&&void 0!==i?i:"default"))})),yield Promise.all(t)}))}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:n})),super.emit(e,...n)}}var dg;!function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting"}(dg||(dg={}));class hg extends _d.EventEmitter{constructor(e){var t,n,i,r;if(super(),t=this,this.state=dg.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=kd,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(e,t,n)=>xd(this,void 0,void 0,(function*(){var i;if("undefined"===typeof RTCPeerConnection||!Rp()&&!_p())throw Fp()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const r=yield this.disconnectLock.lock();if(this.state===dg.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),r(),Promise.resolve();if(this.connectFuture)return r(),this.connectFuture.promise;this.setAndEmitConnectionState(dg.Connecting),(null===(i=this.regionUrlProvider)||void 0===i?void 0:i.getServerUrl().toString())!==e&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Bp(new URL(e))&&(void 0===this.regionUrlProvider?this.regionUrlProvider=new Hm(e,t):this.regionUrlProvider.updateToken(t),this.regionUrlProvider.fetchRegionSettings().then((e=>{var t;null===(t=this.regionUrlProvider)||void 0===t||t.setServerReportedRegions(e)})).catch((e=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:e}))})));const o=(i,s,a)=>xd(this,void 0,void 0,(function*(){var c,l;this.abortController&&this.abortController.abort();const u=new AbortController;this.abortController=u,null===r||void 0===r||r();try{yield this.attemptConnection(null!==a&&void 0!==a?a:e,t,n,u),this.abortController=void 0,i()}catch(Be){if(this.regionUrlProvider&&Be instanceof Yh&&Be.reason!==Hh.Cancelled&&Be.reason!==Hh.NotAllowed){let t=null;try{t=yield this.regionUrlProvider.getNextBestRegionUrl(null===(c=this.abortController)||void 0===c?void 0:c.signal)}catch(d){if(d instanceof Yh&&(401===d.status||d.reason===Hh.Cancelled))return this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),void s(d)}t&&!(null===(l=this.abortController)||void 0===l?void 0:l.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(Be.message,". Retrying with another region: ").concat(t),this.logContext),this.recreateEngine(),yield o(i,s,t)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,rf(Be)),s(Be))}else{let t=Rl.UNKNOWN_REASON;Be instanceof Yh&&(t=rf(Be)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,t),s(Be)}}})),s=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new ef(((e,t)=>{o(e,t,s)}),(()=>{this.clearConnectionFutures()})),this.connectFuture.promise})),this.connectSignal=(e,t,n,i,r,o)=>xd(this,void 0,void 0,(function*(){var s,a,c;const l=yield n.join(e,t,{autoSubscribe:i.autoSubscribe,adaptiveStream:"object"===typeof r.adaptiveStream||r.adaptiveStream,maxRetries:i.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:i.websocketTimeout},o.signal);let u=l.serverInfo;if(u||(u={version:l.serverVersion,region:l.serverRegion}),this.serverInfo=u,this.log.debug("connected to Livekit Server ".concat(Object.entries(u).map((e=>{let[t,n]=e;return"".concat(t,": ").concat(n)})).join(", ")),{room:null===(s=l.room)||void 0===s?void 0:s.name,roomSid:null===(a=l.room)||void 0===a?void 0:a.sid,identity:null===(c=l.participant)||void 0===c?void 0:c.identity}),!u.version)throw new ep("unknown server version");return"0.15.1"===u.version&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),r.dynacast=!1),l})),this.applyJoinResponse=e=>{const t=e.participant;if(this.localParticipant.sid=t.sid,this.localParticipant.identity=t.identity,this.localParticipant.setEnabledPublishCodecs(e.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(e.sifTrailer)}catch(Be){this.log.error(Be instanceof Error?Be.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:Be}))}this.handleParticipantUpdates([t,...e.otherParticipants]),e.room&&this.handleRoomUpdate(e.room)},this.attemptConnection=(e,t,n,i)=>xd(this,void 0,void 0,(function*(){var r,o;this.state===dg.Reconnecting||this.isResuming||(null===(r=this.engine)||void 0===r?void 0:r.pendingReconnect)?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),(null===(o=this.regionUrlProvider)||void 0===o?void 0:o.isCloud())&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},um),n),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const n=yield this.connectSignal(e,t,this.engine,this.connOptions,this.options,i);this.applyJoinResponse(n),this.setupLocalParticipantEvents(),this.emit(Kh.SignalConnected)}catch(bg){yield this.engine.close(),this.recreateEngine();const t=new Yh("could not establish signal connection",Hh.ServerUnreachable);throw bg instanceof Error&&(t.message="".concat(t.message,": ").concat(bg.message)),bg instanceof Yh&&(t.reason=bg.reason,t.status=bg.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:bg})),t}if(i.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Yh("Connection attempt aborted",Hh.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,i)}catch(Be){throw yield this.engine.close(),this.recreateEngine(),Be}Up()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Up()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(dg.Connected),this.emit(Kh.Connected),this.registerConnectionReconcile()})),this.disconnect=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return xd(t,[...n],void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){var n,i,r,o;const s=yield e.disconnectLock.lock();try{if(e.state===dg.Disconnected)return void e.log.debug("already disconnected",e.logContext);e.log.info("disconnect from room",Object.assign({},e.logContext)),(e.state===dg.Connecting||e.state===dg.Reconnecting||e.isResuming)&&(e.log.warn("abort connection attempt",e.logContext),null===(n=e.abortController)||void 0===n||n.abort(),null===(r=null===(i=e.connectFuture)||void 0===i?void 0:i.reject)||void 0===r||r.call(i,new Yh("Client initiated disconnect",Hh.Cancelled)),e.connectFuture=void 0),(null===(o=e.engine)||void 0===o?void 0:o.client.isDisconnected)||(yield e.engine.client.sendLeave()),e.engine&&(yield e.engine.close()),e.handleDisconnect(t,Rl.CLIENT_INITIATED),e.engine=void 0}finally{s()}}()}))},this.onPageLeave=()=>xd(this,void 0,void 0,(function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()})),this.startAudio=()=>xd(this,void 0,void 0,(function*(){const e=[],t=cp();if(t&&"iOS"===t.os){const t="livekit-dummy-audio-el";let n=document.getElementById(t);if(!n){n=document.createElement("audio"),n.id=t,n.autoplay=!0,n.hidden=!0;const e=Zp();e.enabled=!0;const i=new MediaStream([e]);n.srcObject=i,document.addEventListener("visibilitychange",(()=>{n&&(n.srcObject=document.hidden?null:i,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))})),document.body.append(n),this.once(Kh.Disconnected,(()=>{null===n||void 0===n||n.remove(),n=null}))}e.push(n)}this.remoteParticipants.forEach((t=>{t.audioTrackPublications.forEach((t=>{t.track&&t.track.attachedElements.forEach((t=>{e.push(t)}))}))}));try{yield Promise.all([this.acquireAudioContext(),...e.map((e=>(e.muted=!1,e.play())))]),this.handleAudioPlaybackStarted()}catch(bg){throw this.handleAudioPlaybackFailed(bg),bg}})),this.startVideo=()=>xd(this,void 0,void 0,(function*(){const e=[];for(const t of this.remoteParticipants.values())t.videoTrackPublications.forEach((t=>{var n;null===(n=t.track)||void 0===n||n.attachedElements.forEach((t=>{e.includes(t)||e.push(t)}))}));yield Promise.all(e.map((e=>e.play()))).then((()=>{this.handleVideoPlaybackStarted()})).catch((e=>{"NotAllowedError"===e.name?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)}))})),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const e of this.remoteParticipants.values())this.handleParticipantDisconnected(e.identity,e);this.setAndEmitConnectionState(dg.Reconnecting)&&this.emit(Kh.Reconnecting)},this.handleSignalRestarted=e=>xd(this,void 0,void 0,(function*(){this.log.debug("signal reconnected to server, region ".concat(e.serverRegion),Object.assign(Object.assign({},this.logContext),{region:e.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(e);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(t){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:t}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:e.serverRegion}))}catch(n){return}this.setAndEmitConnectionState(dg.Connected),this.emit(Kh.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()})),this.handleParticipantUpdates=e=>{e.forEach((e=>{var t;if(e.identity===this.localParticipant.identity)return void this.localParticipant.updateInfo(e);""===e.identity&&(e.identity=null!==(t=this.sidToIdentity.get(e.sid))&&void 0!==t?t:"");let n=this.remoteParticipants.get(e.identity);e.state===jl.DISCONNECTED?this.handleParticipantDisconnected(e.identity,n):n=this.getOrCreateParticipant(e.identity,e)}))},this.handleActiveSpeakersUpdate=e=>{const t=[],n={};e.forEach((e=>{if(n[e.sid]=!0,e.sid===this.localParticipant.sid)this.localParticipant.audioLevel=e.level,this.localParticipant.setIsSpeaking(!0),t.push(this.localParticipant);else{const n=this.getRemoteParticipantBySid(e.sid);n&&(n.audioLevel=e.level,n.setIsSpeaking(!0),t.push(n))}})),n[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach((e=>{n[e.sid]||(e.audioLevel=0,e.setIsSpeaking(!1))})),this.activeSpeakers=t,this.emitWhenConnected(Kh.ActiveSpeakersChanged,t)},this.handleSpeakersChanged=e=>{const t=new Map;this.activeSpeakers.forEach((e=>{const n=this.remoteParticipants.get(e.identity);n&&n.sid!==e.sid||t.set(e.sid,e)})),e.forEach((e=>{let n=this.getRemoteParticipantBySid(e.sid);e.sid===this.localParticipant.sid&&(n=this.localParticipant),n&&(n.audioLevel=e.level,n.setIsSpeaking(e.active),e.active?t.set(e.sid,n):t.delete(e.sid))}));const n=Array.from(t.values());n.sort(((e,t)=>t.audioLevel-e.audioLevel)),this.activeSpeakers=n,this.emitWhenConnected(Kh.ActiveSpeakersChanged,n)},this.handleStreamStateUpdate=e=>{e.streamStates.forEach((e=>{const t=this.getRemoteParticipantBySid(e.participantSid);if(!t)return;const n=t.getTrackPublicationBySid(e.trackSid);if(!n||!n.track)return;const i=mp.streamStateFromProto(e.state);i!==n.track.streamState&&(n.track.streamState=i,t.emit(Jh.TrackStreamStateChanged,n,n.track.streamState),this.emitWhenConnected(Kh.TrackStreamStateChanged,n,n.track.streamState,t))}))},this.handleSubscriptionPermissionUpdate=e=>{const t=this.getRemoteParticipantBySid(e.participantSid);if(!t)return;const n=t.getTrackPublicationBySid(e.trackSid);n&&n.setAllowed(e.allowed)},this.handleSubscriptionError=e=>{const t=Array.from(this.remoteParticipants.values()).find((t=>t.trackPublications.has(e.trackSid)));if(!t)return;const n=t.getTrackPublicationBySid(e.trackSid);n&&n.setSubscriptionError(e.err)},this.handleDataPacket=e=>{const t=this.remoteParticipants.get(e.participantIdentity);if("user"===e.value.case)this.handleUserPacket(t,e.value.value,e.kind);else if("transcription"===e.value.case)this.handleTranscription(t,e.value.value);else if("sipDtmf"===e.value.case)this.handleSipDtmf(t,e.value.value);else if("chatMessage"===e.value.case)this.handleChatMessage(t,e.value.value);else if("metrics"===e.value.case)this.handleMetrics(e.value.value,t);else if("streamHeader"===e.value.case)this.handleStreamHeader(e.value.value,e.participantIdentity);else if("streamChunk"===e.value.case)this.handleStreamChunk(e.value.value);else if("streamTrailer"===e.value.case)this.handleStreamTrailer(e.value.value);else if("rpcRequest"===e.value.case){const t=e.value.value;this.handleIncomingRpcRequest(e.participantIdentity,t.id,t.method,t.payload,t.responseTimeoutMs,t.version)}},this.handleUserPacket=(e,t,n)=>{this.emit(Kh.DataReceived,t.payload,e,n,t.topic),null===e||void 0===e||e.emit(Jh.DataReceived,t.payload,n)},this.handleSipDtmf=(e,t)=>{this.emit(Kh.SipDTMFReceived,t,e),null===e||void 0===e||e.emit(Jh.SipDTMFReceived,t)},this.bufferedSegments=new Map,this.handleTranscription=(e,t)=>{const n=t.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(t.transcribedParticipantIdentity),i=null===n||void 0===n?void 0:n.trackPublications.get(t.trackId),r=function(e,t){return e.segments.map((e=>{let{id:n,text:i,language:r,startTime:o,endTime:s,final:a}=e;var c;const l=null!==(c=t.get(n))&&void 0!==c?c:Date.now(),u=Date.now();return a?t.delete(n):t.set(n,l),{id:n,text:i,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(s.toString()),final:a,language:r,firstReceivedTime:l,lastReceivedTime:u}}))}(t,this.transcriptionReceivedTimes);null===i||void 0===i||i.emit(Qh.TranscriptionReceived,r),null===n||void 0===n||n.emit(Jh.TranscriptionReceived,r,i),this.emit(Kh.TranscriptionReceived,r,n,i)},this.handleChatMessage=(e,t)=>{const n=function(e){const{id:t,timestamp:n,message:i,editTimestamp:r}=e;return{id:t,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:i}}(t);this.emit(Kh.ChatMessage,n,e)},this.handleMetrics=(e,t)=>{this.emit(Kh.MetricsReceived,e,t)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(Kh.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=e=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:e})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(Kh.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(Kh.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(Kh.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>xd(this,void 0,void 0,(function*(){var e;"iOS"!==(null===(e=cp())||void 0===e?void 0:e.os)&&(yield this.selectDefaultDevices()),this.emit(Kh.MediaDevicesChanged)})),this.handleRoomUpdate=e=>{const t=this.roomInfo;this.roomInfo=e,t&&t.metadata!==e.metadata&&this.emitWhenConnected(Kh.RoomMetadataChanged,e.metadata),(null===t||void 0===t?void 0:t.activeRecording)!==e.activeRecording&&this.emitWhenConnected(Kh.RecordingStatusChanged,e.activeRecording)},this.handleConnectionQualityUpdate=e=>{e.updates.forEach((e=>{if(e.participantSid===this.localParticipant.sid)return void this.localParticipant.setConnectionQuality(e.quality);const t=this.getRemoteParticipantBySid(e.participantSid);t&&t.setConnectionQuality(e.quality)}))},this.onLocalParticipantMetadataChanged=e=>{this.emit(Kh.ParticipantMetadataChanged,e,this.localParticipant)},this.onLocalParticipantNameChanged=e=>{this.emit(Kh.ParticipantNameChanged,e,this.localParticipant)},this.onLocalAttributesChanged=e=>{this.emit(Kh.ParticipantAttributesChanged,e,this.localParticipant)},this.onLocalTrackMuted=e=>{this.emit(Kh.TrackMuted,e,this.localParticipant)},this.onLocalTrackUnmuted=e=>{this.emit(Kh.TrackUnmuted,e,this.localParticipant)},this.onTrackProcessorUpdate=e=>{var t;null===(t=null===e||void 0===e?void 0:e.onPublish)||void 0===t||t.call(e,this)},this.onLocalTrackPublished=e=>xd(this,void 0,void 0,(function*(){var t,n,i,r,o,s;if(null===(t=e.track)||void 0===t||t.on(Qh.TrackProcessorUpdate,this.onTrackProcessorUpdate),null===(n=e.track)||void 0===n||n.on(Qh.Restarted,this.onLocalTrackRestarted),null===(o=null===(r=null===(i=e.track)||void 0===i?void 0:i.getProcessor())||void 0===r?void 0:r.onPublish)||void 0===o||o.call(r,this),this.emit(Kh.LocalTrackPublished,e,this.localParticipant),df(e.track)){(yield e.track.checkForSilence())&&this.emit(Kh.LocalAudioSilenceDetected,e)}const a=yield null===(s=e.track)||void 0===s?void 0:s.getDeviceId(!1),c=wf(e.source);c&&a&&a!==this.localParticipant.activeDeviceMap.get(c)&&(this.localParticipant.activeDeviceMap.set(c,a),this.emit(Kh.ActiveDeviceChanged,c,a))})),this.onLocalTrackUnpublished=e=>{var t,n;null===(t=e.track)||void 0===t||t.off(Qh.TrackProcessorUpdate,this.onTrackProcessorUpdate),null===(n=e.track)||void 0===n||n.off(Qh.Restarted,this.onLocalTrackRestarted),this.emit(Kh.LocalTrackUnpublished,e,this.localParticipant)},this.onLocalTrackRestarted=e=>xd(this,void 0,void 0,(function*(){const t=yield e.getDeviceId(!1),n=wf(e.source);n&&t&&t!==this.localParticipant.activeDeviceMap.get(n)&&(this.log.debug("local track restarted, setting ".concat(n," ").concat(t," active"),this.logContext),this.localParticipant.activeDeviceMap.set(n,t),this.emit(Kh.ActiveDeviceChanged,n,t))})),this.onLocalConnectionQualityChanged=e=>{this.emit(Kh.ConnectionQualityChanged,e,this.localParticipant)},this.onMediaDevicesError=(e,t)=>{this.emit(Kh.MediaDevicesError,e,t)},this.onLocalParticipantPermissionsChanged=e=>{this.emit(Kh.ParticipantPermissionsChanged,e,this.localParticipant)},this.onLocalChatMessageSent=e=>{this.emit(Kh.ChatMessage,e,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},lm),e),this.log=wd(null!==(n=this.options.loggerName)&&void 0!==n?n:yd.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},am),null===e||void 0===e?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},cm),null===e||void 0===e?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},sm),null===e||void 0===e?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Fa,this.localParticipant=new cg("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",tf(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",tf(this.options.audioCaptureDefaults.deviceId)),(null===(i=this.options.audioOutput)||void 0===i?void 0:i.deviceId)&&this.switchActiveDevice("audiooutput",tf(this.options.audioOutput.deviceId)).catch((e=>this.log.warn("Could not set audio output: ".concat(e.message),this.logContext))),this.options.e2ee&&this.setupE2EE(),Up()){const e=new AbortController;null===(r=navigator.mediaDevices)||void 0===r||r.addEventListener("devicechange",this.handleDeviceChange,{signal:e.signal}),hg.cleanupRegistry&&hg.cleanupRegistry.register(this,(()=>{e.abort()}))}}registerTextStreamHandler(e,t){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,t)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,t){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,t)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,t){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,t)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,t,n,i,r,o){return xd(this,void 0,void 0,(function*(){if(yield this.engine.publishRpcAck(e,t),1!==o)return void(yield this.engine.publishRpcResponse(e,t,null,pm.builtIn("UNSUPPORTED_VERSION")));const s=this.rpcHandlers.get(n);if(!s)return void(yield this.engine.publishRpcResponse(e,t,null,pm.builtIn("UNSUPPORTED_METHOD")));let a=null,c=null;try{const o=yield s({requestId:t,callerIdentity:e,payload:i,responseTimeout:r});fm(o)>15360?(a=pm.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(n))):c=o}catch(l){l instanceof pm?a=l:(console.warn("Uncaught error returned by RPC handler for ".concat(n,". Returning APPLICATION_ERROR instead."),l),a=pm.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,t,c,a)}))}setE2EEEnabled(e){return xd(this,void 0,void 0,(function*(){if(!this.e2eeManager)throw Error("e2ee not configured, please set e2ee settings within the room options");yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),""!==this.localParticipant.identity&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity)}))}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new Pf(this.options.e2ee),this.e2eeManager.on(Fh.ParticipantEncryptionStatusChanged,((e,t)=>{(function(e){return e.isLocal})(t)&&(this.isE2EEEnabled=e),this.emit(Kh.ParticipantEncryptionStatusChanged,e,t)})),this.e2eeManager.on(Fh.EncryptionError,(e=>this.emit(Kh.EncryptionError,e))),null===(e=this.e2eeManager)||void 0===e||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:null===(e=this.roomInfo)||void 0===e?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.activeRecording)&&void 0!==t&&t}getSid(){return xd(this,void 0,void 0,(function*(){return this.state===dg.Disconnected?"":this.roomInfo&&""!==this.roomInfo.sid?this.roomInfo.sid:new Promise(((e,t)=>{const n=t=>{""!==t.sid&&(this.engine.off($h.RoomUpdate,n),e(t.sid))};this.engine.on($h.RoomUpdate,n),this.once(Kh.Disconnected,(()=>{this.engine.off($h.RoomUpdate,n),t("Room disconnected before room server id was available")}))}))}))}get name(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.name)&&void 0!==t?t:""}get metadata(){var e;return null===(e=this.roomInfo)||void 0===e?void 0:e.metadata}get numParticipants(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.numParticipants)&&void 0!==t?t:0}get numPublishers(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.numPublishers)&&void 0!==t?t:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new Vm(this.options),this.engine.on($h.ParticipantUpdate,this.handleParticipantUpdates).on($h.RoomUpdate,this.handleRoomUpdate).on($h.SpeakersChanged,this.handleSpeakersChanged).on($h.StreamStateChanged,this.handleStreamStateUpdate).on($h.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on($h.SubscriptionError,this.handleSubscriptionError).on($h.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on($h.MediaTrackAdded,((e,t,n)=>{this.onTrackAdded(e,t,n)})).on($h.Disconnected,(e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)})).on($h.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on($h.DataPacketReceived,this.handleDataPacket).on($h.Resuming,(()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(dg.SignalReconnecting)&&this.emit(Kh.SignalReconnecting)})).on($h.Resumed,(()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(dg.Connected)&&this.emit(Kh.Reconnected)})).on($h.SignalResumed,(()=>{this.bufferedEvents=[],(this.state===dg.Reconnecting||this.isResuming)&&this.sendSyncState()})).on($h.Restarting,this.handleRestarting).on($h.SignalRestarted,this.handleSignalRestarted).on($h.Offline,(()=>{this.setAndEmitConnectionState(dg.Reconnecting)&&this.emit(Kh.Reconnecting)})).on($h.DCBufferStatusChanged,((e,t)=>{this.emit(Kh.DCBufferStatusChanged,e,t)})).on($h.LocalTrackSubscribed,(e=>{const t=this.localParticipant.getTrackPublications().find((t=>{let{trackSid:n}=t;return n===e}));t?(this.localParticipant.emit(Jh.LocalTrackSubscribed,t),this.emitWhenConnected(Kh.LocalTrackSubscribed,t,this.localParticipant)):this.log.warn("could not find local track subscription for subscribed event",this.logContext)})).on($h.RoomMoved,(e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach(((e,t)=>{this.handleParticipantDisconnected(t,e)})),this.emit(Kh.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)})),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Rf.getInstance().getDevices(e,t)}prepareConnection(e,t){return xd(this,void 0,void 0,(function*(){if(this.state===dg.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(Bp(new URL(e))&&t){this.regionUrlProvider=new Hm(e,t);const n=yield this.regionUrlProvider.getNextBestRegionUrl();n&&this.state===dg.Disconnected&&(this.regionUrl=n,yield fetch(nf(n),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(n),this.logContext))}else yield fetch(nf(e),{method:"HEAD"})}catch(Be){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:Be}))}}}))}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,t){return xd(this,void 0,void 0,(function*(){let n,i=()=>{};switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":n=new rd({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":n=new rd({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":n=new rd({scenario:{case:"serverLeave",value:!0}});break;case"migration":n=new rd({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>xd(this,void 0,void 0,(function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")})),n=new rd({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>xd(this,void 0,void 0,(function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")})),n=new rd({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":n=new rd({scenario:{case:"switchCandidateProtocol",value:"force-tls"===e?2:1}}),i=()=>xd(this,void 0,void 0,(function*(){const e=this.engine.client.onLeave;e&&e(new ju({reason:Rl.CLIENT_INITIATED,action:Uu.RECONNECT}))}));break;case"subscriber-bandwidth":if(void 0===t||"number"!==typeof t)throw new Error("subscriber-bandwidth requires a number as argument");n=new rd({scenario:{case:"subscriberBandwidth",value:sf(t)}});break;case"leave-full-reconnect":n=new rd({scenario:{case:"leaveRequestFullReconnect",value:!0}})}n&&(yield this.engine.client.sendSimulateScenario(n),yield i())}))}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,t){return xd(this,arguments,void 0,(function(e,t){var n=this;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function*(){var r,o,s,a,c,l,u,d;let h=!0,p=!1;const f=i?{exact:t}:t;if("audioinput"===e){p=0===n.localParticipant.audioTrackPublications.size;const t=null!==(r=n.getActiveDevice(e))&&void 0!==r?r:n.options.audioCaptureDefaults.deviceId;n.options.audioCaptureDefaults.deviceId=f;const i=Array.from(n.localParticipant.audioTrackPublications.values()).filter((e=>e.source===mp.Source.Microphone));try{h=(yield Promise.all(i.map((e=>{var t;return null===(t=e.audioTrack)||void 0===t?void 0:t.setDeviceId(f)})))).every((e=>!0===e))}catch(Be){throw n.options.audioCaptureDefaults.deviceId=t,Be}}else if("videoinput"===e){p=0===n.localParticipant.videoTrackPublications.size;const t=null!==(o=n.getActiveDevice(e))&&void 0!==o?o:n.options.videoCaptureDefaults.deviceId;n.options.videoCaptureDefaults.deviceId=f;const i=Array.from(n.localParticipant.videoTrackPublications.values()).filter((e=>e.source===mp.Source.Camera));try{h=(yield Promise.all(i.map((e=>{var t;return null===(t=e.videoTrack)||void 0===t?void 0:t.setDeviceId(f)})))).every((e=>!0===e))}catch(Be){throw n.options.videoCaptureDefaults.deviceId=t,Be}}else if("audiooutput"===e){if(!Ip()&&!n.options.webAudioMix||n.options.webAudioMix&&n.audioContext&&!("setSinkId"in n.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");n.options.webAudioMix&&(t=null!==(s=yield Rf.getInstance().normalizeDeviceId("audiooutput",t))&&void 0!==s?s:""),null!==(a=(d=n.options).audioOutput)&&void 0!==a||(d.audioOutput={});const i=null!==(c=n.getActiveDevice(e))&&void 0!==c?c:n.options.audioOutput.deviceId;n.options.audioOutput.deviceId=t;try{n.options.webAudioMix&&(null===(l=n.audioContext)||void 0===l||l.setSinkId(t)),yield Promise.all(Array.from(n.remoteParticipants.values()).map((e=>e.setAudioOutput({deviceId:t}))))}catch(Be){throw n.options.audioOutput.deviceId=i,Be}}return(p||"audiooutput"===e)&&(n.localParticipant.activeDeviceMap.set(e,"audiooutput"===e&&(null===(u=n.options.audioOutput)||void 0===u?void 0:u.deviceId)||t),n.emit(Kh.ActiveDeviceChanged,e,t)),h}()}))}setupLocalParticipantEvents(){this.localParticipant.on(Jh.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(Jh.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(Jh.AttributesChanged,this.onLocalAttributesChanged).on(Jh.TrackMuted,this.onLocalTrackMuted).on(Jh.TrackUnmuted,this.onLocalTrackUnmuted).on(Jh.LocalTrackPublished,this.onLocalTrackPublished).on(Jh.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(Jh.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(Jh.MediaDevicesError,this.onMediaDevicesError).on(Jh.AudioStreamAcquired,this.startAudio).on(Jh.ChatMessage,this.onLocalChatMessageSent).on(Jh.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;null===(e=this.engine)||void 0===e||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,t,n){if(this.state===dg.Connecting||this.state===dg.Reconnecting){const i=()=>{this.onTrackAdded(e,t,n),r()},r=()=>{this.off(Kh.Reconnected,i),this.off(Kh.Connected,i),this.off(Kh.Disconnected,r)};return this.once(Kh.Reconnected,i),this.once(Kh.Connected,i),void this.once(Kh.Disconnected,r)}if(this.state===dg.Disconnected)return void this.log.warn("skipping incoming track after Room disconnected",this.logContext);if("ended"===e.readyState)return void this.log.info("skipping incoming track as it already ended",this.logContext);const i=function(e){const t=e.split("|");return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}(t.id),r=i[0];let o=i[1],s=e.id;if(o&&o.startsWith("TR")&&(s=o),r===this.localParticipant.sid)return void this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);const a=Array.from(this.remoteParticipants.values()).find((e=>e.sid===r));if(!a)return void this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(r),this.logContext);let c;this.options.adaptiveStream&&(c="object"===typeof this.options.adaptiveStream?this.options.adaptiveStream:{}),a.addSubscribedMediaTrack(e,s,t,n,c)}handleDisconnect(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;var n;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==dg.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach((e=>{e.trackPublications.forEach((t=>{e.unpublishTrack(t.trackSid)}))})),this.localParticipant.trackPublications.forEach((t=>{var n,i,r;t.track&&this.localParticipant.unpublishTrack(t.track,e),e?(null===(n=t.track)||void 0===n||n.detach(),null===(i=t.track)||void 0===i||i.stop()):null===(r=t.track)||void 0===r||r.stopMonitor()})),this.localParticipant.off(Jh.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(Jh.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(Jh.AttributesChanged,this.onLocalAttributesChanged).off(Jh.TrackMuted,this.onLocalTrackMuted).off(Jh.TrackUnmuted,this.onLocalTrackUnmuted).off(Jh.LocalTrackPublished,this.onLocalTrackPublished).off(Jh.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(Jh.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(Jh.MediaDevicesError,this.onMediaDevicesError).off(Jh.AudioStreamAcquired,this.startAudio).off(Jh.ChatMessage,this.onLocalChatMessageSent).off(Jh.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&"boolean"===typeof this.options.webAudioMix&&(this.audioContext.close(),this.audioContext=void 0),Up()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),null===(n=navigator.mediaDevices)||void 0===n||n.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(dg.Disconnected),this.emit(Kh.Disconnected,t)}}}handleParticipantDisconnected(e,t){var n;this.remoteParticipants.delete(e),t&&(t.trackPublications.forEach((e=>{t.unpublishTrack(e.trackSid,!0)})),this.emit(Kh.ParticipantDisconnected,t),t.setDisconnected(),null===(n=this.localParticipant)||void 0===n||n.handleParticipantDisconnected(t.identity))}handleStreamHeader(e,t){return xd(this,void 0,void 0,(function*(){var n;if("byteHeader"===e.contentHeader.case){const i=this.byteStreamHandlers.get(e.topic);if(!i)return void this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);let r;const o={id:e.streamId,name:null!==(n=e.contentHeader.value.name)&&void 0!==n?n:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:of(e.timestamp),attributes:e.attributes},s=new ReadableStream({start:t=>{r=t,this.byteStreamControllers.set(e.streamId,{info:o,controller:r,startTime:Date.now()})}});i(new Gm(o,s,of(e.totalLength)),{identity:t})}else if("textHeader"===e.contentHeader.case){const n=this.textStreamHandlers.get(e.topic);if(!n)return void this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);let i;const r={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},o=new ReadableStream({start:t=>{i=t,this.textStreamControllers.set(e.streamId,{info:r,controller:i,startTime:Date.now()})}});n(new Km(r,o,of(e.totalLength)),{identity:t})}}))}handleStreamChunk(e){const t=this.byteStreamControllers.get(e.streamId);t&&e.content.length>0&&t.controller.enqueue(e);const n=this.textStreamControllers.get(e.streamId);n&&e.content.length>0&&n.controller.enqueue(e)}handleStreamTrailer(e){const t=this.textStreamControllers.get(e.streamId);t&&(t.info.attributes=Object.assign(Object.assign({},t.info.attributes),e.attributes),t.controller.close(),this.textStreamControllers.delete(e.streamId));const n=this.byteStreamControllers.get(e.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),e.attributes),n.controller.close(),this.byteStreamControllers.delete(e.streamId))}selectDefaultDevices(){return xd(this,void 0,void 0,(function*(){var e,t,n;const i=Rf.getInstance().previousDevices,r=yield Rf.getInstance().getDevices(void 0,!1),o=cp();if("Chrome"===(null===o||void 0===o?void 0:o.name)&&"iOS"!==o.os)for(let a of r){const e=i.find((e=>e.deviceId===a.deviceId));e&&""!==e.label&&e.kind===a.kind&&e.label!==a.label&&"default"===this.getActiveDevice(a.kind)&&this.emit(Kh.ActiveDeviceChanged,a.kind,a.deviceId)}const s=["audiooutput","audioinput","videoinput"];for(let a of s){const o=kf(a),s=this.localParticipant.getTrackPublication(o);if(s&&(null===(e=s.track)||void 0===e?void 0:e.isUserProvided))continue;const c=r.filter((e=>e.kind===a)),l=this.getActiveDevice(a);l===(null===(t=i.filter((e=>e.kind===a))[0])||void 0===t?void 0:t.deviceId)&&c.length>0&&(null===(n=c[0])||void 0===n?void 0:n.deviceId)!==l?yield this.switchActiveDevice(a,c[0].deviceId):"audioinput"===a&&!Mp()||"videoinput"===a||!(c.length>0)||c.find((e=>e.deviceId===this.getActiveDevice(a)))||"audiooutput"===a&&Mp()||(yield this.switchActiveDevice(a,c[0].deviceId))}}))}acquireAudioContext(){return xd(this,void 0,void 0,(function*(){var e,t;if("boolean"!==typeof this.options.webAudioMix&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:this.audioContext&&"closed"!==this.audioContext.state||(this.audioContext=null!==(e=bf())&&void 0!==e?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach((e=>e.setAudioContext(this.audioContext))),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&"suspended"===this.audioContext.state)try{yield Promise.race([this.audioContext.resume(),Op(200)])}catch(Be){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:Be}))}const n="running"===(null===(t=this.audioContext)||void 0===t?void 0:t.state);n!==this.canPlaybackAudio&&(this.audioEnabled=n,this.emit(Kh.AudioPlaybackStatusChanged,n))}))}createParticipant(e,t){var n;let i;return i=t?ug.fromParticipantInfo(this.engine.client,t,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):new ug(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),(null===(n=this.options.audioOutput)||void 0===n?void 0:n.deviceId)&&i.setAudioOutput(this.options.audioOutput).catch((e=>this.log.warn("Could not set audio output: ".concat(e.message),this.logContext))),i}getOrCreateParticipant(e,t){if(this.remoteParticipants.has(e)){const n=this.remoteParticipants.get(e);if(t){n.updateInfo(t)&&this.sidToIdentity.set(t.sid,t.identity)}return n}const n=this.createParticipant(e,t);return this.remoteParticipants.set(e,n),this.sidToIdentity.set(t.sid,t.identity),this.emitWhenConnected(Kh.ParticipantConnected,n),n.on(Jh.TrackPublished,(e=>{this.emitWhenConnected(Kh.TrackPublished,e,n)})).on(Jh.TrackSubscribed,((e,t)=>{e.kind===mp.Kind.Audio?(e.on(Qh.AudioPlaybackStarted,this.handleAudioPlaybackStarted),e.on(Qh.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):e.kind===mp.Kind.Video&&(e.on(Qh.VideoPlaybackFailed,this.handleVideoPlaybackFailed),e.on(Qh.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(Kh.TrackSubscribed,e,t,n)})).on(Jh.TrackUnpublished,(e=>{this.emit(Kh.TrackUnpublished,e,n)})).on(Jh.TrackUnsubscribed,((e,t)=>{this.emit(Kh.TrackUnsubscribed,e,t,n)})).on(Jh.TrackMuted,(e=>{this.emitWhenConnected(Kh.TrackMuted,e,n)})).on(Jh.TrackUnmuted,(e=>{this.emitWhenConnected(Kh.TrackUnmuted,e,n)})).on(Jh.ParticipantMetadataChanged,(e=>{this.emitWhenConnected(Kh.ParticipantMetadataChanged,e,n)})).on(Jh.ParticipantNameChanged,(e=>{this.emitWhenConnected(Kh.ParticipantNameChanged,e,n)})).on(Jh.AttributesChanged,(e=>{this.emitWhenConnected(Kh.ParticipantAttributesChanged,e,n)})).on(Jh.ConnectionQualityChanged,(e=>{this.emitWhenConnected(Kh.ConnectionQualityChanged,e,n)})).on(Jh.ParticipantPermissionsChanged,(e=>{this.emitWhenConnected(Kh.ParticipantPermissionsChanged,e,n)})).on(Jh.TrackSubscriptionStatusChanged,((e,t)=>{this.emitWhenConnected(Kh.TrackSubscriptionStatusChanged,e,t,n)})).on(Jh.TrackSubscriptionFailed,((e,t)=>{this.emit(Kh.TrackSubscriptionFailed,e,n,t)})).on(Jh.TrackSubscriptionPermissionChanged,((e,t)=>{this.emitWhenConnected(Kh.TrackSubscriptionPermissionChanged,e,t,n)})).on(Jh.Active,(()=>{this.emitWhenConnected(Kh.ParticipantActive,n),n.kind===Ul.AGENT&&this.localParticipant.setActiveAgent(n)})),t&&n.updateInfo(t),n}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce(((e,t)=>(e.push(...t.getTrackPublications()),e)),[]),t=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,t)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const t of e.videoTrackPublications.values())t.isSubscribed&&pf(t)&&t.emitTrackUpdate()}getRemoteParticipantBySid(e){const t=this.sidToIdentity.get(e);if(t)return this.remoteParticipants.get(t)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=hp.setInterval((()=>{this.engine&&!this.engine.isClosed&&this.engine.verifyTransport()?e=0:(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Rl.STATE_MISMATCH)))}),4e3)}clearConnectionReconcile(){this.connectionReconcileInterval&&hp.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e!==this.state&&(this.state=e,this.emit(Kh.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach((e=>{let[t,n]=e;this.emit(t,...n)})),this.bufferedEvents=[]}emitWhenConnected(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.state===dg.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,n]);else if(this.state===dg.Connected)return this.emit(e,...n);return!1}simulateParticipants(e){return xd(this,void 0,void 0,(function*(){var t,n;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),r=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Ll({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:ac.parse((new Date).getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Dl({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(Kh.SignalConnected),this.emit(Kh.Connected),this.setAndEmitConnectionState(dg.Connected),i.video){const e=new rg(mp.Kind.Video,new Vl({source:xl.CAMERA,sid:Math.floor(1e4*Math.random()).toString(),type:Tl.AUDIO,name:"video-dummy"}),new Am(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:Xp(160*(null!==(t=r.aspectRatios[0])&&void 0!==t?t:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(e),this.localParticipant.emit(Jh.LocalTrackPublished,e)}if(i.audio){const e=new rg(mp.Kind.Audio,new Vl({source:xl.MICROPHONE,sid:Math.floor(1e4*Math.random()).toString(),type:Tl.AUDIO}),new Sm(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Zp(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(e),this.localParticipant.emit(Jh.LocalTrackPublished,e)}for(let e=0;e<r.count-1;e+=1){let t=new Dl({sid:Math.floor(1e4*Math.random()).toString(),identity:"simulated-".concat(e),state:jl.ACTIVE,tracks:[],joinedAt:ac.parse(Date.now())});const i=this.getOrCreateParticipant(t.identity,t);if(r.video){const o=Xp(160*(null!==(n=r.aspectRatios[e%r.aspectRatios.length])&&void 0!==n?n:1),160,!1,!0),s=new Vl({source:xl.CAMERA,sid:Math.floor(1e4*Math.random()).toString(),type:Tl.AUDIO});i.addSubscribedMediaTrack(o,s.sid,new MediaStream([o]),new RTCRtpReceiver),t.tracks=[...t.tracks,s]}if(r.audio){const e=Zp(),n=new Vl({source:xl.MICROPHONE,sid:Math.floor(1e4*Math.random()).toString(),type:Tl.AUDIO});i.addSubscribedMediaTrack(e,n.sid,new MediaStream([e]),new RTCRtpReceiver),t.tracks=[...t.tracks,n]}i.updateInfo(t)}}))}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e!==Kh.ActiveSpeakersChanged&&e!==Kh.TranscriptionReceived){const t=pg(n).filter((e=>void 0!==e));this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:t}))}return super.emit(e,...n)}}function pg(e){return e.map((e=>{if(e)return Array.isArray(e)?pg(e):"object"===typeof e?"logContext"in e?e.logContext:void 0:e}))}hg.cleanupRegistry="undefined"!==typeof FinalizationRegistry&&new FinalizationRegistry((e=>{e()}));var fg;!function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"}(fg||(fg={}));_d.EventEmitter;_d.EventEmitter;new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);const mg=(0,r.createContext)(),gg=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(new Map),[a,c]=(0,r.useState)(!1),[l,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[m,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),b=(0,r.useRef)(null),k=()=>{b.current&&(b.current.disconnect(),i(null),c(!1),s(new Map),f(null),g(null),u(!1),h(!1),y(!1))};(0,r.useEffect)((()=>()=>{k()}),[]);const w={room:n,participants:o,isConnected:a,isMicOn:l,isVideoOn:d,localVideoTrack:p,localAudioTrack:m,connectToRoom:async(e,t,n,r)=>{try{const n=new hg;if(b.current=n,n.on(Kh.ParticipantConnected,(e=>{s((t=>{const n=new Map(t);return n.set(e.identity,e),n}))})),n.on(Kh.ParticipantDisconnected,(e=>{s((t=>{const n=new Map(t);return n.delete(e.identity),n}))})),n.on(Kh.TrackSubscribed,((e,t,n)=>{e.kind===mp.Kind.Audio&&t.setEnabled&&t.setEnabled(!0),e.kind===mp.Kind.Video&&t.setEnabled&&t.setEnabled(!0),s((e=>{const t=new Map(e);return t.set(n.identity,n),t}))})),n.on(Kh.TrackUnsubscribed,((e,t,n)=>{s((e=>{const t=new Map(e);return t.set(n.identity,n),t}))})),n.on(Kh.TrackPublished,((e,t)=>{e&&e.setSubscribed&&e.setSubscribed(!0),s((e=>{const n=new Map(e);return n.set(t.identity,t),n}))})),n.on(Kh.TrackUnpublished,((e,t)=>{})),await n.connect(t,e,{autoSubscribe:!0,audio:!0,video:!0}),i(n),c(!0),n.localParticipant&&s((e=>{const t=new Map(e);return t.set(n.localParticipant.identity,n.localParticipant),t})),n.participants&&"function"===typeof n.participants.forEach)n.participants.forEach((e=>{s((t=>{const n=new Map(t);return n.set(e.identity,e),n})),e.trackPublications&&e.trackPublications.forEach((e=>{e&&e.setSubscribed&&e.setSubscribed(!0)}))}));else if(n.participants&&n.participants.size>0)for(const[e,t]of n.participants)s((e=>{const n=new Map(e);return n.set(t.identity,t),n})),t.trackPublications&&t.trackPublications.forEach((e=>{e&&e.setSubscribed&&e.setSubscribed(!0)}))}catch(o){throw console.error("Failed to connect to LiveKit room:",o),o}},disconnectFromRoom:k,toggleMic:async()=>{if(n)try{if(l||v||await(async()=>{try{if("undefined"!==typeof window&&(window.AudioContext||window.webkitAudioContext)){const e=new(window.AudioContext||window.webkitAudioContext);"suspended"===e.state&&await e.resume(),y(!0)}}catch(e){console.error("Failed to enable audio context:",e)}})(),l)await n.localParticipant.setMicrophoneEnabled(!1),u(!1),g(null);else{await n.localParticipant.setMicrophoneEnabled(!0),u(!0);let e=n.localParticipant.getTrackPublication("microphone");if(e||(e=n.localParticipant.getTrackPublication("mic")),!e){const t=Array.from(n.localParticipant.trackPublications.values()).filter((e=>e.kind===mp.Kind.Audio));t.length>0&&(e=t[0])}e&&e.track&&g(e.track)}}catch(e){console.error("Failed to toggle microphone:",e)}},toggleVideo:async()=>{if(n)try{d?(await n.localParticipant.setCameraEnabled(!1),h(!1),f(null)):(await n.localParticipant.setCameraEnabled(!0),h(!0),setTimeout((()=>{let e=n.localParticipant.getTrackPublication("camera");if(e||(e=n.localParticipant.getTrackPublication("webcam")),!e){const t=Array.from(n.localParticipant.trackPublications.values()).filter((e=>e.kind===mp.Kind.Video));t.length>0&&(e=t[0])}e&&e.track&&f(e.track)}),100))}catch(e){console.error("Error toggling camera:",e)}},getParticipantVideoTrack:e=>{const t=o.get(e);if(!t||!t.getTrackPublication)return null;try{var n;let e=t.getTrackPublication("camera");if(e||(e=t.getTrackPublication("webcam")),!e){const n=Array.from(t.trackPublications.values()).filter((e=>e.kind===mp.Kind.Video));n.length>0&&(e=n[0])}return(null===(n=e)||void 0===n?void 0:n.track)||null}catch(i){return console.error("Error getting participant video track:",i),null}},getParticipantAudioTrack:e=>{const t=o.get(e);if(!t||!t.getTrackPublication)return null;try{var n;let e=t.getTrackPublication("microphone");if(e||(e=t.getTrackPublication("mic")),!e){const n=Array.from(t.trackPublications.values()).filter((e=>e.kind===mp.Kind.Audio));n.length>0&&(e=n[0])}return(null===(n=e)||void 0===n?void 0:n.track)||null}catch(i){return console.error("Error getting participant audio track:",i),null}},isParticipantVideoEnabled:e=>{const t=o.get(e);if(!t||!t.getTrackPublication)return!1;try{var n;let e=t.getTrackPublication("camera");if(e||(e=t.getTrackPublication("webcam")),!e){const n=Array.from(t.trackPublications.values()).filter((e=>e.kind===mp.Kind.Video));n.length>0&&(e=n[0])}return(null===(n=e)||void 0===n?void 0:n.isEnabled)||!1}catch(i){return console.error("Error checking participant video status:",i),!1}},isParticipantAudioEnabled:e=>{const t=o.get(e);if(!t||!t.getTrackPublication)return!1;try{var n;let e=t.getTrackPublication("microphone");if(e||(e=t.getTrackPublication("mic")),!e){const n=Array.from(t.trackPublications.values()).filter((e=>e.kind===mp.Kind.Audio));n.length>0&&(e=n[0])}return(null===(n=e)||void 0===n?void 0:n.isEnabled)||!1}catch(i){return console.error("Error checking participant audio status:",i),!1}},audioContextEnabled:v};return(0,en.jsx)(mg.Provider,{value:w,children:t})},vg=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null),n=ee(),{roomId:i}=function(){let{matches:e}=r.useContext(Y),t=e[e.length-1];return t?t.params:{}}(),o=ne(),[s,a]=(0,r.useState)([]),{connectToRoom:c,disconnectFromRoom:l,toggleMic:u,toggleVideo:d,isMicOn:h,isVideoOn:p,localVideoTrack:f,localAudioTrack:m,getParticipantVideoTrack:g,getParticipantAudioTrack:v,isParticipantVideoEnabled:y,isParticipantAudioEnabled:b,isConnected:k}=(()=>{const e=(0,r.useContext)(mg);if(!e)throw new Error("useLiveKit must be used within a LiveKitProvider");return e})();return(0,r.useEffect)((()=>((async()=>{try{function l(e){console.error("Socket connection error:",e),Zt.error("Socket connection failed, try again later."),o("/")}var r;if(t.current=await(async()=>ao("http://localhost:8080",{"force new connection":!0,reconnectionAttempts:"Infinity",timeout:1e4,transports:["websocket"],withCredentials:!0}))(),t.current.on("connect_error",(e=>l(e))),t.current.on("connect_failed",(e=>l(e))),t.current.on("connect",(()=>{var e;t.current.emit(ji().JOIN,{roomId:i,username:null===(e=n.state)||void 0===e?void 0:e.username})})),t.current.connected)t.current.emit(ji().JOIN,{roomId:i,username:null===(r=n.state)||void 0===r?void 0:r.username});t.current.on(ji().JOINED,(i=>{var r;let{clients:o,username:s,socketId:c}=i;s!==(null===(r=n.state)||void 0===r?void 0:r.username)&&Zt.success("".concat(s," joined the room.")),a(o),e.current&&t.current.connected&&t.current.emit(ji().SYNC_CODE,{code:e.current,socketId:c})})),t.current.on(ji().DISCONNECTED,(e=>{let{socketId:t,username:n}=e;Zt.success("".concat(n," left the room.")),a((e=>e.filter((e=>e.socketId!==t))))})),await(async()=>{try{var e,t;const r="http://localhost:8080",o=await fetch("".concat(r,"/api/get-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomName:i,participantName:null===(e=n.state)||void 0===e?void 0:e.username})});if(!o.ok)throw new Error("Failed to get LiveKit token");const{token:s,wsUrl:a}=await o.json();await c(s,a,i,null===(t=n.state)||void 0===t?void 0:t.username),Zt.success("Connected to voice/video")}catch(r){console.error("Failed to connect to LiveKit:",r),Zt.error("Failed to connect to voice/video")}})()}catch(s){console.error("Failed to initialize:",s),Zt.error("Failed to connect to server"),o("/")}})(),()=>{t.current&&(t.current.disconnect(),t.current.off(ji().JOINED),t.current.off(ji().DISCONNECTED),t.current.off("connect"),t.current.off("connect_error"),t.current.off("connect_failed")),l()})),[]),n.state?(0,en.jsxs)("div",{className:"mainWrap",children:[(0,en.jsx)("div",{className:"aside",children:(0,en.jsxs)("div",{className:"asideInner",children:[(0,en.jsx)("div",{className:"logo",children:(0,en.jsx)("img",{src:"/code-sync.png",alt:"logo",className:"logoImage"})}),(0,en.jsx)("h3",{children:"Connected"}),(0,en.jsx)("div",{className:"clientsList",children:s.map((e=>{var t;const i=e.username===(null===(t=n.state)||void 0===t?void 0:t.username),r=i?f:g(e.username),o=i?m:v(e.username),s=i?p:y(e.username),a=i?h:b(e.username);return(0,en.jsx)(Li,{username:e.username,videoTrack:r,audioTrack:o,isVideoEnabled:s,isAudioEnabled:a},e.socketId)}))}),(0,en.jsx)(Fi,{isMicOn:h,isVideoOn:p,onToggleMic:u,onToggleVideo:d}),(0,en.jsx)("button",{className:"btn copyBtn",onClick:async function(){try{await navigator.clipboard.writeText(i),Zt.success("Room ID has been copied!")}catch(bg){Zt.error("Could not copy the Room ID")}},children:"Copy Room ID"}),(0,en.jsx)("button",{className:"btn leaveBtn",onClick:function(){l(),o("/")},children:"Leave"})]})}),(0,en.jsxs)("div",{className:"editorWrap",children:[(0,en.jsx)(Ui,{socketRef:t,roomId:i,onCodeChange:t=>{e.current=t}}),(0,en.jsx)(Ma,{codeRef:e,socketRef:t,roomId:i})]})]}):(0,en.jsx)(ge,{to:"/"})};const yg=function(){return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)("div",{children:(0,en.jsx)(Xt,{position:"top-right",toastOptions:{success:{theme:{primary:"#4aed88"}}}})}),(0,en.jsx)(gg,{children:(0,en.jsx)(Se,{children:(0,en.jsxs)(be,{children:[(0,en.jsx)(ve,{path:"/",element:(0,en.jsx)(tn,{})}),(0,en.jsx)(ve,{path:"/editor/:roomId",element:(0,en.jsx)(vg,{})})]})})})]})};s.createRoot(document.getElementById("root")).render((0,en.jsx)(yg,{}))})()})();
//# sourceMappingURL=main.1f26cc11.js.map